"use strict";var e={base:{outer:["appid","xwho","xwhat","xwhen","xcontext"],xcontext:["$lib","$lib_version","$platform","$debug","$is_login"]},$startup:{xcontext:["$brand","$model","$os","$os_version","$browser","$browser_version","$network","$screen_width","$screen_height","$utm_campaign_id","$utm_campaign","$utm_medium","$utm_source","$utm_content","$utm_term","$is_first_day","$time_zone","$language","$session_id","$is_time_calibrated","$is_first_time","$scene"]},$track:{xcontext:["$brand","$model","$os","$os_version","$browser","$browser_version","$network","$screen_width","$screen_height","$utm_campaign_id","$utm_campaign","$utm_medium","$utm_source","$utm_content","$utm_term","$is_first_day","$time_zone","$language","$session_id","$is_time_calibrated"]},$pageview:{xcontext:["$brand","$model","$os","$os_version","$browser","$browser_version","$network","$screen_width","$screen_height","$utm_campaign_id","$utm_campaign","$utm_medium","$utm_source","$utm_content","$utm_term","$is_first_day","$time_zone","$language","$session_id","$is_time_calibrated","$referrer","$scene","$startup_time","$url","$share_id","$share_path","$share_level"]},$alias:{xcontext:["$original_id"]},$getPresetProperties:{xcontext:["$time_zone","$language","$screen_width","$screen_height","$network","$first_visit_time","$brand","$model","$os","$session_id"]},$userClick:{xcontext:["$element_content","$element_id","$element_type","$element_name","$url","$is_first_day","$session_id","$is_time_calibrated"]}},y={base:{appid:"",$debug:0,$lib_version:"4.3.9",$lib:"WeChat",uploadURL:"",auto:!0,autoProfile:!0,encryptType:0,autoShare:!1,$share_level:"",$share_path:"",$share_id:"",appProperty:null,allowTimeCheck:!1,maxDiffTimeInterval:30,logflag:!1,userObj:{},userPageObj:{},autoTrack:!1,pageProperty:null,autoCompleteURL:!0},status:{code:200,FnName:"",key:"",value:"",errorCode:"",successCode:""},system:{system:{},netWork:{},scene:null},isStartUp:!1,FnCatch:[],FnSuperCatch:[],keywords:e.base.xcontext,baseJson:e.base.outer,sendNum:1800};function t(e){wx.request(e)}var a=Object.freeze({__proto__:null,request:t}),r=function(r){return new Promise(function(t,a){try{var e=wx.getStorageSync(r);t(e||{})}catch(e){wx.getStorage({key:r,success:function(e){t(e.data)},fail:function(e){a(e)}})}}).catch(function(e){})},n=function(n,e){return new Promise(function(t,a){var r=e;try{wx.setStorageSync(n,r),t(200)}catch(e){wx.setStorage({key:n,data:r,success:function(){t(200)},fail:function(){a(400)}})}}).catch(function(e){})},s=Object.freeze({__proto__:null,getStoragePromise:r,setStoragePromise:n});function o(){return new Promise(function(t,a){wx.getSystemInfo({success:function(e){t(e)},fail:function(e){a(e)}})}).catch(function(e){})}var u=Object.freeze({__proto__:null,systemPromise:o});function i(){return new Promise(function(t,a){wx.getNetworkType({success:function(e){t(e)},fail:function(e){a(e)}})}).catch(function(e){})}var c=Object.freeze({__proto__:null,netWorkPromise:i});function l(){return y.system.scene?y.system.scene.toString():""}function p(){return""}function m(){var e=getCurrentPages();if(0<e.length){var t=e[e.length-1].__route__,a=e[e.length-1].options;if(0<Object.keys(a).length&&1==y.base.autoCompleteURL){var r=t+"?";for(var n in a){r+=n+"="+a[n]+"&"}return r=r.substring(0,r.length-1)}return t}}function f(){return""}function g(){var e=getCurrentPages();return 1<e.length&&e[e.length-2]?e[e.length-2].__route__:l()}var v=Object.freeze({__proto__:null,getScene:l,getPackageName:p,getPath:m,getTitle:f,getReferer:g}),h=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},d=function(){function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,a){return t&&r(e.prototype,t),a&&r(e,a),e}}(),b=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},T=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},S=function(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)},_=function e(){var t=this;h(this,e),this.AppObj=wx,this.Fetch=a,this.Storage=s,this.System=u,this.Network=c,this.Router=v,this.setPublicApp=function(e){t.AppObj=e},this.getPublicApp=function(){return t.AppObj}},A=new _,$=A.Storage.getStoragePromise,k=A.Storage.setStoragePromise,R=function(){function e(){h(this,e),this.local={},this.Session={},this.localStatus=!1,this.getStoragePromise=A.Storage.getStoragePromise}return d(e,[{key:"initLocalData",value:function(){var e=this;return $("FZ_STROAGE").then(function(t){if(!e.localStatus){if(e.localStatus=!0,"string"==typeof(t=t||{}))try{t=JSON.parse(t)}catch(e){t={}}e.local=Object.assign(t,e.local),k("FZ_STROAGE",e.local).then(function(){},function(e){}).catch(function(e){})}},function(){e.local={}}).catch(function(e){})}},{key:"setData",value:function(e,t){this.Session[e]=t}},{key:"getData",value:function(e){return"undefind"===this.Session[e]?"":this.Session[e]}},{key:"removeData",value:function(e){"undefind"!==this.Session[e]&&delete this.Session[e]}},{key:"clearData",value:function(){this.Session={}}},{key:"setLocal",value:function(e,t){this.local[e]=t;var a=this.local;k("FZ_STROAGE",a).then(function(){},function(e){}).catch(function(e){})}},{key:"getLocal",value:function(e){return this.local[e]}},{key:"removeLocal",value:function(e){if("undefind"!==this.local[e]){delete this.local[e];var t=this.local;k("FZ_STROAGE",t).then(function(){},function(){}).catch(function(e){})}}}]),e}(),L=new R,E=function(){function e(){h(this,e)}return d(e,[{key:"paramType",value:function(e){return Object.prototype.toString.call(e).replace("[object ","").replace("]","")}},{key:"delEmpty",value:function(e){var a=this,r=this.deepClone(e);return"Object"!==this.paramType(r)?{}:(Object.keys(r).forEach(function(e){var t=r[e];"Object"===a.paramType(t)&&(r[e]=a.delEmpty(r[e]),0===Object.keys(r[e]).length&&delete r[e]),""===t&&delete r[e]}),r)}},{key:"deepClone",value:function(e){var t=Object.getPrototypeOf(e);return Object.assign({},Object.create(t),e)}},{key:"mergeMsg",value:function(e,t){Object.assign(t,e)}},{key:"checkObj",value:function(e,t){var a={};if(1!==arguments.length||e.constructor!==Array)return 1===arguments.length&&e.constructor===String?a[e]=t||"":1<arguments.length&&e.constructor!==Object?a[e]=t:a=e,a;for(var r=0;r<e.length;r++)a[e[r]]="";return a}},{key:"isFristDay",value:function(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1;a=a<10?"0"+a:a;var r=e.getDate(),n=t+""+a+(r=r<10?"0"+r:r),s=L.getLocal("FRISTDAY");return(!s||n===s)&&(s||L.setLocal("FRISTDAY",n),!0)}},{key:"isFristTime",value:function(){var e=!1!==L.getLocal("FRISTIME");return e&&L.setLocal("FRISTIME",!1),e}},{key:"isEmptyObject",value:function(e){return!(0<Object.keys(e).length)}},{key:"setFristDay",value:function(){if("String"!==this.paramType(L.getLocal("FRISTDAY"))){var e=this.format(new Date,"yyyyMMdd");y.base.allowTimeCheck&&y.base.logflag&&(e=this.format(new Date(+new Date+(L.getLocal("ANSSERVERTIME")?Number(L.getLocal("ANSSERVERTIME")):0)),"yyyyMMdd")),L.setLocal("FRISTDAY",e)}}},{key:"setFristTime",value:function(){"Boolean"!==this.paramType(L.getLocal("FRISTIME"))&&L.setLocal("FRISTIME",!0)}},{key:"delFristDay",value:function(){L.removeLocal("FRISTDAY")}},{key:"delFristTime",value:function(){L.removeLocal("FRISTIME")}},{key:"checkURL",value:function(e){var t=e;return 1==new RegExp(/http(s)?:\/\/([\w-]+\.)+[\w-]+(\/[\w- .\/?%&=]*)?/).test(t)}},{key:"firstVisitTime",value:function(){var e=!1!==L.getLocal("FIRSTVISITTIME");return e&&L.setLocal("FIRSTVISITTIME",!1),e}},{key:"toDeepObj",value:function(e,t){var a={};if("String"===this.paramType(e))return a=this.keyValueToObje(e,t);if("Array"===this.paramType(e))return a=this.ArrayToObj(e);if("Object"===this.paramType(e))for(var r in e)a[r]=this.toDeepObj(e[r]);return a}},{key:"ArrayToObj",value:function(e){for(var t={},a=0;a<e.length;a++)t[e[a]]="";return t}},{key:"keyValueToObje",value:function(e,t){var a={};return a[e]=t,a}},{key:"toObj",value:function(e,t){var a={};return"String"===this.paramType(e)?a=this.keyValueToObje(e,t):"Array"===this.paramType(e)?a=this.ArrayToObj(e):"Object"===this.paramType(e)?e:a}},{key:"objMerge",value:function(e,t){if("Object"!==this.paramType(e)||"Object"!==this.paramType(t))return e;var a={};for(var r in e)a[r]=e[r];for(var r in t)a[r]&&"Object"===this.paramType(a[r])&&"Object"===this.paramType(t[r])?a[r]=this.objMerge(a[r],t[r]):"Array"===this.paramType(a[r])&&"Array"===this.paramType(t[r])?a[r]=this.arrayMergeUnique(a[r],t[r]):a[r]=t[r];return a}},{key:"arrayUnique",value:function(e){for(var t=[],a={},r=0;r<e.length;r++)a[e[r]]||(a[e[r]]=!0,t.push(e[r]));return t}},{key:"arrayMerge",value:function(e,t){return e.push.apply(e,t),e}},{key:"arrayMergeUnique",value:function(e,t){return e.push.apply(e,t),this.arrayUnique(e)}},{key:"format",value:function(e,t){var a=e.getTimezoneOffset(),r={"M+":(e=new Date(e.getTime()+60*a*1e3+288e5)).getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),"S+":e.getMilliseconds()};for(var n in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),r)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,3==RegExp.$1.length?(""+r[n]).length<3?("00"+r[n]).substr(("00"+r[n]).length-3,("00"+r[n]).length):r[n]:("00"+r[n]).substr((""+r[n]).length)));return t}},{key:"objHasKay",value:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},{key:"clientTimeZone",value:function(){var e=(new Date).getTimezoneOffset(),t=parseInt(e/60),a=e%60,r="-";return(t<=0||a<0)&&(r="+",t=-t,a<0&&(a=-a)),1==(t+="").length&&(t="0"+t),1==(a+="").length&&(a="0"+a),r+t+":"+a}},{key:"objInArray",value:function(e){var t=[];return t.push(e),t}},{key:"stringSlice",value:function(e,t){return e.slice(0,t)}}]),e}(),I=new E,O={common:"{FN}:Property key invalid, nonsupport value: $lib/$lib_version/$platform/$first_visit_time/$debug/$is_login \ncurrent KEY:{KEY}",60001:"{FN}:Property key invalid, support type: String \ncurrent key:{KEY}\ncurrent keyType:{KEYTYPE}",60002:"{FN}:Property value invalid of key[{KEY}], support type: Number \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}",60003:"{FN}:Property value invalid of key[{KEY}], support type: Boolean \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}",60004:"{FN}:Property value invalid of key[{KEY}], support type: Array \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}",60005:"{FN}:The length of the property[{KEY}] value (string[{VALUE}]) needs to be 1-255 !",60006:"Please set appkey first.",60007:"Please set uploadURL first.",60008:"Send message failed.",60009:"{FN}:The length of the property key (string[{KEY}]) needs to be 1-125 !",600010:"{FN}:The length of the property key (string[{KEY}]) needs to be 1-99 !",600011:"{FN}:[{KEY}] does not conform to naming rules!",600012:"{FN}:Property key invalid, nonsupport value: $lib/$lib_version/$platform/$first_visit_time/$debug/$is_login \ncurrent KEY:{KEY}",600013:"{FN}:Property value invalid of key[{KEY}], support type: Array with String as its internal element \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}",600016:"{FN}:Property value invalid of key[{KEY}], support type: Object \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}",600017:"{FN}:The length of the property key (string[{KEY}]) needs to be 1-255 !",600018:"{FN}:Property value invalid of key[{KEY}] invalid, support type: String \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}",600019:"{FN}:The length of the property[{KEY}] value (string[{VALUE}]) needs to be 1-255 !",600020:"DebugMode only can be 0,1,2",600021:"{FN}:Property value invalid of key[{KEY}], support type: Object, Object.keys length needs to be 1-499 \ncurrent length:{VALUE}\n"},P={common:"",20001:"Send message success",20002:"{FN}: set success ({VALUE})",20003:"{FN}:({VALUE}) delete success",20004:"{FN}:clear success",20005:"{FN}:reset success",20006:"set appkey success. current appkey : {VALUE}",20007:"Init Analysys WeChat sdk success, version : {VALUE}",20008:"set uploadURL success. current uploadURL : {VALUE}",20009:"{FN}:[{KEY}] : get failed",20010:"{FN}:[{KEY}] : get success. ({VALUE})",20011:"{FN}:({VALUE}) delete failed",20012:"Send Message to Server: {KEY} \ndata:{VALUE}",20013:"收到服务器的时间: {VALUE} \n本地时间: {KEY} \n时间相差:  {FN} \n数据将会进行时间校准"};function w(e){if(1===y.base.$debug||2===y.base.$debug){var t=y.status,a=t.successCode,r=t.FnName,n=t.key,s=t.value,o=(P[a]||P.common).replace(/{FN}/,r).replace(/{KEY}/g,n).replace(/{VALUE}/g,s);if(e&&(o=e),!o)return;if("Object"===I.paramType(console)&&console.log)try{return console.log.apply(console,o)}catch(e){console.log(o)}}}function N(){var e=y.status,t=e.errorCode,a=e.FnName,r=e.key,n=JSON.stringify(e.value),s=I.paramType(e.value),o=I.paramType(r),u=(O[t]||O.common).replace(/{FN}/g,a).replace(/{KEY}/g,JSON.stringify(r)).replace(/{VALUE}/g,n).replace(/{VALUETYPE}/g,s).replace(/{KEYTYPE}/g,o);1!==y.base.$debug&&2!==y.base.$debug||console.warn(u)}var D=function(){function e(){h(this,e)}return d(e,[{key:"isString",value:function(e){return y.status.errorCode="60001","String"===I.paramType(e)}},{key:"isNumber",value:function(e){return y.status.errorCode="60002","Number"===I.paramType(e)}},{key:"isBoolean",value:function(e){return y.status.errorCode="60003","Boolean"===I.paramType(e)}},{key:"isObject",value:function(e){return"Object"===I.paramType(e)}},{key:"lengthRule",value:function(e,t,a){this.isNumber(a)||(a=1/0);var r=!0;return this.isNumber(t)&&e.length&&e.length>t&&e.length<a+1||(r=!(y.status.errorCode="60005")),r}},{key:"nimLength",value:function(e){return this.lengthRule(e,0)}},{key:"length99",value:function(e){var t=this.lengthRule(e,0,99);return t||(y.status.errorCode="600010"),t}},{key:"length125",value:function(e){var t=this.lengthRule(e,0,125);return t||(y.status.errorCode="60009"),t}},{key:"length255",value:function(e){if(!(e||this.isString(e)||this.isNumber(e)||this.isBoolean(e)))return!(y.status.errorCode="60005");"String"!==I.paramType(e)&&(e=e.toString());var t=this.lengthRule(e,0,255);return t||(y.status.errorCode="600019"),t}},{key:"keyLength255",value:function(e){var t=this.length255(e);return t||(y.status.errorCode="600017"),t}},{key:"isURL",value:function(e){var t=e;return 1==new RegExp(/http(s)?:\/\/([\w-]+\.)+[\w-]+(\/[\w- .\/?%&=]*)?/).test(t)||!(y.status.errorCode="60006")}},{key:"isDebug",value:function(e){return!(!this.isNumber(e)||0!==e&&1!==e&&2!==e)}},{key:"notObject",value:function(e){return!this.isObject(e)}},{key:"notSpecialCharacters",value:function(e){return!(new RegExp("[\\u4E00-\\u9FA5]|[\\uFE30-\\uFFA0]","gi").test(e)||!/^[$a-zA-Z][a-zA-Z0-9_$]{0,}$/.test(e))||!(y.status.errorCode="600011")}},{key:"isArrayString",value:function(e){if("Array"===I.paramType(e))for(var t=0;t<e.length;t++){if(y.status.value=e[t],"String"!==I.paramType(e[t]))return!(y.status.errorCode="600013");if(!this.length255(e[t]))return!1}return!0}},{key:"keywords",value:function(e){var t=y.keywords;return y.status.errorCode="600012",!(-1<t.indexOf(e))}}]),e}(),x=new D;function F(e,t){var a=e;function u(e,t){return e<<t|e>>>32-t}function i(e,t){var a,r,n,s,o;return n=2147483648&e,s=2147483648&t,o=(1073741823&e)+(1073741823&t),(a=1073741824&e)&(r=1073741824&t)?2147483648^o^n^s:a|r?1073741824&o?3221225472^o^n^s:1073741824^o^n^s:o^n^s}function r(e,t,a,r,n,s,o){return e=i(e,i(i(function(e,t,a){return e&t|~e&a}(t,a,r),n),o)),i(u(e,s),t)}function n(e,t,a,r,n,s,o){return e=i(e,i(i(function(e,t,a){return e&a|t&~a}(t,a,r),n),o)),i(u(e,s),t)}function s(e,t,a,r,n,s,o){return e=i(e,i(i(function(e,t,a){return e^t^a}(t,a,r),n),o)),i(u(e,s),t)}function o(e,t,a,r,n,s,o){return e=i(e,i(i(function(e,t,a){return t^(e|~a)}(t,a,r),n),o)),i(u(e,s),t)}function c(e){var t="",a="",r=void 0;for(r=0;r<=3;r++)t+=(a="0"+(e>>>8*r&255).toString(16)).substr(a.length-2,2);return t}var l=Array(),p=void 0,y=void 0,m=void 0,f=void 0,g=void 0,v=void 0,h=void 0,d=void 0,b=void 0;for(l=function(e){for(var t=void 0,a=e.length,r=a+8,n=16*(1+(r-r%64)/64),s=Array(n-1),o=0,u=0;u<a;)o=u%4*8,s[t=(u-u%4)/4]=s[t]|e.charCodeAt(u)<<o,u++;return o=u%4*8,s[t=(u-u%4)/4]=s[t]|128<<o,s[n-2]=a<<3,s[n-1]=a>>>29,s}(a),v=1732584193,h=4023233417,d=2562383102,b=271733878,p=0;p<l.length;p+=16)v=r(y=v,m=h,f=d,g=b,l[p+0],7,3614090360),b=r(b,v,h,d,l[p+1],12,3905402710),d=r(d,b,v,h,l[p+2],17,606105819),h=r(h,d,b,v,l[p+3],22,3250441966),v=r(v,h,d,b,l[p+4],7,4118548399),b=r(b,v,h,d,l[p+5],12,1200080426),d=r(d,b,v,h,l[p+6],17,2821735955),h=r(h,d,b,v,l[p+7],22,4249261313),v=r(v,h,d,b,l[p+8],7,1770035416),b=r(b,v,h,d,l[p+9],12,2336552879),d=r(d,b,v,h,l[p+10],17,4294925233),h=r(h,d,b,v,l[p+11],22,2304563134),v=r(v,h,d,b,l[p+12],7,1804603682),b=r(b,v,h,d,l[p+13],12,4254626195),d=r(d,b,v,h,l[p+14],17,2792965006),v=n(v,h=r(h,d,b,v,l[p+15],22,1236535329),d,b,l[p+1],5,4129170786),b=n(b,v,h,d,l[p+6],9,3225465664),d=n(d,b,v,h,l[p+11],14,643717713),h=n(h,d,b,v,l[p+0],20,3921069994),v=n(v,h,d,b,l[p+5],5,3593408605),b=n(b,v,h,d,l[p+10],9,38016083),d=n(d,b,v,h,l[p+15],14,3634488961),h=n(h,d,b,v,l[p+4],20,3889429448),v=n(v,h,d,b,l[p+9],5,568446438),b=n(b,v,h,d,l[p+14],9,3275163606),d=n(d,b,v,h,l[p+3],14,4107603335),h=n(h,d,b,v,l[p+8],20,1163531501),v=n(v,h,d,b,l[p+13],5,2850285829),b=n(b,v,h,d,l[p+2],9,4243563512),d=n(d,b,v,h,l[p+7],14,1735328473),v=s(v,h=n(h,d,b,v,l[p+12],20,2368359562),d,b,l[p+5],4,4294588738),b=s(b,v,h,d,l[p+8],11,2272392833),d=s(d,b,v,h,l[p+11],16,1839030562),h=s(h,d,b,v,l[p+14],23,4259657740),v=s(v,h,d,b,l[p+1],4,2763975236),b=s(b,v,h,d,l[p+4],11,1272893353),d=s(d,b,v,h,l[p+7],16,4139469664),h=s(h,d,b,v,l[p+10],23,3200236656),v=s(v,h,d,b,l[p+13],4,681279174),b=s(b,v,h,d,l[p+0],11,3936430074),d=s(d,b,v,h,l[p+3],16,3572445317),h=s(h,d,b,v,l[p+6],23,76029189),v=s(v,h,d,b,l[p+9],4,3654602809),b=s(b,v,h,d,l[p+12],11,3873151461),d=s(d,b,v,h,l[p+15],16,530742520),v=o(v,h=s(h,d,b,v,l[p+2],23,3299628645),d,b,l[p+0],6,4096336452),b=o(b,v,h,d,l[p+7],10,1126891415),d=o(d,b,v,h,l[p+14],15,2878612391),h=o(h,d,b,v,l[p+5],21,4237533241),v=o(v,h,d,b,l[p+12],6,1700485571),b=o(b,v,h,d,l[p+3],10,2399980690),d=o(d,b,v,h,l[p+10],15,4293915773),h=o(h,d,b,v,l[p+1],21,2240044497),v=o(v,h,d,b,l[p+8],6,1873313359),b=o(b,v,h,d,l[p+15],10,4264355552),d=o(d,b,v,h,l[p+6],15,2734768916),h=o(h,d,b,v,l[p+13],21,1309151649),v=o(v,h,d,b,l[p+4],6,4149444226),b=o(b,v,h,d,l[p+11],10,3174756917),d=o(d,b,v,h,l[p+2],15,718787259),h=o(h,d,b,v,l[p+9],21,3951481745),v=i(v,y),h=i(h,m),d=i(d,f),b=i(b,g);return 32==t?c(v)+c(h)+c(d)+c(b):c(h)+c(d)}var C=function(){function e(){h(this,e),this.sessionId="",this.sessionDate=""}return d(e,[{key:"setId",value:function(){var e=+new Date;return this.sessionId=F("WeChat"+e.toString()+Math.random(0,1e7)),this.sessionDate=e,L.setLocal("SEESIONID",this.sessionId),L.setLocal("SEESIONDATE",this.sessionDate),this.sessionId}},{key:"getId",value:function(){var e=new Date,t=e.getTime(),a=e.getTimezoneOffset(),r=new Date(t+60*a*1e3+288e5).getDate();this.sessionDate=L.getLocal("SEESIONDATE")||0;var n=0===this.sessionDate?0:new Date(this.sessionDate+60*a*1e3+288e5).getDate();return(""===this.sessionId||0===this.sessionDate||18e5<Number(t)-Number(this.sessionDate)||n!==r)&&this.setId(),this.sessionDate=t,L.setLocal("SEESIONDATE",t),this.sessionId=L.getLocal("SEESIONID")||this.setId(),this.sessionId}}]),e}(),j=new C,M=function(){function e(){h(this,e)}return d(e,[{key:"getId",value:function(){var e=L.getLocal("ARK_LOGINID")||L.getLocal("ARK_TRACKID")||L.getLocal("ARK_ID");return e||(e=this.setId(),L.setLocal("ARK_ID",e)),e}},{key:"setId",value:function(){var e=new String((new Date).getTime())+new String(1e4*Math.random());return"WX"+F(new String(e),32)+F(new String(e),32).slice(0,4)}},{key:"jsId",value:function(){var e=L.getLocal("ARK_ID");return e=e||this.setId()}},{key:"removeARKId",value:function(){L.removeLocal("ARK_ID")}},{key:"setLoginId",value:function(e){e&&L.setLocal("ARK_LOGINID",e)}},{key:"setLoginOId",value:function(e){e&&L.setLocal("ARK_LOGINOID",e)}},{key:"getLoginOId",value:function(){return L.getLocal("ARK_LOGINOID")}},{key:"getLoginId",value:function(){return L.getLocal("ARK_LOGINID")}},{key:"removeLoginId",value:function(){L.removeLocal("ARK_LOGINID")}},{key:"setTrackId",value:function(e){e&&L.setLocal("ARK_TRACKID",e)}},{key:"getTrackId",value:function(){return L.getLocal("ARK_TRACKID")}},{key:"removeTrackId",value:function(){L.removeLocal("ARK_TRACKID")}},{key:"getAliasId",value:function(){return L.getLocal("ARK_LOGINID")}},{key:"removeAliasId",value:function(){L.removeLocal("ARK_LOGINID")}},{key:"setIdentifyId",value:function(e){L.setLocal("ARK_TRACKID",e)}},{key:"getIdentifyId",value:function(){return L.getLocal("ARK_TRACKID")}},{key:"removeIdentifyId",value:function(){L.removeLocal("ARK_TRACK_LOGIN")}}]),e}(),U=new M,K={utm_campaign_id:"",utm_source:"",utm_medium:"",utm_term:"",utm_content:"",utm_campaign:""};function V(){K={utm_campaign_id:"",utm_source:"",utm_medium:"",utm_term:"",utm_content:"",utm_campaign:""}}var q=A.Router.getPath,Y=A.Router.getScene,G=A.Router.getPackageName,J=A.Router.getTitle,B=A.Router.getReferer,W=y.base;function z(){return W.appid}function H(){return W.$debug}function Z(){return U.getId()}function Q(e){return"/"!==W.uploadURL.charAt(W.uploadURL.length-1)&&(W.uploadURL+="/"),W.uploadURL}function X(){return y.base.allowTimeCheck&&y.base.logflag?+new Date+(L.getLocal("ANSSERVERTIME")?Number(L.getLocal("ANSSERVERTIME")):0):+new Date}function ee(){return!!(L.getLocal("ANSSERVERTIME")&&y.base.allowTimeCheck&&y.base.logflag)}function te(){return y.status.FnName}function ae(){return!(!U.getAliasId()&&!L.getLocal("ARK_TRACK_LOGIN"))}function re(){return y.system.system.screenWidth||""}function ne(){return y.system.system.screenHeight||""}function se(){return y.system.system.system?y.system.system.system.split(" ")[0]:""}function oe(){return y.system.system.brand||""}function ue(){return y.system.system.browser||""}function ie(){return y.system.system.version||""}function ce(){return y.system.system.system?y.system.system.system.split(" ")[1]:""}function le(){return y.system.system.model||""}function pe(){return y.system.system.language||""}function ye(){return y.system.netWork.networkType}function me(){return B()||Y()}var fe="GMT"+I.clientTimeZone();function ge(){return j.getId()}function ve(){var e=L.getLocal("FRISTIME");return L.setLocal("FRISTIME",!1),null==e||e}function he(){var e=new Date;y.base.allowTimeCheck&&y.base.logflag&&(e=new Date(+new Date+(L.getLocal("ANSSERVERTIME")?Number(L.getLocal("ANSSERVERTIME")):0)));var t=e.getFullYear(),a=e.getMonth()+1;a=a<10?"0"+a:a;var r=e.getDate(),n=t+""+a+(r=r<10?"0"+r:r),s=L.getLocal("FRISTDAY");return(!s||n===s)&&(L.setLocal("FRISTDAY",n),!0)}function de(){var e=I.format(new Date,"yyyy-MM-dd hh:mm:ss.SSS");return y.base.allowTimeCheck&&y.base.logflag&&(e=I.format(new Date(+new Date+(L.getLocal("ANSSERVERTIME")?Number(L.getLocal("ANSSERVERTIME")):0)),"yyyy-MM-dd hh:mm:ss.SSS")),L.getLocal("ARKFRISTPROFILE")&&(e=L.getLocal("ARKFRISTPROFILE")),e}function be(){return U.getTrackId()||U.jsId()}function Te(){return q()||""}function Se(){return W.$lib_version}var _e=L.getData("UTMSESSION")||"";function Ae(){return K.utm_campaign_id}function $e(){return K.utm_source}function ke(){return K.utm_medium}function Re(){return K.utm_term}function Le(){return K.utm_content}function Ee(){return K.utm_campaign}function Ie(){var e=parseInt(y.base.$share_level);return 0===e||e?e:""}function Oe(){return y.base.$share_path}function Pe(){return y.base.$share_id}function we(){var e=y.base.userObj,t=y.base.userPageObj;return e.currentTarget?e.currentTarget&&e.currentTarget.dataset&&e.currentTarget.dataset.content||"":t.text||""}function Ne(){var e=y.base.userObj;return e.currentTarget&&e.currentTarget.id||""}function De(){var e=y.base.userObj;return e.currentTarget&&e.currentTarget.dataset&&e.currentTarget.dataset.type||""}function xe(){var e=y.base.userObj;return e.currentTarget&&e.currentTarget.dataset&&e.currentTarget.dataset.name||""}K.utm_campaign&&K.utm_source&&K.utm_medium?(_e!==JSON.stringify(K)&&j.setId(),L.setData("UTMSESSION",JSON.stringify(K))):(V(),L.removeData("UTMSESSION"));var Fe={resetKeywords:["appid","$debug","uploadUrl"],uploadURL:{valueType:0,value:Q,check:{value:["isString","nimLength","isUrl"],errorCode:"60007",successCode:"20008"}},appid:{valueType:0,value:z,check:{value:["isString","nimLength"],errorCode:"60006",successCode:"20006"}},auto:{check:{value:["isBoolean"],errorCode:"60003"}},autoProfile:{check:{value:["isBoolean"],errorCode:"60003"}},xwho:{valueType:0,value:Z,check:{value:["isString","nimLength"]}},xwhen:{valueType:0,value:X},xwhat:{valueType:0,value:te,check:{value:["isString","nimLength"]}},xcontext:{$lib:{valueType:1,value:"WeChat"},$lib_version:{valueType:0,value:Se,check:{value:["isString"],successCode:"20007"}},$platform:{valueType:1,value:"WeChat"},$debug:{valueType:0,value:H,check:{value:["isNumber","isDebug"]}},$is_login:{valueType:0,value:ae,check:{value:["isBoolean"]}},$screen_width:{valueType:0,value:re,check:{value:["isNumber"]}},$screen_height:{valueType:0,value:ne,check:{value:["isNumber"]}},$time_zone:{valueType:1,value:fe},$os:{valueType:0,value:se,check:{value:["isString"]}},$browser:{valueType:0,value:ue},$brand:{valueType:0,value:oe,check:{value:["isString"]}},$browser_version:{valueType:0,value:ie,check:{value:["isString"]}},$os_version:{valueType:0,value:ce,check:{value:["isString"]}},$model:{valueType:0,value:le,check:{value:["isString"]}},$language:{valueType:0,value:pe,check:{value:["isString"]}},$network:{valueType:0,value:ye,check:{value:["isString"]}},$session_id:{valueType:0,value:ge},$scene:{valueType:0,value:Y},$referrer:{valueType:0,value:me},$startup_time:{valueType:0,value:de},$is_first_time:{valueType:0,value:ve},$is_first_day:{valueType:0,value:he},$first_visit_time:{valueType:0,value:de},$original_id:{valueType:0,value:be,check:{value:["isString"]}},$is_time_calibrated:{valueType:0,value:ee},$url:{valueType:0,value:Te},$utm_campaign_id:{valueType:0,value:Ae},$utm_source:{valueType:0,value:$e},$utm_medium:{valueType:0,value:ke},$utm_term:{valueType:0,value:Re},$utm_content:{valueType:0,value:Le},$utm_campaign:{valueType:0,value:Ee},$share_id:{valueType:0,value:Pe},$share_level:{valueType:0,value:Ie},$share_path:{valueType:0,value:Oe},$element_content:{valueType:0,value:we},$element_id:{valueType:0,value:Ne},$element_type:{valueType:0,value:De},$element_name:{valueType:0,value:xe}},xcontextCommonRule:{check:{key:["isString","length99","notSpecialCharacters","keywords"],value:["notObject","isArrayString","length255"]}},$track:{check:{key:["isString","notSpecialCharacters","length99"]}},$alias:{check:{key:["isString","keyLength255"]}},$profile_increment:{check:{key:["isString","length99","notSpecialCharacters"],value:["isNumber"]}},$profile_unset:{check:{key:["isString","length99","notSpecialCharacters"]}},$pageview:{check:{key:["isString","keyLength255"]}}};function Ce(e,t){for(var a=0;a<t.length;a++){if(!x[t[a]](e))return!1}return!0}function je(e,t,a){var r=a.check,n=!0;if(!r)return n;var s=r.key,o=r.value;if(s&&(n=Ce(e,s),y.status.key=e,n||(y.status.code=400,N())),o){if(y.status.code=200,t&&"Array"==I.paramType(t)){y.status.key=e;for(var u=0;u<t.length;u++)(n=Ce(t[u],["isString","length255"]))||(y.status.value=t[u],"String"!==I.paramType(t[u])&&(y.status.errorCode="600013"),500<t[u].length&&(t[u]=I.stringSlice(t[u],499)+"$"),y.status.code=400,N());return n}n=Ce(t,o),"Array"!==I.paramType(t)&&(y.status.value=t),n||(y.status.code=400,N())}return n}function Me(e,t){var a=t||Fe,r={};for(var n in e){var s=e[n],o=a[n];if(o){var u="";if("Object"===I.paramType(s)){var i=Me(s,o);r[n]=i}else I.objHasKay(o,"valueType")&&(0===o.valueType&&(u=o.value(),"String"==I.paramType(u)&&500<u.length?r[n]=I.stringSlice(u,499)+"$":r[n]=u),1===o.valueType&&(u=o.value,"String"==I.paramType(u)&&500<u.length?r[n]=I.stringSlice(u,499)+"$":r[n]=u))}}return r}function Ue(){y.status={code:200,FnName:y.status.FnName,key:"",value:"",errorCode:"",successCode:""}}function Ke(e){if(!(e=e||!1)){var t=y.base;for(var a in t){if("Object"!==I.paramType(t[a]))if("$debug"===a||"appid"===a||"uploadURL"===a)Storage.getLocal("ANS"+a.toUpperCase())!==t[a]&&(e=!0),e&&Storage.setLocal("ANS"+a.toUpperCase(),t[a])}}if(e){if(L.removeLocal("ARKSUPER"),L.removeData("STARTUP"),L.setLocal("FRISTDAY",I.format(new Date,"yyyyMMdd")),y.base.allowTimeCheck&&y.base.logflag){var r=I.format(new Date(+new Date+(L.getLocal("ANSSERVERTIME")?Number(L.getLocal("ANSSERVERTIME")):0)),"yyyyMMdd");L.setLocal("FRISTDAY",r)}L.setLocal("FRISTIME",!0),L.removeLocal("POSTDATA"),L.removeLocal("ANSSERVERTIME"),L.removeLocal("ARKFRISTPROFILE"),L.removeLocal("ARKFRISTPROFILESEND")}return e}function Ve(e,t,a,r){Ue();var n=Fe[t]||Fe.xcontextCommonRule;if("Object"!==I.paramType(e)||1==a){var s=Ce(e,n.check.key);return y.status.key=e,!(!s&&(N(),"aliasId"==r||"distinctId"==r))}for(var o in 0==Object.keys(e).length&&(y.status.errorCode=600021,y.status.value=0,N()),e){s=je(o,e[o],n);"$lib"!=o&&"$lib_version"!=o&&"$platform"!=o||(e[o]=y.base[o]),s||"600019"===y.status.errorCode&&500<e[o].length&&(e[o]=I.stringSlice(e[o],499)+"$")}return!0}for(var qe=[],Ye=e||{},Ge=0;Ge<qe.length;Ge++)Ye=I.objMerge(e,qe[Ge]);var Je={},Be={},We=Ye.base,ze=We.outer;for(Ge=0;Ge<ze.length;Ge++)We[ze[Ge]]?Be[ze[Ge]]=I.toObj(We[ze[Ge]]):Be[ze[Ge]]="";for(var He in Ye)"base"!=He&&(Je[He]=I.objMerge(Be,I.toDeepObj(Ye[He])));function Ze(e){return Je[e]||Je.commonTemp}Je.commonTemp=Be;var Qe=A.getPublicApp,Xe=A.Fetch.request,et=!0;function tt(e){if("Object"!==I.paramType(e)||I.isEmptyObject(e))return!1;for(var t=!0,a=0;a<y.baseJson.length;a++){var r=y.baseJson[a];"xwhat"!==r&&(!e[r]||"Object"==I.paramType(e[r])&&I.isEmptyObject(e[r]))&&(t=!1)}return t}function at(e){if(""===y.base.appid)return y.status.errorCode="60006",void N();if(""===y.base.uploadURL)return y.status.errorCode="60007",void N();var t=L.getLocal("POSTDATA")||[],a=[];if(0<t.length)for(var r=0;r<t.length;r++)"Array"===I.paramType(t[r])?a.push.apply(a,t[r]):"Object"===I.paramType(t[r])&&tt(t[r])&&a.push(t[r]);t.length<=500&&0<Object.keys(e).length&&a.push(e),L.setLocal("POSTDATA",a),!0===et&&rt(a)}function rt(e){Ue(),et=!1;var a=e,t={url:y.base.uploadURL+"?appid="+y.base.appid,data:e,encryptType:y.base.encryptType};Qe().AnalysysAgent.encrypt&&"Function"==I.paramType(Qe().AnalysysAgent.encrypt.uploadData)&&(t=Qe().AnalysysAgent.encrypt.uploadData(t)),y.status.key=t.url,y.status.value=JSON.stringify(e),y.status.successCode="20012",w(),wx.AnalysysModal&&wx.AnalysysModal(e),Xe({url:t.url,method:"POST",data:JSON.stringify(t.data),dataType:"json",success:function(e){if(et=!0,"String"==I.paramType(e.data)&&(Qe().AnalysysAgent.encrypt&&"Function"==I.paramType(Qe().AnalysysAgent.encrypt.decodeRes)?e.data=JSON.parse(Qe().AnalysysAgent.encrypt.decodeRes(e.data)):"H4sIAAAAAAAAAKtWSs5PSVWyMjIwqAUAVAOW6gwAAAA="==e.data?e.data={code:200}:"H4sIAAAAAAAAAKtWSs5PSVWyMjUwqAUA7TtBdwwAAAA="==e.data?e.data={code:500}:"H4sIAAAAAAAAAKtWSs5PSVWyMjEy0FHKLU5XslJySSxJVHBJTS6qLChRcC0qyi/S01OqBQBdATGSKQAAAA=="==e.data?e.data={code:420}:e.data={code:200}),200==e.data.code||500==e.data.code||420==e.data.code){var t=nt(L.getLocal("POSTDATA")||[],a);200==e.data.code?(y.status.successCode="20001",w()):(y.status.errorCode="60008",N()),L.removeLocal("POSTDATA"),0<t.length&&(L.setLocal("POSTDATA",t),rt(t))}else y.status.errorCode="60008",N()},fail:function(){et=!0,y.status.errorCode="60008",N()}})}function nt(e,t){var a=e.length,r=t.length;if(0<a)for(var n=0;n<a;n++)for(var s=0;s<r;s++)if(e[n].xwhat==t[s].xwhat&&e[n].xwhen==t[s].xwhen)return e.splice(n,1),nt(e,t),e;return e}function st(e,t){y.status.FnName="$profile_set_once",Ue();var a=I.toObj(e,t);Ve(a);var r=Me(Ze("$profile_set_once"));(r=I.delEmpty(r)).xcontext=I.objMerge(r.xcontext,a),at(r)}function ot(e,t){y.status.FnName="$pageview",Ue();var a={},r={$title:""};0<arguments.length&&("String"===I.paramType(e)?(r.$title=e,Ve(r)):"Object"===I.paramType(e)&&(Ve(e),a=e),1<arguments.length&&(Ve(t),"Object"===I.paramType(e)&&(a=t)));var n=Me(Ze("$pageview"));n=I.delEmpty(n);var s=L.getLocal("ARKSUPER")||{};0<Object.keys(s).length&&(n.xcontext=I.objMerge(n.xcontext,s));var o=y.base.appProperty;"Object"==I.paramType(o)&&(n.xcontext=I.objMerge(n.xcontext,o)),n.xcontext=I.objMerge(n.xcontext,a||{}),e&&"String"==I.paramType(e)&&(n.xcontext=I.objMerge(n.xcontext,r)),at(n)}function ut(e){var t=I.format(new Date,"yyyy-MM-dd hh:mm:ss.SSS");y.base.allowTimeCheck&&y.base.logflag&&(t=I.format(new Date(+new Date+(L.getLocal("ANSSERVERTIME")?Number(L.getLocal("ANSSERVERTIME")):0)),"yyyy-MM-dd hh:mm:ss.SSS"));var a={$first_visit_time:L.getLocal("ARKFRISTPROFILE")||t,$first_visit_language:pe()},r=y.base.autoProfile,n=y.base.auto;if("startUp"==e){if(!0===r)if(0==(L.getLocal("ARKFRISTPROFILESEND")||!1)){L.setLocal("ARKFRISTPROFILESEND",!0),y.status.FnName="$profile_set_once",Ue();var s=Me(Ze("$profile_set_once"));(s=I.delEmpty(s)).xcontext=I.objMerge(s.xcontext,a);var o=L.getLocal("POSTDATA");o=[].concat(S(o),S(I.objInArray(s))),L.setLocal("POSTDATA",o)}if(!0===n){var u=y.base.pageProperty;"Object"==I.paramType(u)?(ot(u),y.base.pageProperty=null):ot()}else at({})}else{if("alias"!=e)return;1==y.base.autoProfile&&(L.setLocal("ARKFRISTPROFILESEND",!0),st(a))}}var it=A.setPublicApp;function ct(e){var t=e;e&&"create"==e._status&&(it(e),t=e.options),t.query&&0<Object.keys(t.query).length&&(t.query.utm_campaign&&t.query.utm_medium&&t.query.utm_source&&(K.utm_campaign_id=t.query.campaign_id,K.utm_campaign=t.query.utm_campaign,K.utm_content=t.query.utm_content,K.utm_medium=t.query.utm_medium,K.utm_source=t.query.utm_source,K.utm_term=t.query.utm_term),t.query.share_id&&t.query.share_level&&t.query.share_path&&(y.base.$share_id=t.query.share_id,y.base.$share_level=t.query.share_level,y.base.$share_path=decodeURIComponent(t.query.share_path))),t.scene&&(y.system.scene=e.scene)}function lt(e){e&&ct(e);var t=L.getLocal("ARKAPPID"),a=L.getLocal("ARKDEBUG"),r=L.getLocal("ARKUPLOADURL");if(t&&"Number"==I.paramType(a)&&r&&(t!==y.base.appid||1===a&&a!==y.base.$debug||r!==y.base.uploadURL)&&(I.delFristDay(),I.delFristTime(),L.removeLocal("ARKFRISTPROFILE"),L.removeLocal("ARKFRISTPROFILESEND"),U.removeLoginId(),U.removeTrackId(),L.removeLocal("ARK_TRACK_LOGIN"),L.removeLocal("ARKSUPER"),L.removeData("STARTUP"),L.removeData("STARTUPTIME"),L.removeLocal("POSTDATA")),I.setFristDay(),I.setFristTime(),y.base.allowTimeCheck||L.removeLocal("ANSSERVERTIME"),L.setLocal("ARKDEBUG",y.base.$debug),L.setLocal("ARKAPPID",y.base.appid),L.setLocal("ARKUPLOADURL",y.base.uploadURL),!1!==L.getData("STARTUP")){for(var n=y.FnSuperCatch,s=0;s<n.length;s++)n[s][0].apply(n[s][0],n[s][1]);y.FnSuperCatch=[],y.isStartUp=!0,y.status.FnName="$startup",Ue(),j.setId(),L.setData("STARTUP",!1);var o=Me(Ze("$startup"));o=I.delEmpty(o),L.getLocal("ARKFRISTPROFILE")||L.setLocal("ARKFRISTPROFILE",I.format(new Date(o.xwhen),"yyyy-MM-dd hh:mm:ss.SSS"));var u=L.getLocal("ARKSUPER")||{};o.xcontext=I.objMerge(o.xcontext,u);var i=y.base.appProperty||{};if(o.xcontext=I.objMerge(o.xcontext,i),L.setData("STARTUPTIME",I.format(new Date(o.xwhen),"yyyy-MM-dd hh:mm:ss.SSS")),1!=y.base.autoProfile&&1!=y.base.auto)at(o);else{var c=L.getLocal("POSTDATA")||[];c=[].concat(S(c),S(I.objInArray(o))),L.setLocal("POSTDATA",c),ut("startUp")}var l=y.FnCatch;for(s=0;s<l.length;s++)l[s][0].apply(l[s][0],l[s][1]);y.FnCatch=[]}else if(1==y.base.auto){var p=y.base.pageProperty;"Object"==I.paramType(p)?(ot(p),y.base.pageProperty=null):ot()}}function pt(e,t){y.status.FnName="$registerSuperProperty",Ue();var a=I.toObj(e,t);Ve(a);var r=L.getLocal("ARKSUPER")||{},n=I.objMerge(r,a);L.setLocal("ARKSUPER",n),y.status.successCode="20002",y.status.value=JSON.stringify(a),w()}function yt(e){y.status.FnName="$unregisterSuperProperty",Ue();Ve(e);var t=L.getLocal("ARKSUPER")||{};if(!t.hasOwnProperty(e))return y.status.successCode="20011",y.status.value=e,void w();delete t[e],L.setLocal("ARKSUPER",t),y.status.successCode="20003",y.status.value=e,w()}function mt(e,t){y.status.FnName="$registerSuperProperties",Ue();var a=I.toObj(e,t);Ve(a);var r=L.getLocal("ARKSUPER")||{},n=I.objMerge(r,a);L.setLocal("ARKSUPER",n),y.status.successCode="20002",y.status.value=JSON.stringify(a),w()}function ft(e){y.status.FnName="$getSuperProperty",Ue();Ve(e,"$getSuperProperty",!0);var t=L.getLocal("ARKSUPER")||{},a=t[e];return t.hasOwnProperty(e)?(y.status.successCode="20010",y.status.value=a,y.status.key=e,w(),a):(y.status.successCode="20009",y.status.key=e,w(),"")}function gt(){y.status.FnName="$getSuperProperties",Ue();var e=L.getLocal("ARKSUPER")||{};return y.status.successCode="20010",y.status.value=JSON.stringify(e),w(),e}function vt(){y.status.FnName="$clearSuperProperties",Ue(),L.setLocal("ARKSUPER",{}),y.status.successCode="20004",w()}function ht(e){y.status.FnName="$alias",Ue();if(Ve(e,"$alias",!0,"aliasId")){L.setLocal("ARK_LOGINID",e);var t=Me(Ze("$alias"));t=I.delEmpty(t),1!=y.base.autoProfile?at(t):(L.setLocal("POSTDATA",I.objInArray(t)),ut("alias"))}}function dt(e,t){y.status.FnName=e,Ue(),Ve(e,"$track",!0),1<arguments.length&&Ve(t);var a=Me(Ze("$track")),r=L.getLocal("ARKSUPER")||{};a.xcontext=I.delEmpty(a.xcontext),0<Object.keys(r).length?(r=I.objMerge(r,t),a.xcontext=I.objMerge(a.xcontext,r)):a.xcontext=I.objMerge(a.xcontext,t),at(a)}function bt(e,t){y.status.FnName="$identify",Ue(),Ve(e,"$alias",!0,"distinctId")&&(!0===t&&L.setLocal("ARK_TRACK_LOGIN",!0),L.setLocal("ARK_TRACKID",e),y.status.successCode="20002",y.status.value=e,w(),wx.AnalysysModal&&wx.AnalysysModal([{xwhat:"$identify",xwho:e}]))}function Tt(){var e=I.format(new Date,"yyyy-MM-dd hh:mm:ss.SSS");y.base.allowTimeCheck&&y.base.logflag&&(e=+new Date+(L.getLocal("ANSSERVERTIME")?Number(L.getLocal("ANSSERVERTIME")):0)),e=I.format(new Date(e),"yyyy-MM-dd hh:mm:ss.SSS"),Ue(),U.removeARKId(),U.removeTrackId(),U.removeLoginId(),U.removeIdentifyId(),vt(),Ke(!0),j.setId(),!0===y.base.autoProfile&&st({$reset_time:e});y.status.FnName="$reset",y.status.successCode="20005",w()}function St(e,t){y.status.FnName="$profile_set",Ue();var a=I.toObj(e,t);Ve(a);var r=Me(Ze("$profile_set"));(r=I.delEmpty(r)).xcontext=I.objMerge(r.xcontext,a),at(r)}function _t(e,t){y.status.FnName="$profile_increment",Ue();var a=I.toObj(e,t);Ve(a,"$profile_increment");var r=Me(Ze("$profile_increment"));(r=I.delEmpty(r)).xcontext=I.objMerge(r.xcontext,a),at(r)}function At(e,t){y.status.FnName="$profile_append",Ue();var a=I.toObj(e,t);Ve(a);var r=Me(Ze("$profile_append"));(r=I.delEmpty(r)).xcontext=I.objMerge(r.xcontext,a),at(r)}function $t(e){y.status.FnName="$profile_unset",Ue();var t=I.toObj(e,"");Ve(t,"$profile_unset");var a=Me(Ze("$profile_unset"));(a=I.delEmpty(a)).xcontext=I.objMerge(a.xcontext,t),at(a)}function kt(){y.status.FnName="$profile_delete",Ue();var e=Me(Ze("$profile_delete"));at(e=I.delEmpty(e))}var Rt=A.Fetch.request,Lt=function(){return new Promise(function(s){if(Ue(),!y.base.allowTimeCheck)return s();var e=y.base.uploadURL;e=e.split("up")[0],Rt({url:e+"configure",method:"GET",success:function(e){s(e);var t=e.header||e.headers;if(t&&t.Date){var a=+new Date,r=t.Date,n=y.base.maxDiffTimeInterval;n<0&&(n=30),r&&n<Math.abs((new Date(r)-a)/1e3)&&(y.base.logflag||(L.setLocal("ANSSERVERTIME",new Date(r)-a),y.status.successCode="20013",y.status.value=I.format(new Date(r),"yyyy-MM-dd hh:mm:ss +SSS"),y.status.key=I.format(new Date(a),"yyyy-MM-dd hh:mm:ss +SSS"),y.status.FnName=(new Date(r)-a)/1e3+"s",w(),y.base.logflag=!0))}},fail:function(e){s(e)}})}).catch(function(e){})},Et=A.System.systemPromise,It=A.Network.netWorkPromise;function Ot(e,r){var n=U.getId(),s=A.Router.getPath();"Object"!==I.paramType(e)&&(e={path:s}),Promise.all([Et(),It(),Lt(),L.initLocalData()]).then(function(e){var t=parseInt(y.base.$share_level)?parseInt(y.base.$share_level):"",a={$share_id:n,$share_level:Number(t)+1,$share_path:s};"Object"===I.paramType(r)&&(a=I.objMerge(a,r)),dt("$share",a)});var t="share_id="+n+"&share_level="+(Number(y.base.$share_level)+1)+"&share_path="+encodeURIComponent(s);return e.path=e.path||s,-1<e.path.indexOf("?")?e.path=e.path+"&"+t:e.path=e.path+"?"+t,e}function Pt(e){if(Ue(),y.status.FnName="$appProperty","Object"!=I.paramType(e))return y.status.errorCode="600016",y.status.value=JSON.stringify(e),void N();if(Ve(e),y.base.appProperty)for(var t in e)y.base.appProperty[t]=e[t];else y.base.appProperty=e;y.status.successCode="20002",y.status.value=JSON.stringify(e),w()}function wt(){return U.getTrackId()||U.jsId()}function Nt(){y.status.FnName="getPresetProperties",Ue();var e=Me(Ze("$getPresetProperties"));return delete(e=I.delEmpty(e)).xcontext.$is_login,y.status.successCode="20010",y.status.value=JSON.stringify(e.xcontext),w(),e.xcontext}function Dt(e){if(Ue(),y.status.FnName="$pageProperty","Object"!=I.paramType(e))return y.status.errorCode="600016",y.status.value=JSON.stringify(e),void N();if(Ve(e),y.base.pageProperty)for(var t in e)y.base.pageProperty[t]=e[t];else y.base.pageProperty=e;y.status.successCode="20002",y.status.value=JSON.stringify(e),w()}var xt=A.System.systemPromise,Ft=A.Network.netWorkPromise,Ct=!0,jt=[];function Mt(a,r,n){return function(){var t=arguments;1!=Ct||0!==Object.keys(y.system.system).length&&0!==Object.keys(y.system.netWork).length?!r&&1!=y.isStartUp||1!=Ct?1==n?y.FnSuperCatch.push([a,arguments]):1==Ct&&!1===n?jt.push([a,arguments]):y.FnCatch.push([a,arguments]):a.apply(a,arguments):Promise.all([xt(),Ft(),Lt(),L.initLocalData()]).then(function(e){Ct=!0,y.system.system=e[0],y.system.netWork=e[1],0<jt.length&&(jt[0][0](jt[0][1]),jt=[]),n&&1!=y.isStartUp?y.FnSuperCatch.push([a,t]):r||1==y.isStartUp?a.apply(a,t):y.FnCatch.push([a,t])})}}var Ut=function e(){h(this,e),this.appStart=Mt(lt,!0,!1),this.startUp=Mt(lt,!0),this.pageView=Mt(ot,!1),this.registerSuperProperty=Mt(pt,!1,!0),this.unRegisterSuperProperty=Mt(yt,!1,!0),this.registerSuperProperties=Mt(mt,!1,!0),this.getSuperProperty=ft,this.getSuperProperties=gt,this.clearSuperProperties=Mt(vt,!1,!0),this.alias=Mt(ht,!0),this.track=Mt(dt,!1),this.identify=Mt(bt,!1,!0),this.reset=Tt,this.profileSet=Mt(St,!1),this.profileSetOnce=Mt(st,!1),this.profileIncrement=Mt(_t,!1),this.profileAppend=Mt(At,!1),this.profileUnset=Mt($t,!1),this.profileDelete=Mt(kt,!1),this.share=Ot,this.appProperty=Pt,this.getDistinctId=wt,this.getPresetProperties=Nt,this.pageProperty=Dt};function Kt(){var e=arguments;if(0<e.length&&e[0]&&"Object"===I.paramType(e[0])&&("tap"==e[0].type||"longtap"==e[0].type||"longpress"==e[0].type)){y.base.userObj=arguments[0],y.status.FnName="$user_click",Ue();var t=Me(Ze("$userClick"));t=I.delEmpty(t);var a=L.getLocal("ARKSUPER")||{};0<Object.keys(a).length&&(t.xcontext=I.objMerge(t.xcontext,a)),at(t),y.base.userObj={}}}function Vt(){if(0<arguments.length&&arguments[0]){y.base.userPageObj=arguments[0],y.status.FnName="$user_click",Ue();var e=Me(Ze("$userClick"));at(e=I.delEmpty(e))}}var qt=A.setPublicApp,Yt=function(){function e(){return h(this,e),T(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return b(e,Ut),d(e,[{key:"appkey",set:function(e){return Ue(),"String"!==I.paramType(e)?(y.status.FnName="appkey",y.status.errorCode="60001",y.status.key=e,void N()):""==e?(y.status.FnName="appkey",y.status.errorCode="60006",void N()):(y.status.FnName="appkey",y.status.successCode="20002",y.status.value=e,w(),y.status.successCode="20007",y.status.value=y.base.$lib_version,w(),void(y.base.appid=e))},get:function(){return y.base.appid}},{key:"debugMode",set:function(e){Ue(),y.base.$debug=e},get:function(){return y.base.$debug}},{key:"auto",set:function(e){if(Ue(),"Boolean"!==I.paramType(e))return y.status.key="auto",y.status.errorCode="60003",y.status.value=e,void N();y.base.auto=e},get:function(){return y.base.auto}},{key:"uploadURL",set:function(e){return Ue(),e?I.checkURL(e)?("/"!==e.charAt(e.length-1)&&(e+="/"),y.base.uploadURL=e+"up",y.status.successCode="20008",y.status.value=e,void w()):(y.status.errorCode="600011",y.status.key="uploadURL",y.status.value=e,void N()):(y.status.errorCode="60007",void N())},get:function(){return y.base.uploadURL}},{key:"autoProfile",set:function(e){if(Ue(),"Boolean"!==I.paramType(e))return y.status.key="autoProfile",y.status.errorCode="60003",y.status.value=e,void N();y.base.autoProfile=e},get:function(){return y.base.autoProfile}},{key:"encryptType",set:function(e){if(Ue(),"Number"!==I.paramType(e))return y.status.key="encryptType",y.status.errorCode="60002",y.status.value=e,void N();y.base.encryptType=e},get:function(){return y.base.encryptType}},{key:"autoShare",set:function(e){if(Ue(),"Boolean"!==I.paramType(e))return y.status.key="autoShare",y.status.errorCode="60003",y.status.value=e,void N();y.base.autoShare=e},get:function(){return y.base.autoShare}},{key:"allowTimeCheck",set:function(e){if(Ue(),"Boolean"!==I.paramType(e))return y.status.key="allowTimeCheck",y.status.errorCode="60003",y.status.value=e,void N();y.base.allowTimeCheck=e},get:function(){return y.base.allowTimeCheck}},{key:"maxDiffTimeInterval",set:function(e){if(Ue(),"Number"!==I.paramType(e))return y.status.key="maxDiffTimeInterval",y.status.errorCode="60002",y.status.value=e,void N();y.base.maxDiffTimeInterval=e},get:function(){return y.base.maxDiffTimeInterval}},{key:"autoTrack",set:function(e){if(Ue(),"Boolean"!==I.paramType(e))return y.status.key="autoTrack",y.status.errorCode="60003",y.status.value=e,void N();y.base.autoTrack=e},get:function(){return y.base.autoTrack}},{key:"autoCompleteURL",set:function(e){if(Ue(),"Boolean"!==I.paramType(e))return y.status.key="autoCompleteURL",y.status.errorCode="60003",y.status.value=e,void N();y.base.autoCompleteURL=e},get:function(){return y.base.autoCompleteURL}}]),e}();function Gt(e,a,r){if(e[a]){var n=e[a];e[a]="onShareAppMessage"===a?function(e){return r(n.call(this,e))}:function(e){var t=n.apply(this,arguments);return r(e,a),t}}else"onShareAppMessage"!==a&&(e[a]=function(e){r(e)})}var Jt=new Yt;wx.AnalysysAgent=Jt;var Bt=App;App=function(e){Gt(e,"onShow",function(e){var t=e;e&&"create"==e._status&&(qt(e),t=e.options),t.query&&0<Object.keys(t.query).length&&(t.query.utm_campaign&&t.query.utm_medium&&t.query.utm_source&&(K.utm_campaign_id=t.query.campaign_id,K.utm_campaign=t.query.utm_campaign,K.utm_content=t.query.utm_content,K.utm_medium=t.query.utm_medium,K.utm_source=t.query.utm_source,K.utm_term=t.query.utm_term),t.query.share_id&&t.query.share_level&&t.query.share_path&&(y.base.$share_id=t.query.share_id,y.base.$share_level=t.query.share_level,y.base.$share_path=decodeURIComponent(t.query.share_path))),t.scene&&(y.system.scene=e.scene)}),Bt(e)};var Wt=["data","onLoad","onShow","onReady","onPullDownRefresh","onReachBottom","onShareAppMessage","onPageScroll","onResize","onTabItemTap","onHide","onUnload"];function zt(e){if(Gt(e,"onShow",Jt.startUp),1==y.base.autoShare&&Gt(e,"onShareAppMessage",Jt.share),1==y.base.autoTrack)for(var t in e)"Function"==I.paramType(e[t])&&Wt.indexOf(t)<0&&Gt(e,t,Kt),"Function"==I.paramType(e[t])&&"onTabItemTap"==t&&Gt(e,t,Vt)}var Ht=Page;Page=function(e){zt(e),Ht(e)};var Zt=Component;Component=function(e){e.methods&&zt(e.methods),Zt(e)},module.exports=Jt;
