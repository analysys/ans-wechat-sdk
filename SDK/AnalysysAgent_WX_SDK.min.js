"use strict";var e={base:{outer:["appid","xwho","xwhat","xwhen","xcontext"],xcontext:["$lib","$appid","$appname","$lib_version","$platform","$debug","$is_login"]},$startup:{xcontext:["$brand","$model","$os","$os_version","$browser","$browser_version","$network","$screen_width","$screen_height","$utm_campaign_id","$utm_campaign","$utm_medium","$utm_source","$utm_content","$utm_term","$is_first_day","$time_zone","$language","$session_id","$is_time_calibrated","$is_first_time","$scene"]},$track:{xcontext:["$brand","$model","$os","$os_version","$browser","$browser_version","$network","$screen_width","$screen_height","$utm_campaign_id","$utm_campaign","$utm_medium","$utm_source","$utm_content","$utm_term","$is_first_day","$time_zone","$language","$session_id","$is_time_calibrated"]},$pageview:{xcontext:["$brand","$model","$os","$os_version","$browser","$browser_version","$network","$screen_width","$screen_height","$utm_campaign_id","$utm_campaign","$utm_medium","$utm_source","$utm_content","$utm_term","$is_first_day","$time_zone","$language","$session_id","$is_time_calibrated","$referrer","$scene","$startup_time","$url","$share_id","$share_path","$share_level"]},$alias:{xcontext:["$original_id"]},$getPresetProperties:{xcontext:["$time_zone","$language","$screen_width","$screen_height","$network","$first_visit_time","$brand","$model","$os","$session_id"]},$userClick:{xcontext:["$element_content","$element_id","$element_type","$element_name","$element_function","$url","$url_path","$is_first_day","$session_id","$is_time_calibrated"]}},i={base:{appid:"",$debug:0,$lib_version:"4.3.11.2",$lib:"WeChat",uploadURL:"",auto:!0,autoProfile:!0,encryptType:0,autoShare:!1,$share_level:"",$share_path:"",$share_id:"",appProperty:null,allowTimeCheck:!1,maxDiffTimeInterval:30,logflag:!1,userObj:{},userPageObj:{},autoTrack:!1,pageProperty:null,autoCompleteURL:!0},status:{code:200,FnName:"",key:"",value:"",errorCode:"",successCode:""},system:{system:{},netWork:{},scene:null},isStartUp:!1,FnCatch:[],FnSuperCatch:[],keywords:e.base.xcontext,baseJson:e.base.outer,sendNum:1800};function r(e){wx.request(e)}var n=Object.freeze({__proto__:null,request:r}),m=function(r){return new Promise(function(t,a){try{var e=wx.getStorageSync(r);t(e||{})}catch(e){wx.getStorage({key:r,success:function(e){t(e.data)},fail:function(e){a(e)}})}}).catch(function(e){})},g=function(n,e){return new Promise(function(t,a){var r=e;try{wx.setStorageSync(n,r),t(200)}catch(e){wx.setStorage({key:n,data:r,success:function(){t(200)},fail:function(){a(400)}})}}).catch(function(e){})},f=Object.freeze({__proto__:null,getStoragePromise:m,setStoragePromise:g});function h(){return new Promise(function(t,a){wx.getSystemInfo({success:function(e){t(e)},fail:function(e){a(e)}})}).catch(function(e){})}var v=Object.freeze({__proto__:null,systemPromise:h});function d(){return new Promise(function(t,a){wx.getNetworkType({success:function(e){t(e)},fail:function(e){a(e)}})}).catch(function(e){})}var b=Object.freeze({__proto__:null,netWorkPromise:d});function T(){return i.system.scene?i.system.scene.toString():""}function S(){return""}function _(){var e=getCurrentPages();if(0<e.length){var t=e[e.length-1].__route__,a=e[e.length-1].options;if(0<Object.keys(a).length&&1==i.base.autoCompleteURL){var r,n=t+"?";for(r in a)n+=r+"="+a[r]+"&";return n=n.substring(0,n.length-1)}return t}}function A(){var e=getCurrentPages();if(0<e.length)return e[e.length-1].route}function $(){return""}function k(){var e=getCurrentPages();return 1<e.length&&e[e.length-2]?e[e.length-2].__route__:T()}var R=Object.freeze({__proto__:null,getScene:T,getPackageName:S,getPath:_,getPurePath:A,getTitle:$,getReferer:k}),L=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},E=function(){function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,a){return t&&r(e.prototype,t),a&&r(e,a),e}}(),I=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},O=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},P=function(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)},w=function e(){var t=this;L(this,e),this.AppObj=wx,this.Fetch=n,this.Storage=f,this.System=v,this.Network=b,this.Router=R,this.setPublicApp=function(e){t.AppObj=e},this.getPublicApp=function(){return t.AppObj}},s=new w,N=s.Storage.getStoragePromise,D=s.Storage.setStoragePromise,x=function(){function e(){L(this,e),this.local={},this.Session={},this.localStatus=!1,this.getStoragePromise=s.Storage.getStoragePromise}return E(e,[{key:"initLocalData",value:function(){var e=this;return N("FZ_STROAGE").then(function(t){if(!e.localStatus){if(e.localStatus=!0,"string"==typeof(t=t||{}))try{t=JSON.parse(t)}catch(e){t={}}e.local=Object.assign(t,e.local),D("FZ_STROAGE",e.local).then(function(){},function(e){}).catch(function(e){})}},function(){e.local={}}).catch(function(e){})}},{key:"setData",value:function(e,t){this.Session[e]=t}},{key:"getData",value:function(e){return void 0===this.Session[e]?"":this.Session[e]}},{key:"removeData",value:function(e){void 0!==this.Session[e]&&delete this.Session[e]}},{key:"clearData",value:function(){this.Session={}}},{key:"setLocal",value:function(e,t){this.local[e]=t;e=this.local;D("FZ_STROAGE",e).then(function(){},function(e){}).catch(function(e){})}},{key:"getLocal",value:function(e){return this.local[e]}},{key:"removeLocal",value:function(e){void 0!==this.local[e]&&(delete this.local[e],e=this.local,D("FZ_STROAGE",e).then(function(){},function(){}).catch(function(e){}))}}]),e}(),c=new x,F=function(){function e(){L(this,e)}return E(e,[{key:"paramType",value:function(e){return Object.prototype.toString.call(e).replace("[object ","").replace("]","")}},{key:"delEmpty",value:function(e){var a=this,r=this.deepClone(e);return"Object"!==this.paramType(r)?{}:(Object.keys(r).forEach(function(e){var t=r[e];"Object"===a.paramType(t)&&(r[e]=a.delEmpty(r[e]),0===Object.keys(r[e]).length&&delete r[e]),""===t&&delete r[e]}),r)}},{key:"deepClone",value:function(e){var t=Object.getPrototypeOf(e);return Object.assign({},Object.create(t),e)}},{key:"mergeMsg",value:function(e,t){Object.assign(t,e)}},{key:"checkObj",value:function(e,t){var a={};if(1!==arguments.length||e.constructor!==Array)return 1===arguments.length&&e.constructor===String?a[e]=t||"":1<arguments.length&&e.constructor!==Object?a[e]=t:a=e,a;for(var r=0;r<e.length;r++)a[e[r]]="";return a}},{key:"isFristDay",value:function(){var e=new Date,t=e.getFullYear(),a=(a=e.getMonth()+1)<10?"0"+a:a,e=e.getDate(),t=t+""+a+(e=e<10?"0"+e:e),a=c.getLocal("FRISTDAY");return(!a||t===a)&&(a||c.setLocal("FRISTDAY",t),!0)}},{key:"isFristTime",value:function(){var e=!1!==c.getLocal("FRISTIME");return e&&c.setLocal("FRISTIME",!1),e}},{key:"isEmptyObject",value:function(e){return!(0<Object.keys(e).length)}},{key:"setFristDay",value:function(){var e;"String"!==this.paramType(c.getLocal("FRISTDAY"))&&(e=this.format(new Date,"yyyyMMdd"),i.base.allowTimeCheck&&i.base.logflag&&(e=this.format(new Date(+new Date+(c.getLocal("ANSSERVERTIME")?Number(c.getLocal("ANSSERVERTIME")):0)),"yyyyMMdd")),c.setLocal("FRISTDAY",e))}},{key:"setFristTime",value:function(){"Boolean"!==this.paramType(c.getLocal("FRISTIME"))&&c.setLocal("FRISTIME",!0)}},{key:"delFristDay",value:function(){c.removeLocal("FRISTDAY")}},{key:"delFristTime",value:function(){c.removeLocal("FRISTIME")}},{key:"checkURL",value:function(e){return 1==new RegExp(/http(s)?:\/\/([\w-]+\.)+[\w-]+(\/[\w- .\/?%&=]*)?/).test(e)}},{key:"firstVisitTime",value:function(){var e=!1!==c.getLocal("FIRSTVISITTIME");return e&&c.setLocal("FIRSTVISITTIME",!1),e}},{key:"toDeepObj",value:function(e,t,a){var r={};if("String"===this.paramType(e))return r=this.keyValueToObje(e,t);if("Array"===this.paramType(e))return r=this.ArrayToObj(e);if("Object"===this.paramType(e))for(var n in e)r[n]=this.toDeepObj(e[n]);return r}},{key:"ArrayToObj",value:function(e){for(var t={},a=0;a<e.length;a++)t[e[a]]="";return t}},{key:"keyValueToObje",value:function(e,t){var a={};return a[e]=t,a}},{key:"toObj",value:function(e,t,a){var r={};return"String"===this.paramType(e)?this.keyValueToObje(e,t):"Array"===this.paramType(e)?this.ArrayToObj(e):"Object"===this.paramType(e)?e:r}},{key:"objMerge",value:function(e,t){if("Object"!==this.paramType(e)||"Object"!==this.paramType(t))return e;var a,r={};for(a in e)r[a]=e[a];for(a in t)r[a]&&"Object"===this.paramType(r[a])&&"Object"===this.paramType(t[a])?r[a]=this.objMerge(r[a],t[a]):"Array"===this.paramType(r[a])&&"Array"===this.paramType(t[a])?r[a]=this.arrayMergeUnique(r[a],t[a]):r[a]=t[a];return r}},{key:"arrayUnique",value:function(e){for(var t=[],a={},r=0;r<e.length;r++)a[e[r]]||(a[e[r]]=!0,t.push(e[r]));return t}},{key:"arrayMerge",value:function(e,t){return e.push.apply(e,t),e}},{key:"arrayMergeUnique",value:function(e,t){return e.push.apply(e,t),this.arrayUnique(e)}},{key:"format",value:function(e,t){var a,r=e.getTimezoneOffset(),n={"M+":(e=new Date(e.getTime()+60*r*1e3+288e5)).getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),"S+":e.getMilliseconds()};for(a in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,3==RegExp.$1.length?(""+n[a]).length<3?("00"+n[a]).substr(("00"+n[a]).length-3,("00"+n[a]).length):n[a]:("00"+n[a]).substr((""+n[a]).length)));return t}},{key:"objHasKay",value:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},{key:"clientTimeZone",value:function(){var e=(new Date).getTimezoneOffset(),t=parseInt(e/60),e=e%60,a="-";return(t<=0||e<0)&&(a="+",t=-t,e<0&&(e=-e)),a+(t=1==(t+="").length?"0"+t:t)+":"+(e=1==(e+="").length?"0"+e:e)}},{key:"objInArray",value:function(e){var t=[];return t.push(e),t}},{key:"stringSlice",value:function(e,t){return e.slice(0,t)}}]),e}(),l=new F,j={common:"{FN}:Property key invalid, nonsupport value: $lib/$lib_version/$platform/$first_visit_time/$debug/$is_login \ncurrent KEY:{KEY}",60001:"{FN}:Property key invalid, support type: String \ncurrent key:{KEY}\ncurrent keyType:{KEYTYPE}",60002:"{FN}:Property value invalid of key[{KEY}], support type: Number \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}",60003:"{FN}:Property value invalid of key[{KEY}], support type: Boolean \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}",60004:"{FN}:Property value invalid of key[{KEY}], support type: Array \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}",60005:"{FN}:The length of the property[{KEY}] value (string[{VALUE}]) needs to be 1-255 !",60006:"Please set appkey first.",60007:"Please set uploadURL first.",60008:"Send message failed.",60009:"{FN}:The length of the property key (string[{KEY}]) needs to be 1-125 !",600010:"{FN}:The length of the property key (string[{KEY}]) needs to be 1-99 !",600011:"{FN}:[{KEY}] does not conform to naming rules!",600012:"{FN}:Property key invalid, nonsupport value: $lib/$lib_version/$platform/$first_visit_time/$debug/$is_login \ncurrent KEY:{KEY}",600013:"{FN}:Property value invalid of key[{KEY}], support type: Array with String as its internal element \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}",600016:"{FN}:Property value invalid of key[{KEY}], support type: Object \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}",600017:"{FN}:The length of the property key (string[{KEY}]) needs to be 1-255 !",600018:"{FN}:Property value invalid of key[{KEY}] invalid, support type: String \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}",600019:"{FN}:The length of the property[{KEY}] value (string[{VALUE}]) needs to be 1-255 !",600020:"DebugMode only can be 0,1,2",600021:"{FN}:Property value invalid of key[{KEY}], support type: Object, Object.keys length needs to be 1-499 \ncurrent length:{VALUE}\n"},C={common:"",20001:"Send message success",20002:"{FN}: set success ({VALUE})",20003:"{FN}:({VALUE}) delete success",20004:"{FN}:clear success",20005:"{FN}:reset success",20006:"set appkey success. current appkey : {VALUE}",20007:"Init Analysys "+i.base.$lib+" sdk success, version : {VALUE}",20008:"set uploadURL success. current uploadURL : {VALUE}",20009:"{FN}:[{KEY}] : get failed",20010:"{FN}:[{KEY}] : get success. ({VALUE})",20011:"{FN}:({VALUE}) delete failed",20012:"Send Message to Server: {KEY} \ndata:{VALUE}",20013:"收到服务器的时间: {VALUE} \n本地时间: {KEY} \n时间相差:  {FN} \n数据将会进行时间校准",20014:"aliasID already bound"};function u(e){if(1===i.base.$debug||2===i.base.$debug){var t=i.status,a=t.successCode,r=t.FnName,n=t.key,t=t.value,a=(C[a]||C.common).replace(/{FN}/,r).replace(/{KEY}/g,n).replace(/{VALUE}/g,t);if((a=e?e:a)&&("Object"===l.paramType(console)&&console.log))try{return console.log.apply(console,a)}catch(e){console.log(a)}}}function p(){var e=i.status,t=e.errorCode,a=e.FnName,r=e.key,n=JSON.stringify(e.value),e=l.paramType(e.value),s=l.paramType(r),t=(j[t]||j.common).replace(/{FN}/g,a).replace(/{KEY}/g,JSON.stringify(r)).replace(/{VALUE}/g,n).replace(/{VALUETYPE}/g,e).replace(/{KEYTYPE}/g,s);1!==i.base.$debug&&2!==i.base.$debug||console.warn(t)}var U=function(){function e(){L(this,e)}return E(e,[{key:"isString",value:function(e){return i.status.errorCode="60001","String"===l.paramType(e)}},{key:"isNumber",value:function(e){return i.status.errorCode="60002","Number"===l.paramType(e)}},{key:"isBoolean",value:function(e){return i.status.errorCode="60003","Boolean"===l.paramType(e)}},{key:"isObject",value:function(e){return"Object"===l.paramType(e)}},{key:"lengthRule",value:function(e,t,a){this.isNumber(a)||(a=1/0);var r=!0;return r=this.isNumber(t)&&e.length&&e.length>t&&e.length<a+1?r:!(i.status.errorCode="60005")}},{key:"nimLength",value:function(e){return this.lengthRule(e,0)}},{key:"length99",value:function(e){e=this.lengthRule(e,0,99);return e||(i.status.errorCode="600010"),e}},{key:"length125",value:function(e){e=this.lengthRule(e,0,125);return e||(i.status.errorCode="60009"),e}},{key:"length255",value:function(e){if(!(e||this.isString(e)||this.isNumber(e)||this.isBoolean(e)))return!(i.status.errorCode="60005");"String"!==l.paramType(e)&&(e=e.toString());e=this.lengthRule(e,0,255);return e||(i.status.errorCode="600019"),e}},{key:"keyLength255",value:function(e){e=this.length255(e);return e||(i.status.errorCode="600017"),e}},{key:"isURL",value:function(e){return 1==new RegExp(/http(s)?:\/\/([\w-]+\.)+[\w-]+(\/[\w- .\/?%&=]*)?/).test(e)||!(i.status.errorCode="60006")}},{key:"isDebug",value:function(e){return!(!this.isNumber(e)||0!==e&&1!==e&&2!==e)}},{key:"notObject",value:function(e){return!this.isObject(e)}},{key:"notSpecialCharacters",value:function(e){return!(new RegExp("[\\u4E00-\\u9FA5]|[\\uFE30-\\uFFA0]","gi").test(e)||!/^[$a-zA-Z][a-zA-Z0-9_$]{0,}$/.test(e))||!(i.status.errorCode="600011")}},{key:"isArrayString",value:function(e){if("Array"===l.paramType(e))for(var t=0;t<e.length;t++){if(i.status.value=e[t],"String"!==l.paramType(e[t]))return!(i.status.errorCode="600013");if(!this.length255(e[t]))return!1}return!0}},{key:"keywords",value:function(e){var t=i.keywords;return i.status.errorCode="600012",!(-1<t.indexOf(e))}}]),e}(),M=new U;function K(l,p){function y(e,t){return e<<t|e>>>32-t}function u(e,t){var a=2147483648&e,r=2147483648&t,n=(1073741823&e)+(1073741823&t);return(e=1073741824&e)&(t=1073741824&t)?2147483648^n^a^r:e|t?1073741824&n?3221225472^n^a^r:1073741824^n^a^r:n^a^r}function e(e,t,a,r,n,s,o){return e=u(e,u(u(t&a|~t&r,n),o)),u(y(e,s),t)}function t(e,t,a,r,n,s,o){return e=u(e,u(u(t&r|a&~r,n),o)),u(y(e,s),t)}function a(e,t,a,r,n,s,o){return e=u(e,u(u(t^a^r,n),o)),u(y(e,s),t)}function m(e,t,a,r,n,s,o){return e=u(e,u(u(a^(t|~r),n),o)),u(y(e,s),t)}function g(e){for(var t="",a="",r=void 0,r=0;r<=3;r++)t+=(a="0"+(e>>>8*r&255).toString(16)).substr(a.length-2,2);return t}Array();for(var f,h,v,d,r=void 0,n=void 0,s=void 0,o=void 0,i=void 0,c=function(e){for(var t=void 0,a=e.length,r=16*(1+((r=a+8)-r%64)/64),n=Array(r-1),s=0,o=0;o<a;)s=o%4*8,n[t=(o-o%4)/4]=n[t]|e.charCodeAt(o)<<s,o++;return n[t=(o-o%4)/4]=n[t]|128<<(s=o%4*8),n[r-2]=a<<3,n[r-1]=a>>>29,n}(l),n=1732584193,s=4023233417,o=2562383102,i=271733878,r=0;r<c.length;r+=16)n=e(f=n,h=s,v=o,d=i,c[r+0],7,3614090360),i=e(i,n,s,o,c[r+1],12,3905402710),o=e(o,i,n,s,c[r+2],17,606105819),s=e(s,o,i,n,c[r+3],22,3250441966),n=e(n,s,o,i,c[r+4],7,4118548399),i=e(i,n,s,o,c[r+5],12,1200080426),o=e(o,i,n,s,c[r+6],17,2821735955),s=e(s,o,i,n,c[r+7],22,4249261313),n=e(n,s,o,i,c[r+8],7,1770035416),i=e(i,n,s,o,c[r+9],12,2336552879),o=e(o,i,n,s,c[r+10],17,4294925233),s=e(s,o,i,n,c[r+11],22,2304563134),n=e(n,s,o,i,c[r+12],7,1804603682),i=e(i,n,s,o,c[r+13],12,4254626195),o=e(o,i,n,s,c[r+14],17,2792965006),n=t(n,s=e(s,o,i,n,c[r+15],22,1236535329),o,i,c[r+1],5,4129170786),i=t(i,n,s,o,c[r+6],9,3225465664),o=t(o,i,n,s,c[r+11],14,643717713),s=t(s,o,i,n,c[r+0],20,3921069994),n=t(n,s,o,i,c[r+5],5,3593408605),i=t(i,n,s,o,c[r+10],9,38016083),o=t(o,i,n,s,c[r+15],14,3634488961),s=t(s,o,i,n,c[r+4],20,3889429448),n=t(n,s,o,i,c[r+9],5,568446438),i=t(i,n,s,o,c[r+14],9,3275163606),o=t(o,i,n,s,c[r+3],14,4107603335),s=t(s,o,i,n,c[r+8],20,1163531501),n=t(n,s,o,i,c[r+13],5,2850285829),i=t(i,n,s,o,c[r+2],9,4243563512),o=t(o,i,n,s,c[r+7],14,1735328473),n=a(n,s=t(s,o,i,n,c[r+12],20,2368359562),o,i,c[r+5],4,4294588738),i=a(i,n,s,o,c[r+8],11,2272392833),o=a(o,i,n,s,c[r+11],16,1839030562),s=a(s,o,i,n,c[r+14],23,4259657740),n=a(n,s,o,i,c[r+1],4,2763975236),i=a(i,n,s,o,c[r+4],11,1272893353),o=a(o,i,n,s,c[r+7],16,4139469664),s=a(s,o,i,n,c[r+10],23,3200236656),n=a(n,s,o,i,c[r+13],4,681279174),i=a(i,n,s,o,c[r+0],11,3936430074),o=a(o,i,n,s,c[r+3],16,3572445317),s=a(s,o,i,n,c[r+6],23,76029189),n=a(n,s,o,i,c[r+9],4,3654602809),i=a(i,n,s,o,c[r+12],11,3873151461),o=a(o,i,n,s,c[r+15],16,530742520),n=m(n,s=a(s,o,i,n,c[r+2],23,3299628645),o,i,c[r+0],6,4096336452),i=m(i,n,s,o,c[r+7],10,1126891415),o=m(o,i,n,s,c[r+14],15,2878612391),s=m(s,o,i,n,c[r+5],21,4237533241),n=m(n,s,o,i,c[r+12],6,1700485571),i=m(i,n,s,o,c[r+3],10,2399980690),o=m(o,i,n,s,c[r+10],15,4293915773),s=m(s,o,i,n,c[r+1],21,2240044497),n=m(n,s,o,i,c[r+8],6,1873313359),i=m(i,n,s,o,c[r+15],10,4264355552),o=m(o,i,n,s,c[r+6],15,2734768916),s=m(s,o,i,n,c[r+13],21,1309151649),n=m(n,s,o,i,c[r+4],6,4149444226),i=m(i,n,s,o,c[r+11],10,3174756917),o=m(o,i,n,s,c[r+2],15,718787259),s=m(s,o,i,n,c[r+9],21,3951481745),n=u(n,f),s=u(s,h),o=u(o,v),i=u(i,d);return 32==p?g(n)+g(s)+g(o)+g(i):g(s)+g(o)}var V=function(){function e(){L(this,e),this.sessionId="",this.sessionDate=""}return E(e,[{key:"setId",value:function(){var e=+new Date;return this.sessionId=K("WeChat"+e.toString()+Math.random(0,1e7)),this.sessionDate=e,c.setLocal("SEESIONID",this.sessionId),c.setLocal("SEESIONDATE",this.sessionDate),this.sessionId}},{key:"getId",value:function(){var e=new Date,t=e.getTime(),e=e.getTimezoneOffset(),a=new Date(t+60*e*1e3+288e5).getDate(),e=(this.sessionDate=c.getLocal("SEESIONDATE")||0,0===this.sessionDate?0:new Date(this.sessionDate+60*e*1e3+288e5).getDate());return(""===this.sessionId||0===this.sessionDate||18e5<Number(t)-Number(this.sessionDate)||e!==a)&&this.setId(),this.sessionDate=t,c.setLocal("SEESIONDATE",t),this.sessionId=c.getLocal("SEESIONID")||this.setId(),this.sessionId}}]),e}(),Y=new V,q=function(){function e(){L(this,e)}return E(e,[{key:"getId",value:function(){var e=c.getLocal("ARK_LOGINID")||c.getLocal("ARK_TRACKID")||c.getLocal("ARK_ID");return e||(e=this.setId(),c.setLocal("ARK_ID",e)),e}},{key:"setId",value:function(){var e=new String((new Date).getTime())+new String(1e4*Math.random());return"WX"+K(new String(e),32)+K(new String(e),32).slice(0,4)}},{key:"jsId",value:function(){return c.getLocal("ARK_ID")||this.setId()}},{key:"removeARKId",value:function(){c.removeLocal("ARK_ID")}},{key:"setLoginId",value:function(e){e&&c.setLocal("ARK_LOGINID",e)}},{key:"setLoginOId",value:function(e){e&&c.setLocal("ARK_LOGINOID",e)}},{key:"getLoginOId",value:function(){return c.getLocal("ARK_LOGINOID")}},{key:"getLoginId",value:function(){return c.getLocal("ARK_LOGINID")}},{key:"removeLoginId",value:function(){c.removeLocal("ARK_LOGINID")}},{key:"setTrackId",value:function(e){e&&c.setLocal("ARK_TRACKID",e)}},{key:"getTrackId",value:function(){return c.getLocal("ARK_TRACKID")}},{key:"removeTrackId",value:function(){c.removeLocal("ARK_TRACKID")}},{key:"getAliasId",value:function(){return c.getLocal("ARK_LOGINID")}},{key:"removeAliasId",value:function(){c.removeLocal("ARK_LOGINID")}},{key:"setIdentifyId",value:function(e){c.setLocal("ARK_TRACKID",e)}},{key:"getIdentifyId",value:function(){return c.getLocal("ARK_TRACKID")}},{key:"removeIdentifyId",value:function(){c.removeLocal("ARK_TRACK_LOGIN")}}]),e}(),G=new q,a={utm_campaign_id:"",utm_source:"",utm_medium:"",utm_term:"",utm_content:"",utm_campaign:""};function J(){a={utm_campaign_id:"",utm_source:"",utm_medium:"",utm_term:"",utm_content:"",utm_campaign:""}}var B=s.Router.getPath,W=s.Router.getPurePath,z=s.Router.getScene,H=s.Router.getPackageName,Z=s.Router.getTitle,Q=s.Router.getReferer,X=i.base;function ee(){return X.appid}function te(){return X.$appname}function ae(){return X.$appid}function re(){return X.$debug}function ne(){return G.getId()}function se(e){return"/"!==X.uploadURL.charAt(X.uploadURL.length-1)&&(X.uploadURL+="/"),X.uploadURL}function oe(){return i.base.allowTimeCheck&&i.base.logflag?+new Date+(c.getLocal("ANSSERVERTIME")?Number(c.getLocal("ANSSERVERTIME")):0):+new Date}function ue(){return!!(c.getLocal("ANSSERVERTIME")&&i.base.allowTimeCheck&&i.base.logflag)}function ie(){return i.status.FnName}function ce(){return!(!G.getAliasId()&&!c.getLocal("ARK_TRACK_LOGIN"))}function le(){return i.system.system.screenWidth||""}function pe(){return i.system.system.screenHeight||""}function ye(){return i.system.system.system?i.system.system.system.split(" ")[0]:""}function me(){return i.system.system.brand||""}function ge(){return i.system.system.browser||""}function fe(){return i.system.system.version||""}function he(){return i.system.system.system?i.system.system.system.split(" ")[1]:""}function ve(){return i.system.system.model||""}function de(){return i.system.system.language||""}function be(){return i.system.netWork.networkType||""}function Te(){return Q()||z()}var Se="GMT"+l.clientTimeZone();function _e(){return Y.getId()}function Ae(){var e=c.getLocal("FRISTIME");return c.setLocal("FRISTIME",!1),null==e||e}function $e(){var e=new Date,t=(e=i.base.allowTimeCheck&&i.base.logflag?new Date(+new Date+(c.getLocal("ANSSERVERTIME")?Number(c.getLocal("ANSSERVERTIME")):0)):e).getFullYear(),a=(a=e.getMonth()+1)<10?"0"+a:a,e=e.getDate(),t=t+""+a+(e=e<10?"0"+e:e),a=c.getLocal("FRISTDAY");return(!a||t===a)&&(c.setLocal("FRISTDAY",t),!0)}function ke(){var e=l.format(new Date,"yyyy-MM-dd hh:mm:ss.SSS");return i.base.allowTimeCheck&&i.base.logflag&&(e=l.format(new Date(+new Date+(c.getLocal("ANSSERVERTIME")?Number(c.getLocal("ANSSERVERTIME")):0)),"yyyy-MM-dd hh:mm:ss.SSS")),e=c.getLocal("ARKFRISTPROFILE")?c.getLocal("ARKFRISTPROFILE"):e}function Re(){return G.getTrackId()||G.jsId()}function Le(){return B()||""}function Ee(){return W()||""}function Ie(){return X.$lib_version}var Oe=c.getData("UTMSESSION")||"";function Pe(){return a.utm_campaign_id||""}function we(){return a.utm_source||""}function Ne(){return a.utm_medium||""}function De(){return a.utm_term||""}function xe(){return a.utm_content||""}function Fe(){return a.utm_campaign||""}function je(){var e=parseInt(i.base.$share_level);return 0===e||e?e:""}function Ce(){return i.base.$share_path}function Ue(){return i.base.$share_id}function Me(e){return"Object"===l.paramType(e)?JSON.stringify(e):"Undefined"===l.paramType(e)||"Null"===l.paramType(e)?"":e.toString()}function Ke(){var e=i.base.userObj,t=i.base.userPageObj;return e.currentTarget?e.currentTarget.dataset&&Me(e.currentTarget.dataset.content):Me(t.text)}function Ve(){var e=i.base.userObj;return e.currentTarget&&Me(e.currentTarget.id)}function Ye(){var e=i.base.userObj;return e.currentTarget&&e.currentTarget.dataset&&Me(e.currentTarget.dataset.type)}function qe(){var e=i.base.userObj,t=e.currentTarget&&e.currentTarget.dataset&&Me(e.currentTarget.dataset.function);return e.element_function||t}function Ge(){var e=i.base.userObj;return e.currentTarget&&e.currentTarget.dataset&&Me(e.currentTarget.dataset.name)}a.utm_campaign&&a.utm_source&&a.utm_medium?(Oe!==JSON.stringify(a)&&Y.setId(),c.setData("UTMSESSION",JSON.stringify(a))):(J(),c.removeData("UTMSESSION"));var Je={resetKeywords:["appid","$appname","$appid","$debug","uploadUrl"],uploadURL:{valueType:0,value:se,check:{value:["isString","nimLength","isUrl"],errorCode:"60007",successCode:"20008"}},appid:{valueType:0,value:ee,check:{value:["isString","nimLength"],errorCode:"60006",successCode:"20006"}},auto:{check:{value:["isBoolean"],errorCode:"60003"}},autoProfile:{check:{value:["isBoolean"],errorCode:"60003"}},xwho:{valueType:0,value:ne,check:{value:["isString","nimLength"]}},xwhen:{valueType:0,value:oe},xwhat:{valueType:0,value:ie,check:{value:["isString","nimLength"]}},xcontext:{$lib:{valueType:1,value:"WeChat"},$lib_version:{valueType:0,value:Ie,check:{value:["isString"],successCode:"20007"}},$platform:{valueType:1,value:"WeChat"},$debug:{valueType:0,value:re,check:{value:["isNumber","isDebug"]}},$is_login:{valueType:0,value:ce,check:{value:["isBoolean"]}},$screen_width:{valueType:0,value:le,check:{value:["isNumber"]}},$screen_height:{valueType:0,value:pe,check:{value:["isNumber"]}},$time_zone:{valueType:1,value:Se},$os:{valueType:0,value:ye,check:{value:["isString"]}},$browser:{valueType:0,value:ge},$brand:{valueType:0,value:me,check:{value:["isString"]}},$browser_version:{valueType:0,value:fe,check:{value:["isString"]}},$os_version:{valueType:0,value:he,check:{value:["isString"]}},$model:{valueType:0,value:ve,check:{value:["isString"]}},$language:{valueType:0,value:de,check:{value:["isString"]}},$network:{valueType:0,value:be,check:{value:["isString"]}},$session_id:{valueType:0,value:_e},$scene:{valueType:0,value:z},$referrer:{valueType:0,value:Te},$startup_time:{valueType:0,value:ke},$is_first_time:{valueType:0,value:Ae},$is_first_day:{valueType:0,value:$e},$first_visit_time:{valueType:0,value:ke},$original_id:{valueType:0,value:Re,check:{value:["isString"]}},$is_time_calibrated:{valueType:0,value:ue},$url:{valueType:0,value:Le},$url_path:{valueType:0,value:Ee},$utm_campaign_id:{valueType:0,value:Pe},$utm_source:{valueType:0,value:we},$utm_medium:{valueType:0,value:Ne},$utm_term:{valueType:0,value:De},$utm_content:{valueType:0,value:xe},$utm_campaign:{valueType:0,value:Fe},$share_id:{valueType:0,value:Ue},$share_level:{valueType:0,value:je},$share_path:{valueType:0,value:Ce},$element_content:{valueType:0,value:Ke},$element_id:{valueType:0,value:Ve},$element_type:{valueType:0,value:Ye},$element_function:{valueType:0,value:qe},$element_name:{valueType:0,value:Ge},$appname:{valueType:0,value:te},$appid:{valueType:0,value:ae}},xcontextCommonRule:{check:{key:["isString","length99","notSpecialCharacters","keywords"],value:["notObject","isArrayString","length255"]}},$track:{check:{key:["isString","notSpecialCharacters","length99"]}},$alias:{check:{key:["isString","keyLength255"]}},$profile_increment:{check:{key:["isString","length99","notSpecialCharacters"],value:["isNumber"]}},$profile_unset:{check:{key:["isString","length99","notSpecialCharacters"]}},$pageview:{check:{key:["isString","keyLength255"]}}};function Be(e,t){for(var a=0;a<t.length;a++)if(!M[t[a]](e))return!1;return!0}function We(e,t,a){var a=a.check,r=!0;if(!a)return r;var n=a.key,a=a.value;if(n&&(r=Be(e,n),i.status.key=e,r||(i.status.code=400,p())),a){if(i.status.code=200,t&&"Array"==l.paramType(t)){i.status.key=e;for(var s=0;s<t.length;s++)(r=Be(t[s],["isString","length255"]))||(i.status.value=t[s],"String"!==l.paramType(t[s])&&(i.status.errorCode="600013"),500<t[s].length&&(t[s]=l.stringSlice(t[s],499)+"$"),i.status.code=400,p());return r}r=Be(t,a),"Array"!==l.paramType(t)&&(i.status.value=t),r||(i.status.code=400,p())}return r}function ze(e,t){var a,r=t||Je,n={};for(a in e){var s,o=e[a],u=r[a];u&&(s="","Object"===l.paramType(o)?(o=ze(o,u),n[a]=o):l.objHasKay(u,"valueType")&&(0===u.valueType&&(s=u.value(),"String"==l.paramType(s)&&500<s.length?n[a]=l.stringSlice(s,499)+"$":n[a]=s),1===u.valueType&&(s=u.value,"String"==l.paramType(s)&&500<s.length?n[a]=l.stringSlice(s,499)+"$":n[a]=s)))}return n}function y(){i.status={code:200,FnName:i.status.FnName,key:"",value:"",errorCode:"",successCode:""}}function He(e){if(!(e=e||!1)){var t,a=i.base;for(t in a)"Object"!==l.paramType(a[t])&&("$debug"!==t&&"appid"!==t&&"uploadURL"!==t||(e=Storage.getLocal("ANS"+t.toUpperCase())!==a[t]?!0:e)&&Storage.setLocal("ANS"+t.toUpperCase(),a[t]))}var r;return e&&(c.removeLocal("ARKSUPER"),c.removeData("STARTUP"),c.setLocal("FRISTDAY",l.format(new Date,"yyyyMMdd")),i.base.allowTimeCheck&&i.base.logflag&&(r=l.format(new Date(+new Date+(c.getLocal("ANSSERVERTIME")?Number(c.getLocal("ANSSERVERTIME")):0)),"yyyyMMdd"),c.setLocal("FRISTDAY",r)),c.setLocal("FRISTIME",!0),c.removeLocal("POSTDATA"),c.removeLocal("ANSSERVERTIME"),c.removeLocal("ARKFRISTPROFILE"),c.removeLocal("ARKFRISTPROFILESEND")),e}function o(e,t,a,r){if(y(),"aliasId"==r&&e===c.getLocal("ARK_LOGINID"))return i.status.successCode="20014",u(),!1;var n,s=Je[t]||Je.xcontextCommonRule;if("Object"!==l.paramType(e)||1==a)return o=Be(e,s.check.key),i.status.key=e,!(!o&&(p(),"aliasId"==r||"distinctId"==r));for(n in 0==Object.keys(e).length&&(i.status.errorCode=600021,i.status.value=0,p()),e){var o=We(n,e[n],s);"$lib"!=n&&"$lib_version"!=n&&"$platform"!=n||(e[n]=i.base[n]),o||"600019"===i.status.errorCode&&500<e[n].length&&(e[n]=l.stringSlice(e[n],499)+"$")}return!0}for(var Ze=[],Qe=e||{},Xe=0;Xe<Ze.length;Xe++)Qe=l.objMerge(e,Ze[Xe]);for(var et,tt={},at={},rt=Qe.base,nt=rt.outer,Xe=0;Xe<nt.length;Xe++)rt[nt[Xe]]?at[nt[Xe]]=l.toObj(rt[nt[Xe]]):at[nt[Xe]]="";for(et in Qe)"base"!=et&&(tt[et]=l.objMerge(at,l.toDeepObj(Qe[et])));function st(e){return tt[e]||tt.commonTemp}tt.commonTemp=at;var ot=s.getPublicApp,ut=s.Fetch.request,it=!0;function ct(e){if("Object"!==l.paramType(e)||l.isEmptyObject(e))return!1;for(var t=!0,a=0;a<i.baseJson.length;a++){var r=i.baseJson[a];"xwhat"!==r&&(!e[r]||"Object"==l.paramType(e[r])&&l.isEmptyObject(e[r]))&&(t=!1)}return t}function lt(e){if(""===i.base.appid)return i.status.errorCode="60006",void p();if(""===i.base.uploadURL)return i.status.errorCode="60007",void p();var t=c.getLocal("POSTDATA")||[],a=[];if(0<t.length)for(var r=0;r<t.length;r++)"Array"===l.paramType(t[r])?a.push.apply(a,t[r]):"Object"===l.paramType(t[r])&&ct(t[r])&&a.push(t[r]);t.length<=500&&0<Object.keys(e).length&&a.push(e),c.setLocal("POSTDATA",a),!0===it&&pt(a)}function pt(e){y(),it=!1;var a=e,t={url:i.base.uploadURL+"?appid="+i.base.appid,data:e,encryptType:i.base.encryptType};ot().AnalysysAgent.encrypt&&"Function"==l.paramType(ot().AnalysysAgent.encrypt.uploadData)&&(t=ot().AnalysysAgent.encrypt.uploadData(t)),i.status.key=t.url,i.status.value=JSON.stringify(e),i.status.successCode="20012",u(),wx.AnalysysModal&&wx.AnalysysModal(e),ut({url:t.url,method:"POST",data:JSON.stringify(t.data),dataType:"json",success:function(e){var t;it=!0,"String"==l.paramType(e.data)&&(ot().AnalysysAgent.encrypt&&"Function"==l.paramType(ot().AnalysysAgent.encrypt.decodeRes)?e.data=JSON.parse(ot().AnalysysAgent.encrypt.decodeRes(e.data)):"H4sIAAAAAAAAAKtWSs5PSVWyMjIwqAUAVAOW6gwAAAA="==e.data?e.data={code:200}:"H4sIAAAAAAAAAKtWSs5PSVWyMjUwqAUA7TtBdwwAAAA="==e.data?e.data={code:500}:"H4sIAAAAAAAAAKtWSs5PSVWyMjEy0FHKLU5XslJySSxJVHBJTS6qLChRcC0qyi/S01OqBQBdATGSKQAAAA=="==e.data?e.data={code:420}:e.data={code:200}),200==e.data.code||500==e.data.code||420==e.data.code?(t=yt(c.getLocal("POSTDATA")||[],a),200==e.data.code?(i.status.successCode="20001",u()):(i.status.errorCode="60008",p()),c.removeLocal("POSTDATA"),0<t.length&&(c.setLocal("POSTDATA",t),pt(t))):(i.status.errorCode="60008",p())},fail:function(){it=!0,i.status.errorCode="60008",p()}})}function yt(e,t){var a=e.length,r=t.length;if(0<a)for(var n=0;n<a;n++)for(var s=0;s<r;s++)if(e[n].xwhat==t[s].xwhat&&e[n].xwhen==t[s].xwhen)return e.splice(n,1),yt(e,t),e;return e}function mt(e,t){i.status.FnName="$profile_set_once",y();e=l.toObj(e,t);o(e);t=ze(st("$profile_set_once"));(t=l.delEmpty(t)).xcontext=l.objMerge(t.xcontext,e),lt(t)}function gt(e,t){i.status.FnName="$pageview",y();var a={},r={$title:""};0<arguments.length&&("String"===l.paramType(e)?(r.$title=e,o(r)):"Object"===l.paramType(e)&&(o(e),a=e),1<arguments.length&&(o(t),"Object"===l.paramType(t)&&(a=t)));var t=ze(st("$pageview")),t=l.delEmpty(t),n=c.getLocal("ARKSUPER")||{},n=(0<Object.keys(n).length&&(t.xcontext=l.objMerge(t.xcontext,n)),i.base.appProperty);"Object"==l.paramType(n)&&(t.xcontext=l.objMerge(t.xcontext,n)),t.xcontext=l.objMerge(t.xcontext,a||{}),e&&"String"==l.paramType(e)&&(t.xcontext=l.objMerge(t.xcontext,r)),lt(t)}function ft(e){var t=l.format(new Date,"yyyy-MM-dd hh:mm:ss.SSS");i.base.allowTimeCheck&&i.base.logflag&&(t=l.format(new Date(+new Date+(c.getLocal("ANSSERVERTIME")?Number(c.getLocal("ANSSERVERTIME")):0)),"yyyy-MM-dd hh:mm:ss.SSS"));var a,t={$first_visit_time:c.getLocal("ARKFRISTPROFILE")||t,$first_visit_language:de()},r=i.base.autoProfile,n=i.base.auto;"startUp"==e?(!0===r&&0==(c.getLocal("ARKFRISTPROFILESEND")||!1)&&(c.setLocal("ARKFRISTPROFILESEND",!0),i.status.FnName="$profile_set_once",y(),r=ze(st("$profile_set_once")),(r=l.delEmpty(r)).xcontext=l.objMerge(r.xcontext,t),a=c.getLocal("POSTDATA"),a=[].concat(P(a),P(l.objInArray(r))),c.setLocal("POSTDATA",a)),!0===n?(r=i.base.pageProperty,"Object"==l.paramType(r)?(gt(r),i.base.pageProperty=null):gt()):lt({})):"alias"==e&&1==i.base.autoProfile&&(c.setLocal("ARKFRISTPROFILESEND",!0),mt(t))}var ht=s.setPublicApp;function vt(e){var t=e;e&&"create"==e._status&&(ht(e),t=e.options),t.query&&0<Object.keys(t.query).length&&(a.utm_campaign_id=t.query.campaign_id,a.utm_campaign=t.query.utm_campaign,a.utm_content=t.query.utm_content,a.utm_medium=t.query.utm_medium,a.utm_source=t.query.utm_source,a.utm_term=t.query.utm_term,t.query.share_id&&t.query.share_level&&t.query.share_path&&(i.base.$share_id=t.query.share_id,i.base.$share_level=t.query.share_level,i.base.$share_path=decodeURIComponent(t.query.share_path))),t.scene&&(i.system.scene=e.scene)}function dt(e){if(e&&vt(e),l.setFristDay(),l.setFristTime(),i.base.allowTimeCheck||c.removeLocal("ANSSERVERTIME"),c.setLocal("ARKDEBUG",i.base.$debug),c.setLocal("ARKAPPID",i.base.appid),c.setLocal("ARKUPLOADURL",i.base.uploadURL),!1!==c.getData("STARTUP")){for(var t=i.FnSuperCatch,a=0;a<t.length;a++)t[a][0].apply(t[a][0],t[a][1]);i.FnSuperCatch=[],i.isStartUp=!0,i.status.FnName="$startup",y(),Y.setId(),c.setData("STARTUP",!1);var e=ze(st("$startup")),e=l.delEmpty(e);c.getLocal("ARKFRISTPROFILE")||c.setLocal("ARKFRISTPROFILE",l.format(new Date(e.xwhen),"yyyy-MM-dd hh:mm:ss.SSS"));for(var r=c.getLocal("ARKSUPER")||{},r=(e.xcontext=l.objMerge(e.xcontext,r),i.base.appProperty||{}),n=(e.xcontext=l.objMerge(e.xcontext,r),c.setData("STARTUPTIME",l.format(new Date(e.xwhen),"yyyy-MM-dd hh:mm:ss.SSS")),1!=i.base.autoProfile&&1!=i.base.auto?lt(e):(r=c.getLocal("POSTDATA")||[],r=[].concat(P(r),P(l.objInArray(e))),c.setLocal("POSTDATA",r),ft("startUp")),i.FnCatch),a=0;a<n.length;a++)n[a][0].apply(n[a][0],n[a][1]);i.FnCatch=[]}else 1==i.base.auto&&(e=i.base.pageProperty,"Object"==l.paramType(e)?(gt(e),i.base.pageProperty=null):gt())}function bt(e,t){i.status.FnName="$registerSuperProperty",y();e=l.toObj(e,t),o(e),t=c.getLocal("ARKSUPER")||{},t=l.objMerge(t,e);c.setLocal("ARKSUPER",t),i.status.successCode="20002",i.status.value=JSON.stringify(e),u()}function Tt(e){i.status.FnName="$unregisterSuperProperty",y();o(e);var t=c.getLocal("ARKSUPER")||{};if(!t.hasOwnProperty(e))return i.status.successCode="20011",i.status.value=e,void u();delete t[e],c.setLocal("ARKSUPER",t),i.status.successCode="20003",i.status.value=e,u()}function St(e,t){i.status.FnName="$registerSuperProperties",y();e=l.toObj(e,t),o(e),t=c.getLocal("ARKSUPER")||{},t=l.objMerge(t,e);c.setLocal("ARKSUPER",t),i.status.successCode="20002",i.status.value=JSON.stringify(e),u()}function _t(e){i.status.FnName="$getSuperProperty",y();o(e,"$getSuperProperty",!0);var t=c.getLocal("ARKSUPER")||{},a=t[e];return t.hasOwnProperty(e)?(i.status.successCode="20010",i.status.value=a,i.status.key=e,u(),a):(i.status.successCode="20009",i.status.key=e,u(),"")}function At(){i.status.FnName="$getSuperProperties",y();var e=c.getLocal("ARKSUPER")||{};return i.status.successCode="20010",i.status.value=JSON.stringify(e),u(),e}function $t(){i.status.FnName="$clearSuperProperties",y(),c.setLocal("ARKSUPER",{}),i.status.successCode="20004",u()}function kt(e){i.status.FnName="$alias",y();o(e,"$alias",!0,"aliasId")&&(c.setLocal("ARK_LOGINID",e),e=ze(st("$alias")),e=l.delEmpty(e),1!=i.base.autoProfile?lt(e):(c.setLocal("POSTDATA",l.objInArray(e)),ft("alias")))}function Rt(e,t){i.status.FnName=e,y(),o(e,"$track",!0),1<arguments.length&&o(t);var e=ze(st("$track")),a=c.getLocal("ARKSUPER")||{};e.xcontext=l.delEmpty(e.xcontext),0<Object.keys(a).length?(a=l.objMerge(a,t),e.xcontext=l.objMerge(e.xcontext,a)):e.xcontext=l.objMerge(e.xcontext,t),lt(e)}function Lt(e,t){i.status.FnName="$identify",y(),o(e,"$alias",!0,"distinctId")&&(!0===t&&c.setLocal("ARK_TRACK_LOGIN",!0),c.setLocal("ARK_TRACKID",e),i.status.successCode="20002",i.status.value=e,u(),wx.AnalysysModal&&wx.AnalysysModal([{xwhat:"$identify",xwho:e}]))}function Et(){var e=l.format(new Date,"yyyy-MM-dd hh:mm:ss.SSS");i.base.allowTimeCheck&&i.base.logflag&&(e=+new Date+(c.getLocal("ANSSERVERTIME")?Number(c.getLocal("ANSSERVERTIME")):0)),e=l.format(new Date(e),"yyyy-MM-dd hh:mm:ss.SSS"),y(),G.removeARKId(),G.removeTrackId(),G.removeLoginId(),G.removeIdentifyId(),$t(),He(!0),Y.setId(),!0===i.base.autoProfile&&mt({$reset_time:e}),i.status.FnName="$reset",i.status.successCode="20005",u()}function It(e,t){i.status.FnName="$profile_set",y();e=l.toObj(e,t);o(e);t=ze(st("$profile_set"));(t=l.delEmpty(t)).xcontext=l.objMerge(t.xcontext,e),lt(t)}function Ot(e,t){i.status.FnName="$profile_increment",y();e=l.toObj(e,t);o(e,"$profile_increment");t=ze(st("$profile_increment"));(t=l.delEmpty(t)).xcontext=l.objMerge(t.xcontext,e),lt(t)}function Pt(e,t){i.status.FnName="$profile_append",y();e=l.toObj(e,t);o(e);t=ze(st("$profile_append"));(t=l.delEmpty(t)).xcontext=l.objMerge(t.xcontext,e),lt(t)}function wt(e){i.status.FnName="$profile_unset",y();e=l.toObj(e,"");o(e,"$profile_unset");var t=ze(st("$profile_unset"));(t=l.delEmpty(t)).xcontext=l.objMerge(t.xcontext,e),lt(t)}function Nt(){i.status.FnName="$profile_delete",y();var e=ze(st("$profile_delete"));lt(l.delEmpty(e))}var Dt=s.Fetch.request,xt=function(){return new Promise(function(r){if(y(),!i.base.allowTimeCheck)return r();var e=(e=i.base.uploadURL).split("up")[0];Dt({url:e+"configure",method:"GET",success:function(e){r(e);var t,a,e=e.header||e.headers;e&&e.Date&&(t=+new Date,e=e.Date,(a=i.base.maxDiffTimeInterval)<0&&(a=30),e&&a<Math.abs((+new Date(e)-t)/1e3)&&(i.base.logflag||(c.setLocal("ANSSERVERTIME",+new Date(e)-t),i.status.successCode="20013",i.status.value=l.format(new Date(e),"yyyy-MM-dd hh:mm:ss +SSS"),i.status.key=l.format(new Date(t),"yyyy-MM-dd hh:mm:ss +SSS"),i.status.FnName=(+new Date(e)-t)/1e3+"s",u(),i.base.logflag=!0)))},fail:function(e){r(e)}})}).catch(function(e){})},Ft=s.System.systemPromise,jt=s.Network.netWorkPromise;function Ct(e,a){var r=G.getId(),n=s.Router.getPath(),t=("Object"!==l.paramType(e)&&(e={path:n}),Promise.all([Ft(),jt(),xt(),c.initLocalData()]).then(function(e){var t=parseInt(i.base.$share_level)?parseInt(i.base.$share_level):"",t={$share_id:r,$share_level:Number(t)+1,$share_path:n};Rt("$share",t="Object"===l.paramType(a)?l.objMerge(t,a):t)}),"share_id="+r+"&share_level="+(Number(i.base.$share_level)+1)+"&share_path="+encodeURIComponent(n));return e.path=e.path||n,-1<e.path.indexOf("?")?e.path=e.path+"&"+t:e.path=e.path+"?"+t,e}function Ut(e){if(y(),i.status.FnName="$appProperty","Object"!=l.paramType(e))return i.status.errorCode="600016",i.status.value=JSON.stringify(e),void p();if(o(e),i.base.appProperty)for(var t in e)i.base.appProperty[t]=e[t];else i.base.appProperty=e;i.status.successCode="20002",i.status.value=JSON.stringify(e),u()}function Mt(){return G.getTrackId()||G.jsId()}function Kt(){i.status.FnName="getPresetProperties",y();var e=ze(st("$getPresetProperties"));return delete(e=l.delEmpty(e)).xcontext.$is_login,i.status.successCode="20010",i.status.value=JSON.stringify(e.xcontext),u(),e.xcontext}function Vt(e){if(y(),i.status.FnName="$pageProperty","Object"!=l.paramType(e))return i.status.errorCode="600016",i.status.value=JSON.stringify(e),void p();if(o(e),i.base.pageProperty)for(var t in e)i.base.pageProperty[t]=e[t];else i.base.pageProperty=e;i.status.successCode="20002",i.status.value=JSON.stringify(e),u()}var Yt=s.System.systemPromise,qt=s.Network.netWorkPromise,Gt=!0,Jt=[];function t(s,o,u){return function(){var n=arguments;1!=Gt||0!==Object.keys(i.system.system).length&&0!==Object.keys(i.system.netWork).length?!o&&1!=i.isStartUp||1!=Gt?(1==u?i.FnSuperCatch:1==Gt&&!1===u?Jt:i.FnCatch).push([s,arguments]):s.apply(s,arguments):Promise.all([Yt(),qt(),xt(),c.initLocalData()]).then(function(e){var t=c.getLocal("ARKAPPID"),a=c.getLocal("ARKDEBUG"),r=c.getLocal("ARKUPLOADURL");t&&"Number"==l.paramType(a)&&r&&(t!==i.base.appid||1===a&&a!==i.base.$debug||r!==i.base.uploadURL)&&(l.delFristDay(),l.delFristTime(),c.removeLocal("ARKFRISTPROFILE"),c.removeLocal("ARKFRISTPROFILESEND"),G.removeLoginId(),G.removeTrackId(),c.removeLocal("ARK_TRACK_LOGIN"),c.removeLocal("ARKSUPER"),c.removeData("STARTUP"),c.removeData("STARTUPTIME"),c.removeLocal("POSTDATA")),c.setLocal("ARKAPPID",i.base.appid),c.setLocal("ARKDEBUG",i.base.$debug),c.setLocal("ARKUPLOADURL",i.base.uploadURL),Gt=!0,i.system.system=e[0],i.system.netWork=e[1],0<Jt.length&&(Jt[0][0](Jt[0][1]),Jt=[]),u&&1!=i.isStartUp?i.FnSuperCatch.push([s,n]):o||1==i.isStartUp?s.apply(s,n):i.FnCatch.push([s,n])}).catch(function(e){})}}var Bt=function e(){L(this,e),this.appStart=t(dt,!0,!1),this.startUp=t(dt,!0),this.pageView=t(gt,!1),this.registerSuperProperty=t(bt,!1,!0),this.unRegisterSuperProperty=t(Tt,!1,!0),this.registerSuperProperties=t(St,!1,!0),this.getSuperProperty=_t,this.getSuperProperties=At,this.clearSuperProperties=t($t,!1,!0),this.alias=t(kt,!0),this.track=t(Rt,!1),this.identify=t(Lt,!1,!0),this.reset=Et,this.profileSet=t(It,!1),this.profileSetOnce=t(mt,!1),this.profileIncrement=t(Ot,!1),this.profileAppend=t(Pt,!1),this.profileUnset=t(wt,!1),this.profileDelete=t(Nt,!1),this.share=Ct,this.appProperty=Ut,this.getDistinctId=Mt,this.getPresetProperties=Kt,this.pageProperty=Vt};function Wt(){var e,t=arguments;0<t.length&&t[0]&&"Object"===l.paramType(t[0])&&("tap"==t[0].type||"longtap"==t[0].type||"longpress"==t[0].type)&&(i.base.userObj=Object.assign(arguments[0],{element_function:arguments[1]}),i.status.FnName="$user_click",y(),t=ze(st("$userClick")),t=l.delEmpty(t),e=c.getLocal("ARKSUPER")||{},0<Object.keys(e).length&&(t.xcontext=l.objMerge(t.xcontext,e)),lt(t),i.base.userObj={})}function zt(){var e;0<arguments.length&&arguments[0]&&(i.base.userPageObj=arguments[0],i.status.FnName="$user_click",y(),e=ze(st("$userClick")),lt(e=l.delEmpty(e)))}var Ht=s.setPublicApp,Zt=function(){function e(){return L(this,e),O(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return I(e,Bt),E(e,[{key:"appkey",set:function(e){return y(),"String"!==l.paramType(e)?(i.status.FnName="appkey",i.status.errorCode="60001",i.status.key=e,void p()):""==e?(i.status.FnName="appkey",i.status.errorCode="60006",void p()):(i.status.FnName="appkey",i.status.successCode="20002",i.status.value=e,u(),i.status.successCode="20007",i.status.value=i.base.$lib_version,u(),void(i.base.appid=e))},get:function(){return i.base.appid}},{key:"$appname",set:function(e){i.base.$appname=e},get:function(){return i.base.$appname}},{key:"$appid",set:function(e){i.base.$appid=e},get:function(){return i.base.$appid}},{key:"debugMode",set:function(e){y(),i.base.$debug=e},get:function(){return i.base.$debug}},{key:"auto",set:function(e){if(y(),"Boolean"!==l.paramType(e))return i.status.key="auto",i.status.errorCode="60003",i.status.value=e,void p();i.base.auto=e},get:function(){return i.base.auto}},{key:"uploadURL",set:function(e){return y(),e?l.checkURL(e)?("/"!==e.charAt(e.length-1)&&(e+="/"),i.base.uploadURL=e+"up",i.status.successCode="20008",i.status.value=e,void u()):(i.status.errorCode="600011",i.status.key="uploadURL",i.status.value=e,void p()):(i.status.errorCode="60007",void p())},get:function(){return i.base.uploadURL}},{key:"autoProfile",set:function(e){if(y(),"Boolean"!==l.paramType(e))return i.status.key="autoProfile",i.status.errorCode="60003",i.status.value=e,void p();i.base.autoProfile=e},get:function(){return i.base.autoProfile}},{key:"encryptType",set:function(e){if(y(),"Number"!==l.paramType(e))return i.status.key="encryptType",i.status.errorCode="60002",i.status.value=e,void p();i.base.encryptType=e},get:function(){return i.base.encryptType}},{key:"autoShare",set:function(e){if(y(),"Boolean"!==l.paramType(e))return i.status.key="autoShare",i.status.errorCode="60003",i.status.value=e,void p();i.base.autoShare=e},get:function(){return i.base.autoShare}},{key:"allowTimeCheck",set:function(e){if(y(),"Boolean"!==l.paramType(e))return i.status.key="allowTimeCheck",i.status.errorCode="60003",i.status.value=e,void p();i.base.allowTimeCheck=e},get:function(){return i.base.allowTimeCheck}},{key:"maxDiffTimeInterval",set:function(e){if(y(),"Number"!==l.paramType(e))return i.status.key="maxDiffTimeInterval",i.status.errorCode="60002",i.status.value=e,void p();i.base.maxDiffTimeInterval=e},get:function(){return i.base.maxDiffTimeInterval}},{key:"autoTrack",set:function(e){if(y(),"Boolean"!==l.paramType(e))return i.status.key="autoTrack",i.status.errorCode="60003",i.status.value=e,void p();i.base.autoTrack=e},get:function(){return i.base.autoTrack}},{key:"autoCompleteURL",set:function(e){if(y(),"Boolean"!==l.paramType(e))return i.status.key="autoCompleteURL",i.status.errorCode="60003",i.status.value=e,void p();i.base.autoCompleteURL=e},get:function(){return i.base.autoCompleteURL}}]),e}();function Qt(e,a,r){var n;e[a]?(n=e[a],e[a]="onShareAppMessage"===a?function(e){return r(n.call(this,e))}:function(e){var t=n.apply(this,arguments);return r(e,a),t}):"onShareAppMessage"!==a&&(e[a]=function(e){r(e)})}var Xt=new Zt,ea=(wx.AnalysysAgent=Xt,App),ta=(App=function(e){Qt(e,"onShow",function(e){var t=e;e&&"create"==e._status&&(Ht(e),t=e.options),t.query&&0<Object.keys(t.query).length&&(a.utm_campaign_id=t.query.campaign_id,a.utm_campaign=t.query.utm_campaign,a.utm_content=t.query.utm_content,a.utm_medium=t.query.utm_medium,a.utm_source=t.query.utm_source,a.utm_term=t.query.utm_term,t.query.share_id&&t.query.share_level&&t.query.share_path&&(i.base.$share_id=t.query.share_id,i.base.$share_level=t.query.share_level,i.base.$share_path=decodeURIComponent(t.query.share_path))),t.scene&&(i.system.scene=e.scene)}),ea(e)},["data","onLoad","onShow","onReady","onPullDownRefresh","onReachBottom","onShareAppMessage","onPageScroll","onResize","onTabItemTap","onHide","onUnload"]);function aa(e){if(Qt(e,"onShow",Xt.startUp),1==i.base.autoShare&&Qt(e,"onShareAppMessage",Xt.share),1==i.base.autoTrack)for(var t in e)"Function"==l.paramType(e[t])&&ta.indexOf(t)<0?Qt(e,t,Wt):"Function"==l.paramType(e[t])&&"onTabItemTap"==t&&Qt(e,t,zt)}var ra=Page,na=(Page=function(e){aa(e),ra(e)},Component);Component=function(e){e.methods&&aa(e.methods),na(e)},module.exports=Xt;
