var e={base:{outer:["appid","xwho","xwhat","xwhen","xcontext"],xcontext:["$lib","$lib_version","$platform","$debug","$is_login"]},$startup:{xcontext:["$brand","$model","$os","$os_version","$browser","$browser_version","$network","$screen_width","$screen_height","$utm_campaign_id","$utm_campaign","$utm_medium","$utm_source","$utm_content","$utm_term","$is_first_day","$time_zone","$language","$session_id","$is_time_calibrated","$is_first_time","$referrer","$scene"]},$track:{xcontext:["$brand","$model","$os","$os_version","$browser","$browser_version","$network","$screen_width","$screen_height","$utm_campaign_id","$utm_campaign","$utm_medium","$utm_source","$utm_content","$utm_term","$is_first_day","$time_zone","$language","$session_id","$is_time_calibrated"]},$pageview:{xcontext:["$brand","$model","$os","$os_version","$browser","$browser_version","$network","$screen_width","$screen_height","$utm_campaign_id","$utm_campaign","$utm_medium","$utm_source","$utm_content","$utm_term","$is_first_day","$time_zone","$language","$session_id","$is_time_calibrated","$referrer","$scene","$startup_time","$url","$share_id","$share_path","$share_level"]},$alias:{xcontext:["$original_id"]},$getPresetProperties:{xcontext:["$time_zone","$language","$screen_width","$screen_height","$network","$first_visit_time","$brand","$model","$os","$session_id"]},$userClick:{xcontext:["$element_content","$element_id","$element_type","$element_name","$url"]}},t={base:{appid:"",$debug:0,$lib_version:"4.3.4",$lib:"WeChat",uploadURL:"",auto:!0,autoProfile:!0,encryptType:0,autoShare:!1,$share_level:"",$share_path:"",$share_id:"",appProperty:null,allowTimeCheck:!1,maxDiffTimeInterval:30,logflag:!1,userObj:{},userPageObj:{},autoTrack:!1},status:{code:200,FnName:"",key:"",value:"",errorCode:"",successCode:""},system:{system:{},netWork:{},scene:{}},isStartUp:!1,FnCatch:[],FnSuperCatch:[],keywords:e.base.xcontext,baseJson:e.base.outer,sendNum:1800};var r=Object.freeze({__proto__:null,request:function(e){wx.request(e)}}),a=Object.freeze({__proto__:null,getStoragePromise:function(e){return new Promise((function(t,r){try{var a=wx.getStorageSync(e);t(a||{})}catch(a){wx.getStorage({key:e,success:function(e){t(e.data)},fail:function(e){r(e)}})}})).catch((function(e){}))},setStoragePromise:function(e,t){return new Promise((function(r,a){var n=t;try{wx.setStorageSync(e,n),r(200)}catch(t){wx.setStorage({key:e,data:n,success:function(){r(200)},fail:function(){a(400)}})}})).catch((function(e){}))}});var n=Object.freeze({__proto__:null,systemPromise:function(){return new Promise((function(e,t){wx.getSystemInfo({success:function(t){e(t)},fail:function(e){t(e)}})})).catch((function(e){}))}});var s=Object.freeze({__proto__:null,netWorkPromise:function(){return new Promise((function(e,t){wx.getNetworkType({success:function(t){e(t)},fail:function(e){t(e)}})})).catch((function(e){}))}});function o(){return t.system.scene?t.system.scene.toString():""}var u=Object.freeze({__proto__:null,getScene:o,getPackageName:function(){return""},getPath:function(){var e=getCurrentPages();if(e.length>0)return e[e.length-1].__route__},getTitle:function(){return""},getReferer:function(){var e=getCurrentPages();return e.length>1&&e[e.length-2]?e[e.length-2].__route__:o()}}),i=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},c=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),l=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},p=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)},y=new function e(){var t=this;i(this,e),this.AppObj=wx,this.Fetch=r,this.Storage=a,this.System=n,this.Network=s,this.Router=u,this.setPublicApp=function(e){t.AppObj=e},this.getPublicApp=function(){return t.AppObj}},g=y.Storage.getStoragePromise,v=y.Storage.setStoragePromise,f=new(function(){function e(){i(this,e),this.local={},this.Session={},this.localStatus=!1,this.getStoragePromise=y.Storage.getStoragePromise}return c(e,[{key:"initLocalData",value:function(){var e=this;return g("FZ_STROAGE").then((function(t){if(!e.localStatus){if(e.localStatus=!0,t||(t={}),"string"==typeof t)try{t=JSON.parse(t)}catch(e){t={}}e.local=Object.assign(t,e.local),v("FZ_STROAGE",e.local).then((function(){}),(function(e){})).catch((function(e){}))}}),(function(){e.local={}})).catch((function(e){}))}},{key:"setData",value:function(e,t){this.Session[e]=t}},{key:"getData",value:function(e){return"undefind"===this.Session[e]?"":this.Session[e]}},{key:"removeData",value:function(e){"undefind"!==this.Session[e]&&delete this.Session[e]}},{key:"clearData",value:function(){this.Session={}}},{key:"setLocal",value:function(e,t){this.local[e]=t;var r=this.local;v("FZ_STROAGE",r).then((function(){}),(function(e){})).catch((function(e){}))}},{key:"getLocal",value:function(e){return this.local[e]}},{key:"removeLocal",value:function(e){if("undefind"!==this.local[e]){delete this.local[e];var t=this.local;v("FZ_STROAGE",t).then((function(){}),(function(){})).catch((function(e){}))}}}]),e}()),m=new(function(){function e(){i(this,e)}return c(e,[{key:"paramType",value:function(e){return Object.prototype.toString.call(e).replace("[object ","").replace("]","")}},{key:"delEmpty",value:function(e){var t=this,r=this.deepClone(e);return"Object"!==this.paramType(r)?{}:(Object.keys(r).forEach((function(e){var a=r[e];"Object"===t.paramType(a)&&(r[e]=t.delEmpty(r[e]),0===Object.keys(r[e]).length&&delete r[e]),""===a&&delete r[e]})),r)}},{key:"deepClone",value:function(e){var t=Object.getPrototypeOf(e);return Object.assign({},Object.create(t),e)}},{key:"mergeMsg",value:function(e,t){Object.assign(t,e)}},{key:"checkObj",value:function(e,t){var r={};if(1===arguments.length&&e.constructor===Array){for(var a=0;a<e.length;a++)r[e[a]]="";return r}return 1===arguments.length&&e.constructor===String?(r[e]=t||"",r):(arguments.length>1&&e.constructor!==Object?r[e]=t:r=e,r)}},{key:"isFristDay",value:function(){var e=new Date,t=e.getFullYear(),r=e.getMonth()+1;r=r<10?"0"+r:r;var a=e.getDate(),n=t+""+r+(a=a<10?"0"+a:a),s=f.getLocal("FRISTDAY");return(!s||n===s)&&(s||f.setLocal("FRISTDAY",n),!0)}},{key:"isFristTime",value:function(){var e=!1!==f.getLocal("FRISTIME");return e&&f.setLocal("FRISTIME",!1),e}},{key:"isEmptyObject",value:function(e){return!(Object.keys(e).length>0)}},{key:"setFristDay",value:function(){if("String"!==this.paramType(f.getLocal("FRISTDAY"))){var e=this.format(new Date,"yyyyMMdd");t.base.allowTimeCheck&&t.base.logflag&&(e=this.format(new Date(+new Date+(f.getLocal("ANSSERVERTIME")?Number(f.getLocal("ANSSERVERTIME")):0)),"yyyyMMdd")),f.setLocal("FRISTDAY",e)}}},{key:"setFristTime",value:function(){"Boolean"!==this.paramType(f.getLocal("FRISTIME"))&&f.setLocal("FRISTIME",!0)}},{key:"delFristDay",value:function(){f.removeLocal("FRISTDAY")}},{key:"delFristTime",value:function(){f.removeLocal("FRISTIME")}},{key:"checkURL",value:function(e){var t=e;return 1==new RegExp(/http(s)?:\/\/([\w-]+\.)+[\w-]+(\/[\w- .\/?%&=]*)?/).test(t)}},{key:"firstVisitTime",value:function(){var e=!1!==f.getLocal("FIRSTVISITTIME");return e&&f.setLocal("FIRSTVISITTIME",!1),e}},{key:"toDeepObj",value:function(e,t,r){var a={};if("String"===this.paramType(e))return a=this.keyValueToObje(e,t);if("Array"===this.paramType(e))return a=this.ArrayToObj(e);if("Object"===this.paramType(e))for(var n in e)a[n]=this.toDeepObj(e[n]);return a}},{key:"ArrayToObj",value:function(e){for(var t={},r=0;r<e.length;r++)t[e[r]]="";return t}},{key:"keyValueToObje",value:function(e,t){var r={};return r[e]=t,r}},{key:"toObj",value:function(e,t,r){var a={};return"String"===this.paramType(e)?a=this.keyValueToObje(e,t):"Array"===this.paramType(e)?a=this.ArrayToObj(e):"Object"===this.paramType(e)?e:a}},{key:"objMerge",value:function(e,t){if("Object"!==this.paramType(e)||"Object"!==this.paramType(t))return e;var r={};for(var a in e)r[a]=e[a];for(var a in t)r[a]&&"Object"===this.paramType(r[a])&&"Object"===this.paramType(t[a])?r[a]=this.objMerge(r[a],t[a]):"Array"===this.paramType(r[a])&&"Array"===this.paramType(t[a])?r[a]=this.arrayMergeUnique(r[a],t[a]):r[a]=t[a];return r}},{key:"arrayUnique",value:function(e){for(var t=[],r={},a=0;a<e.length;a++)r[e[a]]||(r[e[a]]=!0,t.push(e[a]));return t}},{key:"arrayMerge",value:function(e,t){return e.push.apply(e,t),e}},{key:"arrayMergeUnique",value:function(e,t){return e.push.apply(e,t),this.arrayUnique(e)}},{key:"format",value:function(e,t){var r=e.getTimezoneOffset(),a={"M+":(e=new Date(e.getTime()+60*r*1e3+288e5)).getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),"S+":e.getMilliseconds()};for(var n in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),a)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,3==RegExp.$1.length?(""+a[n]).length<3?("00"+a[n]).substr(("00"+a[n]).length-3,("00"+a[n]).length):a[n]:("00"+a[n]).substr((""+a[n]).length)));return t}},{key:"objHasKay",value:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},{key:"clientTimeZone",value:function(){var e=(new Date).getTimezoneOffset(),t=parseInt(e/60),r=e%60,a="-";return(t<=0||r<0)&&(a="+",t=-t,r<0&&(r=-r)),1==(t+="").length&&(t="0"+t),1==(r+="").length&&(r="0"+r),a+t+":"+r}},{key:"objInArray",value:function(e){var t=[];return t.push(e),t}},{key:"stringSlice",value:function(e,t){return e.slice(0,t)}}]),e}()),h={common:"{FN}:Property key invalid, nonsupport value: $lib/$lib_version/$platform/$first_visit_time/$debug/$is_login \ncurrent KEY:{KEY}",60001:"{FN}:Property key invalid, support type: String \ncurrent key:{KEY}\ncurrent keyType:{KEYTYPE}",60002:"{FN}:Property value invalid of key[{KEY}], support type: Number \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}",60003:"{FN}:Property value invalid of key[{KEY}], support type: Boolean \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}",60004:"{FN}:Property value invalid of key[{KEY}], support type: Array \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}",60005:"{FN}:The length of the property[{KEY}] value (string[{VALUE}]) needs to be 1-255 !",60006:"Please set appkey first.",60007:"Please set uploadURL first.",60008:"Send message failed.",60009:"{FN}:The length of the property key (string[{KEY}]) needs to be 1-125 !",600010:"{FN}:The length of the property key (string[{KEY}]) needs to be 1-99 !",600011:"{FN}:[{KEY}] does not conform to naming rules!",600012:"{FN}:Property key invalid, nonsupport value: $lib/$lib_version/$platform/$first_visit_time/$debug/$is_login \ncurrent KEY:{KEY}",600013:"{FN}:Property value invalid of key[{KEY}], support type: Array with String as its internal element \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}",600016:"{FN}:Property value invalid of key[{KEY}], support type: Object \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}",600017:"{FN}:The length of the property key (string[{KEY}]) needs to be 1-255 !",600018:"{FN}:Property value invalid of key[{KEY}] invalid, support type: String \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}",600019:"{FN}:The length of the property[{KEY}] value (string[{VALUE}]) needs to be 1-255 !",600020:"DebugMode only can be 0,1,2",600021:"{FN}:Property value invalid of key[{KEY}], support type: Object, Object.keys length needs to be 1-499 \ncurrent length:{VALUE}\n"},d={common:"",20001:"Send message success",20002:"{FN}: set success ({VALUE})",20003:"{FN}:({VALUE}) delete success",20004:"{FN}:clear success",20005:"{FN}:reset success",20006:"set appkey success. current appkey : {VALUE}",20007:"Init Analysys WeChat sdk success, version : {VALUE}",20008:"set uploadURL success. current uploadURL : {VALUE}",20009:"{FN}:[{KEY}] : get failed",20010:"{FN}:[{KEY}] : get success. ({VALUE})",20011:"{FN}:({VALUE}) delete failed",20012:"Send Message to Server: {KEY} \ndata:{VALUE}",20013:"收到服务器的时间: {VALUE} \n本地时间: {KEY} \n时间相差:  {FN} \n数据将会进行时间校准"};function S(e){if(1===t.base.$debug||2===t.base.$debug){var r=t.status,a=r.successCode,n=r.FnName,s=r.key,o=r.value,u=(d[a]||d.common).replace(/{FN}/,n).replace(/{KEY}/g,s).replace(/{VALUE}/g,o);if(e&&(u=e),!u)return;if("Object"===m.paramType(console)&&console.log)try{return console.log.apply(console,u)}catch(e){console.log(u)}}}function T(){var e=t.status,r=e.errorCode,a=e.FnName,n=e.key,s=JSON.stringify(e.value),o=m.paramType(e.value),u=m.paramType(n),i=(h[r]||h.common).replace(/{FN}/g,a).replace(/{KEY}/g,JSON.stringify(n)).replace(/{VALUE}/g,s).replace(/{VALUETYPE}/g,o).replace(/{KEYTYPE}/g,u);1!==t.base.$debug&&2!==t.base.$debug||console.warn(i)}var b=new(function(){function e(){i(this,e)}return c(e,[{key:"isString",value:function(e){return t.status.errorCode="60001","String"===m.paramType(e)}},{key:"isNumber",value:function(e){return t.status.errorCode="60002","Number"===m.paramType(e)}},{key:"isBoolean",value:function(e){return t.status.errorCode="60003","Boolean"===m.paramType(e)}},{key:"isObject",value:function(e){return"Object"===m.paramType(e)}},{key:"lengthRule",value:function(e,r,a){this.isNumber(a)||(a=1/0);var n=!0;return this.isNumber(r)&&e.length&&e.length>r&&e.length<a+1||(t.status.errorCode="60005",n=!1),n}},{key:"nimLength",value:function(e){return this.lengthRule(e,0)}},{key:"length99",value:function(e){var r=this.lengthRule(e,0,99);return r||(t.status.errorCode="600010"),r}},{key:"length125",value:function(e){var r=this.lengthRule(e,0,125);return r||(t.status.errorCode="60009"),r}},{key:"length255",value:function(e){if(!(e||this.isString(e)||this.isNumber(e)||this.isBoolean(e)))return t.status.errorCode="60005",!1;"String"!==m.paramType(e)&&(e=e.toString());var r=this.lengthRule(e,0,255);return r||(t.status.errorCode="600019"),r}},{key:"keyLength255",value:function(e){var r=this.length255(e);return r||(t.status.errorCode="600017"),r}},{key:"isURL",value:function(e){var r=e;return 1==new RegExp(/http(s)?:\/\/([\w-]+\.)+[\w-]+(\/[\w- .\/?%&=]*)?/).test(r)||(t.status.errorCode="60006",!1)}},{key:"isDebug",value:function(e){return!(!this.isNumber(e)||0!==e&&1!==e&&2!==e)}},{key:"notObject",value:function(e){return!this.isObject(e)}},{key:"notSpecialCharacters",value:function(e){return!(new RegExp("[\\u4E00-\\u9FA5]|[\\uFE30-\\uFFA0]","gi").test(e)||!/^[$a-zA-Z][a-zA-Z0-9_$]{0,}$/.test(e))||(t.status.errorCode="600011",!1)}},{key:"isArrayString",value:function(e){if("Array"===m.paramType(e))for(var r=0;r<e.length;r++){if(t.status.value=e[r],"String"!==m.paramType(e[r]))return t.status.errorCode="600013",!1;if(!this.length255(e[r]))return!1}return!0}},{key:"keywords",value:function(e){var r=t.keywords;return t.status.errorCode="600012",!(r.indexOf(e)>-1)}}]),e}());function A(e,t){var r=e;function a(e,t){return e<<t|e>>>32-t}function n(e,t){var r,a,n,s,o;return n=2147483648&e,s=2147483648&t,o=(1073741823&e)+(1073741823&t),(r=1073741824&e)&(a=1073741824&t)?2147483648^o^n^s:r|a?1073741824&o?3221225472^o^n^s:1073741824^o^n^s:o^n^s}function s(e,t,r,s,o,u,i){return e=n(e,n(n(function(e,t,r){return e&t|~e&r}(t,r,s),o),i)),n(a(e,u),t)}function o(e,t,r,s,o,u,i){return e=n(e,n(n(function(e,t,r){return e&r|t&~r}(t,r,s),o),i)),n(a(e,u),t)}function u(e,t,r,s,o,u,i){return e=n(e,n(n(function(e,t,r){return e^t^r}(t,r,s),o),i)),n(a(e,u),t)}function i(e,t,r,s,o,u,i){return e=n(e,n(n(function(e,t,r){return t^(e|~r)}(t,r,s),o),i)),n(a(e,u),t)}function c(e){var t="",r="",a=void 0;for(a=0;a<=3;a++)t+=(r="0"+(e>>>8*a&255).toString(16)).substr(r.length-2,2);return t}var l=Array(),p=void 0,y=void 0,g=void 0,v=void 0,f=void 0,m=void 0,h=void 0,d=void 0,S=void 0;for(l=function(e){for(var t=void 0,r=e.length,a=r+8,n=16*((a-a%64)/64+1),s=Array(n-1),o=0,u=0;u<r;)o=u%4*8,s[t=(u-u%4)/4]=s[t]|e.charCodeAt(u)<<o,u++;return o=u%4*8,s[t=(u-u%4)/4]=s[t]|128<<o,s[n-2]=r<<3,s[n-1]=r>>>29,s}(r),m=1732584193,h=4023233417,d=2562383102,S=271733878,p=0;p<l.length;p+=16)y=m,g=h,v=d,f=S,m=s(m,h,d,S,l[p+0],7,3614090360),S=s(S,m,h,d,l[p+1],12,3905402710),d=s(d,S,m,h,l[p+2],17,606105819),h=s(h,d,S,m,l[p+3],22,3250441966),m=s(m,h,d,S,l[p+4],7,4118548399),S=s(S,m,h,d,l[p+5],12,1200080426),d=s(d,S,m,h,l[p+6],17,2821735955),h=s(h,d,S,m,l[p+7],22,4249261313),m=s(m,h,d,S,l[p+8],7,1770035416),S=s(S,m,h,d,l[p+9],12,2336552879),d=s(d,S,m,h,l[p+10],17,4294925233),h=s(h,d,S,m,l[p+11],22,2304563134),m=s(m,h,d,S,l[p+12],7,1804603682),S=s(S,m,h,d,l[p+13],12,4254626195),d=s(d,S,m,h,l[p+14],17,2792965006),m=o(m,h=s(h,d,S,m,l[p+15],22,1236535329),d,S,l[p+1],5,4129170786),S=o(S,m,h,d,l[p+6],9,3225465664),d=o(d,S,m,h,l[p+11],14,643717713),h=o(h,d,S,m,l[p+0],20,3921069994),m=o(m,h,d,S,l[p+5],5,3593408605),S=o(S,m,h,d,l[p+10],9,38016083),d=o(d,S,m,h,l[p+15],14,3634488961),h=o(h,d,S,m,l[p+4],20,3889429448),m=o(m,h,d,S,l[p+9],5,568446438),S=o(S,m,h,d,l[p+14],9,3275163606),d=o(d,S,m,h,l[p+3],14,4107603335),h=o(h,d,S,m,l[p+8],20,1163531501),m=o(m,h,d,S,l[p+13],5,2850285829),S=o(S,m,h,d,l[p+2],9,4243563512),d=o(d,S,m,h,l[p+7],14,1735328473),m=u(m,h=o(h,d,S,m,l[p+12],20,2368359562),d,S,l[p+5],4,4294588738),S=u(S,m,h,d,l[p+8],11,2272392833),d=u(d,S,m,h,l[p+11],16,1839030562),h=u(h,d,S,m,l[p+14],23,4259657740),m=u(m,h,d,S,l[p+1],4,2763975236),S=u(S,m,h,d,l[p+4],11,1272893353),d=u(d,S,m,h,l[p+7],16,4139469664),h=u(h,d,S,m,l[p+10],23,3200236656),m=u(m,h,d,S,l[p+13],4,681279174),S=u(S,m,h,d,l[p+0],11,3936430074),d=u(d,S,m,h,l[p+3],16,3572445317),h=u(h,d,S,m,l[p+6],23,76029189),m=u(m,h,d,S,l[p+9],4,3654602809),S=u(S,m,h,d,l[p+12],11,3873151461),d=u(d,S,m,h,l[p+15],16,530742520),m=i(m,h=u(h,d,S,m,l[p+2],23,3299628645),d,S,l[p+0],6,4096336452),S=i(S,m,h,d,l[p+7],10,1126891415),d=i(d,S,m,h,l[p+14],15,2878612391),h=i(h,d,S,m,l[p+5],21,4237533241),m=i(m,h,d,S,l[p+12],6,1700485571),S=i(S,m,h,d,l[p+3],10,2399980690),d=i(d,S,m,h,l[p+10],15,4293915773),h=i(h,d,S,m,l[p+1],21,2240044497),m=i(m,h,d,S,l[p+8],6,1873313359),S=i(S,m,h,d,l[p+15],10,4264355552),d=i(d,S,m,h,l[p+6],15,2734768916),h=i(h,d,S,m,l[p+13],21,1309151649),m=i(m,h,d,S,l[p+4],6,4149444226),S=i(S,m,h,d,l[p+11],10,3174756917),d=i(d,S,m,h,l[p+2],15,718787259),h=i(h,d,S,m,l[p+9],21,3951481745),m=n(m,y),h=n(h,g),d=n(d,v),S=n(S,f);return 32==t?c(m)+c(h)+c(d)+c(S):c(h)+c(d)}var _=new(function(){function e(){i(this,e),this.sessionId="",this.sessionDate=""}return c(e,[{key:"setId",value:function(){var e=+new Date;return this.sessionId=A("WeChat"+e.toString()+Math.random(0,1e7)),this.sessionDate=e,f.setLocal("SEESIONID",this.sessionId),f.setLocal("SEESIONDATE",this.sessionDate),this.sessionId}},{key:"getId",value:function(){var e=new Date,t=e.getTime(),r=e.getTimezoneOffset(),a=new Date(t+60*r*1e3+288e5).getDate();this.sessionDate=f.getLocal("SEESIONDATE")||0;var n=0===this.sessionDate?0:new Date(this.sessionDate+60*r*1e3+288e5).getDate();return(""===this.sessionId||0===this.sessionDate||Number(t)-Number(this.sessionDate)>18e5||n!==a)&&this.setId(),this.sessionDate=t,f.setLocal("SEESIONDATE",t),this.sessionId=f.getLocal("SEESIONID")||this.setId(),this.sessionId}}]),e}()),$=new(function(){function e(){i(this,e)}return c(e,[{key:"getId",value:function(){var e=f.getLocal("ARK_LOGINID")||f.getLocal("ARK_TRACKID")||f.getLocal("ARK_ID");return e||(e=this.setId(),f.setLocal("ARK_ID",e)),e}},{key:"setId",value:function(){var e=new String((new Date).getTime())+new String(1e4*Math.random());return"WX"+A(new String(e),32)+A(new String(e),32).slice(0,4)}},{key:"jsId",value:function(){var e=f.getLocal("ARK_ID");return e||(e=this.setId()),e}},{key:"removeARKId",value:function(){f.removeLocal("ARK_ID")}},{key:"setLoginId",value:function(e){e&&f.setLocal("ARK_LOGINID",e)}},{key:"setLoginOId",value:function(e){e&&f.setLocal("ARK_LOGINOID",e)}},{key:"getLoginOId",value:function(){return f.getLocal("ARK_LOGINOID")}},{key:"getLoginId",value:function(){return f.getLocal("ARK_LOGINID")}},{key:"removeLoginId",value:function(){f.removeLocal("ARK_LOGINID")}},{key:"setTrackId",value:function(e){e&&f.setLocal("ARK_TRACKID",e)}},{key:"getTrackId",value:function(){return f.getLocal("ARK_TRACKID")}},{key:"removeTrackId",value:function(){f.removeLocal("ARK_TRACKID")}},{key:"getAliasId",value:function(){return f.getLocal("ARK_LOGINID")}},{key:"removeAliasId",value:function(){f.removeLocal("ARK_LOGINID")}},{key:"setIdentifyId",value:function(e){f.setLocal("ARK_TRACKID",e)}},{key:"getIdentifyId",value:function(){return f.getLocal("ARK_TRACKID")}},{key:"removeIdentifyId",value:function(){f.removeLocal("ARK_TRACK_LOGIN")}}]),e}()),k={utm_campaign_id:"",utm_source:"",utm_medium:"",utm_term:"",utm_content:"",utm_campaign:""};var R=y.Router.getPath,L=y.Router.getScene,E=(y.Router.getPackageName,y.Router.getTitle,y.Router.getReferer),I=t.base;function O(){return t.system.system.language||""}var P="GMT"+m.clientTimeZone();function D(){var e=m.format(new Date,"yyyy-MM-dd hh:mm:ss.SSS");return t.base.allowTimeCheck&&t.base.logflag&&(e=m.format(new Date(+new Date+(f.getLocal("ANSSERVERTIME")?Number(f.getLocal("ANSSERVERTIME")):0)),"yyyy-MM-dd hh:mm:ss.SSS")),f.getLocal("ARKFRISTPROFILE")&&(e=f.getLocal("ARKFRISTPROFILE")),e}var N=f.getData("UTMSESSION")||"";k.utm_campaign&&k.utm_source&&k.utm_medium?(N!==JSON.stringify(k)&&_.setId(),f.setData("UTMSESSION",JSON.stringify(k))):(k={utm_campaign_id:"",utm_source:"",utm_medium:"",utm_term:"",utm_content:"",utm_campaign:""},f.removeData("UTMSESSION"));var w={resetKeywords:["appid","$debug","uploadUrl"],uploadURL:{valueType:0,value:function(e){return"/"!==I.uploadURL.charAt(I.uploadURL.length-1)&&(I.uploadURL+="/"),I.uploadURL},check:{value:["isString","nimLength","isUrl"],errorCode:"60007",successCode:"20008"}},appid:{valueType:0,value:function(){return I.appid},check:{value:["isString","nimLength"],errorCode:"60006",successCode:"20006"}},auto:{check:{value:["isBoolean"],errorCode:"60003"}},autoProfile:{check:{value:["isBoolean"],errorCode:"60003"}},xwho:{valueType:0,value:function(){return $.getId()},check:{value:["isString","nimLength"]}},xwhen:{valueType:0,value:function(){return t.base.allowTimeCheck&&t.base.logflag?+new Date+(f.getLocal("ANSSERVERTIME")?Number(f.getLocal("ANSSERVERTIME")):0):+new Date}},xwhat:{valueType:0,value:function(){return t.status.FnName},check:{value:["isString","nimLength"]}},xcontext:{$lib:{valueType:1,value:"WeChat"},$lib_version:{valueType:0,value:function(){return I.$lib_version},check:{value:["isString"],successCode:"20007"}},$platform:{valueType:1,value:"WeChat"},$debug:{valueType:0,value:function(){return I.$debug},check:{value:["isNumber","isDebug"]}},$is_login:{valueType:0,value:function(){return!(!$.getAliasId()&&!f.getLocal("ARK_TRACK_LOGIN"))},check:{value:["isBoolean"]}},$screen_width:{valueType:0,value:function(){return t.system.system.screenWidth||""},check:{value:["isNumber"]}},$screen_height:{valueType:0,value:function(){return t.system.system.screenHeight||""},check:{value:["isNumber"]}},$time_zone:{valueType:1,value:P},$os:{valueType:0,value:function(){return t.system.system.system?t.system.system.system.split(" ")[0]:""},check:{value:["isString"]}},$browser:{valueType:0,value:function(){return t.system.system.browser||""}},$brand:{valueType:0,value:function(){return t.system.system.brand||""},check:{value:["isString"]}},$browser_version:{valueType:0,value:function(){return t.system.system.version||""},check:{value:["isString"]}},$os_version:{valueType:0,value:function(){return t.system.system.system?t.system.system.system.split(" ")[1]:""},check:{value:["isString"]}},$model:{valueType:0,value:function(){return t.system.system.model||""},check:{value:["isString"]}},$language:{valueType:0,value:O,check:{value:["isString"]}},$network:{valueType:0,value:function(){return t.system.netWork.networkType},check:{value:["isString"]}},$session_id:{valueType:0,value:function(){return _.getId()}},$scene:{valueType:0,value:L},$referrer:{valueType:0,value:function(){return E()||L()}},$startup_time:{valueType:0,value:D},$is_first_time:{valueType:0,value:function(){var e=f.getLocal("FRISTIME");return f.setLocal("FRISTIME",!1),null==e||e}},$is_first_day:{valueType:0,value:function(){var e=new Date;t.base.allowTimeCheck&&t.base.logflag&&(e=new Date(+new Date+(f.getLocal("ANSSERVERTIME")?Number(f.getLocal("ANSSERVERTIME")):0)));var r=e.getFullYear(),a=e.getMonth()+1;a=a<10?"0"+a:a;var n=e.getDate(),s=r+""+a+(n=n<10?"0"+n:n),o=f.getLocal("FRISTDAY");return(!o||s===o)&&(f.setLocal("FRISTDAY",s),!0)}},$first_visit_time:{valueType:0,value:D},$original_id:{valueType:0,value:function(){return $.getTrackId()||$.jsId()},check:{value:["isString"]}},$is_time_calibrated:{valueType:0,value:function(){return!!(f.getLocal("ANSSERVERTIME")&&t.base.allowTimeCheck&&t.base.logflag)}},$url:{valueType:0,value:function(){return R()||""}},$utm_campaign_id:{valueType:0,value:function(){return k.utm_campaign_id}},$utm_source:{valueType:0,value:function(){return k.utm_source}},$utm_medium:{valueType:0,value:function(){return k.utm_medium}},$utm_term:{valueType:0,value:function(){return k.utm_term}},$utm_content:{valueType:0,value:function(){return k.utm_content}},$utm_campaign:{valueType:0,value:function(){return k.utm_campaign}},$share_id:{valueType:0,value:function(){return t.base.$share_id}},$share_level:{valueType:0,value:function(){return t.base.$share_level}},$share_path:{valueType:0,value:function(){return t.base.$share_path}},$element_content:{valueType:0,value:function(){var e=t.base.userObj,r=t.base.userPageObj;return e.currentTarget?e.currentTarget&&e.currentTarget.dataset&&e.currentTarget.dataset.content||"":r.text||""}},$element_id:{valueType:0,value:function(){var e=t.base.userObj;return e.currentTarget&&e.currentTarget.id||""}},$element_type:{valueType:0,value:function(){var e=t.base.userObj;return e.currentTarget&&e.currentTarget.dataset&&e.currentTarget.dataset.type||""}},$element_name:{valueType:0,value:function(){var e=t.base.userObj;return e.currentTarget&&e.currentTarget.dataset&&e.currentTarget.dataset.name||""}}},xcontextCommonRule:{check:{key:["isString","length99","notSpecialCharacters","keywords"],value:["notObject","isArrayString","length255"]}},$track:{check:{key:["isString","notSpecialCharacters","length99"]}},$alias:{check:{key:["isString","keyLength255"]}},$profile_increment:{check:{key:["isString","length99","notSpecialCharacters"],value:["isNumber"]}},$profile_unset:{check:{key:["isString","length99","notSpecialCharacters"]}},$pageview:{check:{key:["isString","keyLength255"]}}};function F(e,t){for(var r=0;r<t.length;r++){if(!b[t[r]](e))return!1}return!0}function x(e,r,a){var n=a.check,s=!0;if(!n)return s;var o=n.key,u=n.value;if(o&&(s=F(e,o),t.status.key=e,s||(t.status.code=400,T())),u){if(t.status.code=200,r&&"Array"==m.paramType(r)){t.status.key=e;for(var i=0;i<r.length;i++)(s=F(r[i],["isString","length255"]))||(t.status.value=r[i],"String"!==m.paramType(r[i])&&(t.status.errorCode="600013"),r[i].length>500&&(r[i]=m.stringSlice(r[i],499)+"$"),t.status.code=400,T());return s}s=F(r,u),"Array"!==m.paramType(r)&&(t.status.value=r),s||(t.status.code=400,T())}return s}function j(e,t){var r=t||w,a={};for(var n in e){var s=e[n],o=r[n];if(o){var u="";if("Object"===m.paramType(s)){var i=j(s,o);a[n]=i}else m.objHasKay(o,"valueType")&&(0===o.valueType&&(u=o.value(),"String"==m.paramType(u)&&u.length>500?a[n]=m.stringSlice(u,499)+"$":a[n]=u),1===o.valueType&&(u=o.value,"String"==m.paramType(u)&&u.length>500?a[n]=m.stringSlice(u,499)+"$":a[n]=u))}}return a}function C(){t.status={code:200,FnName:t.status.FnName,key:"",value:"",errorCode:"",successCode:""}}function M(e,r,a,n){C();var s=w[r]||w.xcontextCommonRule;if("Object"!==m.paramType(e)||1==a){var o=F(e,s.check.key);return t.status.key=e,!(!o&&(T(),"aliasId"==n||"distinctId"==n))}for(var u in 0==Object.keys(e).length&&(t.status.errorCode=600021,t.status.value=0,T()),e){o=x(u,e[u],s);"$lib"!=u&&"$lib_version"!=u&&"$platform"!=u||(e[u]=t.base[u]),o||"600019"===t.status.errorCode&&e[u].length>500&&(e[u]=m.stringSlice(e[u],499)+"$")}return!0}for(var K=[],U=e||{},V=0;V<K.length;V++)U=m.objMerge(e,K[V]);var Y={},q={},G=U.base,W=G.outer;for(V=0;V<W.length;V++)G[W[V]]?q[W[V]]=m.toObj(G[W[V]]):q[W[V]]="";for(var J in U)"base"!=J&&(Y[J]=m.objMerge(q,m.toDeepObj(U[J])));function B(e){return Y[e]||Y.commonTemp}Y.commonTemp=q;var z=y.getPublicApp,H=y.Fetch.request,Z=!0;function Q(e){if("Object"===m.paramType(e)&&!m.isEmptyObject(e)){for(var r=!0,a=0;a<t.baseJson.length;a++){var n=t.baseJson[a];"xwhat"!==n&&((!e[n]||"Object"==m.paramType(e[n])&&m.isEmptyObject(e[n]))&&(r=!1))}return r}return!1}function X(e){if(""===t.base.appid)return t.status.errorCode="60006",void T();if(""===t.base.uploadURL)return t.status.errorCode="60007",void T();var r=f.getLocal("POSTDATA")||[],a=[];if(r.length>0)for(var n=0;n<r.length;n++)"Array"===m.paramType(r[n])?a.push.apply(a,r[n]):"Object"===m.paramType(r[n])&&Q(r[n])&&a.push(r[n]);r.length<=500&&Object.keys(e).length>0&&a.push(e),f.setLocal("POSTDATA",a),!0===Z&&function e(r){f.removeLocal("POSTDATA"),C(),Z=!1;var a=r,n={url:t.base.uploadURL+"?appid="+t.base.appid,data:r,encryptType:t.base.encryptType};z().AnalysysAgent.encrypt&&"Function"==m.paramType(z().AnalysysAgent.encrypt.uploadData)&&(n=z().AnalysysAgent.encrypt.uploadData(n));t.status.key=n.url,t.status.value=JSON.stringify(r),t.status.successCode="20012",S(),H({url:n.url,method:"POST",data:JSON.stringify(n.data),dataType:"json",success:function(r){if(Z=!0,"String"==m.paramType(r.data)&&(z().AnalysysAgent.encrypt&&"Function"==m.paramType(z().AnalysysAgent.encrypt.decodeRes)?r.data=JSON.parse(z().AnalysysAgent.encrypt.decodeRes(r.data)):"H4sIAAAAAAAAAKtWSs5PSVWyMjIwqAUAVAOW6gwAAAA="==r.data?r.data={code:200}:"H4sIAAAAAAAAAKtWSs5PSVWyMjUwqAUA7TtBdwwAAAA="==r.data?r.data={code:500}:"H4sIAAAAAAAAAKtWSs5PSVWyMjEy0FHKLU5XslJySSxJVHBJTS6qLChRcC0qyi/S01OqBQBdATGSKQAAAA=="==r.data?r.data={code:420}:r.data={code:200}),200==r.data.code||500==r.data.code||420==r.data.code){var n=f.getLocal("POSTDATA")||[];n.length>0&&e(n),200==r.data.code?(t.status.successCode="20001",S()):(t.status.errorCode="60008",T())}else{t.status.errorCode="60008",T();var s=f.getLocal("POSTDATA")||[],o=[].concat(p(a),p(s));f.setLocal("POSTDATA",o),s.length>0&&e(o)}},fail:function(){Z=!0,t.status.errorCode="60008",T();var r=f.getLocal("POSTDATA")||[],n=[].concat(p(a),p(r));f.setLocal("POSTDATA",n),r.length>0&&e(n)}})}(a)}function ee(e,r){t.status.FnName="$profile_set_once",C();var a=m.toObj(e,r);M(a);var n=j(B("$profile_set_once"));(n=m.delEmpty(n)).xcontext=m.objMerge(n.xcontext,a),X(n)}function te(e,r){t.status.FnName="$pageview",C();var a={$title:""};arguments.length>0&&M(a={$title:e}),arguments.length>1&&M(r);var n=j(B("$pageview"));n=m.delEmpty(n);var s=f.getLocal("ARKSUPER")||{};Object.keys(s).length>0&&(n.xcontext=m.objMerge(n.xcontext,s));var o=t.base.appProperty;"Object"==m.paramType(o)&&o&&(n.xcontext=m.objMerge(n.xcontext,o)),n.xcontext=m.objMerge(n.xcontext,r||{}),e&&"String"==m.paramType(e)&&(n.xcontext=m.objMerge(n.xcontext,a)),X(n)}function re(e){var r=m.format(new Date,"yyyy-MM-dd hh:mm:ss.SSS");t.base.allowTimeCheck&&t.base.logflag&&(r=m.format(new Date(+new Date+(f.getLocal("ANSSERVERTIME")?Number(f.getLocal("ANSSERVERTIME")):0)),"yyyy-MM-dd hh:mm:ss.SSS"));var a={$first_visit_time:f.getLocal("ARKFRISTPROFILE")||r,$first_visit_language:O()},n=t.base.autoProfile,s=t.base.auto;if("startUp"==e){if(!0===n)if(0==(f.getLocal("ARKFRISTPROFILESEND")||!1)){f.setLocal("ARKFRISTPROFILESEND",!0),t.status.FnName="$profile_set_once",C();var o=j(B("$profile_set_once"));(o=m.delEmpty(o)).xcontext=m.objMerge(o.xcontext,a);var u=f.getLocal("POSTDATA");u=[].concat(p(u),p(m.objInArray(o))),f.setLocal("POSTDATA",u)}!0===s?te():X({})}else{if("alias"!=e)return;1==t.base.autoProfile&&(f.setLocal("ARKFRISTPROFILESEND",!0),ee(a))}}var ae=y.setPublicApp;function ne(e){e&&function(e){var r=e;e&&"create"==e._status&&(ae(e),r=e.options),r.query&&Object.keys(r.query).length>0&&(r.query.utm_campaign&&r.query.utm_medium&&r.query.utm_source&&(k.utm_campaign_id=r.query.campaign_id,k.utm_campaign=r.query.utm_campaign,k.utm_content=r.query.utm_content,k.utm_medium=r.query.utm_medium,k.utm_source=r.query.utm_source,k.utm_term=r.query.utm_term),r.query.share_id&&r.query.share_level&&r.query.share_path&&(t.base.$share_id=r.query.share_id,t.base.$share_level=r.query.share_level,t.base.$share_path=decodeURIComponent(r.query.share_path))),r.scene&&(t.system.scene=e.scene)}(e);var r=f.getLocal("ARKAPPID"),a=f.getLocal("ARKDEBUG"),n=f.getLocal("ARKUPLOADURL");if(r&&"Number"==m.paramType(a)&&n&&(r!==t.base.appid||1===a&&a!==t.base.$debug||n!==t.base.uploadURL)&&(m.delFristDay(),m.delFristTime(),f.removeLocal("ARKFRISTPROFILE"),f.removeLocal("ARKFRISTPROFILESEND"),$.removeLoginId(),$.removeTrackId(),f.removeLocal("ARK_TRACK_LOGIN"),f.removeLocal("ARKSUPER"),f.removeData("STARTUP"),f.removeData("STARTUPTIME"),f.removeLocal("POSTDATA")),m.setFristDay(),m.setFristTime(),t.base.allowTimeCheck||f.removeLocal("ANSSERVERTIME"),f.setLocal("ARKDEBUG",t.base.$debug),f.setLocal("ARKAPPID",t.base.appid),f.setLocal("ARKUPLOADURL",t.base.uploadURL),!1!==f.getData("STARTUP")){for(var s=t.FnSuperCatch,o=0;o<s.length;o++)s[o][0].apply(s[o][0],s[o][1]);t.FnSuperCatch=[],t.isStartUp=!0,t.status.FnName="$startup",C(),_.setId(),f.setData("STARTUP",!1);var u=j(B("$startup"));u=m.delEmpty(u),f.getLocal("ARKFRISTPROFILE")||f.setLocal("ARKFRISTPROFILE",m.format(new Date(u.xwhen),"yyyy-MM-dd hh:mm:ss.SSS"));var i=f.getLocal("ARKSUPER")||{};u.xcontext=m.objMerge(u.xcontext,i);var c=t.base.appProperty||{};if(u.xcontext=m.objMerge(u.xcontext,c),f.setData("STARTUPTIME",m.format(new Date(u.xwhen),"yyyy-MM-dd hh:mm:ss.SSS")),1!=t.base.autoProfile&&1!=t.base.auto)X(u);else{var l=f.getLocal("POSTDATA")||[];l=[].concat(p(l),p(m.objInArray(u))),f.setLocal("POSTDATA",l),re("startUp")}var y=t.FnCatch;for(o=0;o<y.length;o++)y[o][0].apply(y[o][0],y[o][1]);t.FnCatch=[]}else 1==t.base.auto&&te()}function se(e,r){t.status.FnName="$registerSuperProperty",C();var a=m.toObj(e,r);M(a);var n=f.getLocal("ARKSUPER")||{},s=m.objMerge(n,a);f.setLocal("ARKSUPER",s),t.status.successCode="20002",t.status.value=JSON.stringify(a),S()}function oe(e){t.status.FnName="$unregisterSuperProperty",C();M(e);var r=f.getLocal("ARKSUPER")||{};if(!r.hasOwnProperty(e))return t.status.successCode="20011",t.status.value=e,void S();delete r[e],f.setLocal("ARKSUPER",r),t.status.successCode="20003",t.status.value=e,S()}function ue(e,r){t.status.FnName="$registerSuperProperties",C();var a=m.toObj(e,r);M(a);var n=f.getLocal("ARKSUPER")||{},s=m.objMerge(n,a);f.setLocal("ARKSUPER",s),t.status.successCode="20002",t.status.value=JSON.stringify(a),S()}function ie(e){t.status.FnName="$getSuperProperty",C();M(e,"$getSuperProperty",!0);var r=f.getLocal("ARKSUPER")||{},a=r[e];return r.hasOwnProperty(e)?(t.status.successCode="20010",t.status.value=a,t.status.key=e,S(),a):(t.status.successCode="20009",t.status.key=e,S(),"")}function ce(){t.status.FnName="$getSuperProperties",C();var e=f.getLocal("ARKSUPER")||{};return t.status.successCode="20010",t.status.value=JSON.stringify(e),S(),e}function le(){t.status.FnName="$clearSuperProperties",C(),f.setLocal("ARKSUPER",{}),t.status.successCode="20004",S()}function pe(e){t.status.FnName="$alias",C();if(M(e,"$alias",!0,"aliasId")){f.setLocal("ARK_LOGINID",e);var r=j(B("$alias"));r=m.delEmpty(r),1!=t.base.autoProfile?X(r):(f.setLocal("POSTDATA",m.objInArray(r)),re("alias"))}}function ye(e,r){t.status.FnName=e,C(),M(e,"$track",!0),arguments.length>1&&M(r);var a=j(B("$track")),n=f.getLocal("ARKSUPER")||{};a.xcontext=m.delEmpty(a.xcontext),Object.keys(n).length>0?(n=m.objMerge(n,r),a.xcontext=m.objMerge(a.xcontext,n)):a.xcontext=m.objMerge(a.xcontext,r),X(a)}function ge(e,r){t.status.FnName="$identify",C(),M(e,"$alias",!0,"distinctId")&&(!0===r&&f.setLocal("ARK_TRACK_LOGIN",!0),f.setLocal("ARK_TRACKID",e),t.status.successCode="20002",t.status.value=e,S())}function ve(){var e=m.format(new Date,"yyyy-MM-dd hh:mm:ss.SSS");(t.base.allowTimeCheck&&t.base.logflag&&(e=+new Date+(f.getLocal("ANSSERVERTIME")?Number(f.getLocal("ANSSERVERTIME")):0)),e=m.format(new Date(e),"yyyy-MM-dd hh:mm:ss.SSS"),C(),$.removeARKId(),$.removeTrackId(),$.removeLoginId(),$.removeIdentifyId(),le(),function(e){if(!(e=e||!1)){var r=t.base;for(var a in r){if("Object"!==m.paramType(r[a]))if("$debug"===a||"appid"===a||"uploadURL"===a)Storage.getLocal("ANS"+a.toUpperCase())!==r[a]&&(e=!0),e&&Storage.setLocal("ANS"+a.toUpperCase(),r[a])}}if(e){if(f.removeLocal("ARKSUPER"),f.removeData("STARTUP"),f.setLocal("FRISTDAY",m.format(new Date,"yyyyMMdd")),t.base.allowTimeCheck&&t.base.logflag){var n=m.format(new Date(+new Date+(f.getLocal("ANSSERVERTIME")?Number(f.getLocal("ANSSERVERTIME")):0)),"yyyyMMdd");f.setLocal("FRISTDAY",n)}f.setLocal("FRISTIME",!0),f.removeLocal("POSTDATA"),f.removeLocal("ANSSERVERTIME"),f.removeLocal("ARKFRISTPROFILE"),f.removeLocal("ARKFRISTPROFILESEND")}}(!0),_.setId(),!0===t.base.autoProfile)&&ee({$reset_time:e});t.status.FnName="$reset",t.status.successCode="20005",S()}function fe(e,r){t.status.FnName="$profile_set",C();var a=m.toObj(e,r);M(a);var n=j(B("$profile_set"));(n=m.delEmpty(n)).xcontext=m.objMerge(n.xcontext,a),X(n)}function me(e,r){t.status.FnName="$profile_increment",C();var a=m.toObj(e,r);M(a,"$profile_increment");var n=j(B("$profile_increment"));(n=m.delEmpty(n)).xcontext=m.objMerge(n.xcontext,a),X(n)}function he(e,r){t.status.FnName="$profile_append",C();var a=m.toObj(e,r);M(a);var n=j(B("$profile_append"));(n=m.delEmpty(n)).xcontext=m.objMerge(n.xcontext,a),X(n)}function de(e){t.status.FnName="$profile_unset",C();var r=m.toObj(e,"");M(r,"$profile_unset");var a=j(B("$profile_unset"));(a=m.delEmpty(a)).xcontext=m.objMerge(a.xcontext,r),X(a)}function Se(){t.status.FnName="$profile_delete",C();var e=j(B("$profile_delete"));X(e=m.delEmpty(e))}var Te=y.Fetch.request,be=function(){return new Promise((function(e){if(C(),!t.base.allowTimeCheck)return e();var r=t.base.uploadURL;r=r.split("up")[0],Te({url:r+"configure",method:"GET",success:function(r){e(r);var a=r.header||r.headers;if(a&&a.Date){var n=+new Date,s=a.Date,o=t.base.maxDiffTimeInterval;o<0&&(o=30),s&&o<Math.abs((+new Date(s)-n)/1e3)&&(t.base.logflag||(f.setLocal("ANSSERVERTIME",+new Date(s)-n),t.status.successCode="20013",t.status.value=m.format(new Date(s),"yyyy-MM-dd hh:mm:ss +SSS"),t.status.key=m.format(new Date(n),"yyyy-MM-dd hh:mm:ss +SSS"),t.status.FnName=(+new Date(s)-n)/1e3+"s",S(),t.base.logflag=!0))}},fail:function(t){e(t)}})})).catch((function(e){}))},Ae=y.System.systemPromise,_e=y.Network.netWorkPromise;function $e(e,r){var a=$.getId(),n=y.Router.getPath();"Object"!==m.paramType(e)&&(e={path:n}),Promise.all([Ae(),_e(),be(),f.initLocalData()]).then((function(e){var s={$share_id:a,$share_level:Number(t.base.$share_level)+1,$share_path:n};"Object"===m.paramType(r)&&(s=m.objMerge(s,r)),ye("$share",s)}));var s="share_id="+a+"&share_level="+(Number(t.base.$share_level)+1)+"&share_path="+encodeURIComponent(n);return e.path.indexOf("?")>-1?e.path=e.path+"&"+s:e.path=e.path+"?"+s,e}function ke(e){if(C(),t.status.FnName="$appProperty","Object"!=m.paramType(e)||!e)return t.status.errorCode="600016",t.status.value=JSON.stringify(e),void T();if(M(e),t.base.appProperty)for(var r in e)t.base.appProperty[r]=e[r];else t.base.appProperty=e;t.status.successCode="20002",t.status.value=JSON.stringify(e),S()}function Re(){return $.getTrackId()||$.jsId()}function Le(){t.status.FnName="getPresetProperties",C();var e=j(B("$getPresetProperties"));return delete(e=m.delEmpty(e)).xcontext.$is_login,t.status.successCode="20010",t.status.value=JSON.stringify(e.xcontext),S(),e.xcontext}var Ee=y.System.systemPromise,Ie=y.Network.netWorkPromise,Oe=!0,Pe=[];function De(e,r,a){return function(){var n=arguments;1!=Oe||0!==Object.keys(t.system.system).length&&0!==Object.keys(t.system.netWork).length?!r&&1!=t.isStartUp||1!=Oe?1==a?t.FnSuperCatch.push([e,arguments]):1==Oe&&!1===a?Pe.push([e,arguments]):t.FnCatch.push([e,arguments]):e.apply(e,arguments):Promise.all([Ee(),Ie(),be(),f.initLocalData()]).then((function(s){Oe=!0,t.system.system=s[0],t.system.netWork=s[1],Pe.length>0&&(Pe[0][0](Pe[0][1]),Pe=[]),a&&1!=t.isStartUp?t.FnSuperCatch.push([e,n]):r||1==t.isStartUp?e.apply(e,n):t.FnCatch.push([e,n])}))}}var Ne=function e(){i(this,e),this.appStart=De(ne,!0,!1),this.startUp=De(ne,!0),this.pageView=De(te,!1),this.registerSuperProperty=De(se,!1,!0),this.unRegisterSuperProperty=De(oe,!1,!0),this.registerSuperProperties=De(ue,!1,!0),this.getSuperProperty=ie,this.getSuperProperties=ce,this.clearSuperProperties=De(le,!1,!0),this.alias=De(pe,!0),this.track=De(ye,!1),this.identify=De(ge,!1,!0),this.reset=ve,this.profileSet=De(fe,!1),this.profileSetOnce=De(ee,!1),this.profileIncrement=De(me,!1),this.profileAppend=De(he,!1),this.profileUnset=De(de,!1),this.profileDelete=De(Se,!1),this.share=$e,this.appProperty=ke,this.getDistinctId=Re,this.getPresetProperties=Le},we=y.getPublicApp;t.isStartUp=!0,t.base.auto=!1;var Fe=new(function(e){function r(){return i(this,r),l(this,(r.__proto__||Object.getPrototypeOf(r)).call(this))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,Ne),c(r,[{key:"appkey",set:function(e){return C(),"String"!==m.paramType(e)?(t.status.FnName="appkey",t.status.errorCode="60001",t.status.key=e,void T()):""==e?(t.status.FnName="appkey",t.status.errorCode="60006",void T()):(t.status.FnName="appkey",t.status.successCode="20002",t.status.value=e,S(),t.status.successCode="20007",t.status.value=t.base.$lib_version,S(),void(t.base.appid=e))},get:function(){return t.base.appid}},{key:"debugMode",set:function(e){C(),t.base.$debug=e},get:function(){return t.base.$debug}},{key:"uploadURL",set:function(e){return C(),e?m.checkURL(e)?("/"!==e.charAt(e.length-1)&&(e+="/"),t.base.uploadURL=e+"up",t.status.successCode="20008",t.status.value=e,void S()):(t.status.errorCode="600011",t.status.key="uploadURL",t.status.value=e,void T()):(t.status.errorCode="60007",void T())},get:function(){return t.base.uploadURL}},{key:"autoProfile",set:function(e){if(C(),"Boolean"!==m.paramType(e))return t.status.key="autoProfile",t.status.errorCode="60003",t.status.value=e,void T();t.base.autoProfile=e},get:function(){return t.base.autoProfile}},{key:"encryptType",set:function(e){if(C(),"Number"!==m.paramType(e))return t.status.key="encryptType",t.status.errorCode="60002",t.status.value=e,void T();t.base.encryptType=e},get:function(){return t.base.encryptType}},{key:"autoShare",set:function(e){if(C(),"Boolean"!==m.paramType(e))return t.status.key="autoShare",t.status.errorCode="60003",t.status.value=e,void T();t.base.autoShare=e},get:function(){return t.base.autoShare}},{key:"allowTimeCheck",set:function(e){if(C(),"Boolean"!==m.paramType(e))return t.status.key="allowTimeCheck",t.status.errorCode="60003",t.status.value=e,void T();t.base.allowTimeCheck=e},get:function(){return t.base.allowTimeCheck}},{key:"maxDiffTimeInterval",set:function(e){if(C(),"Number"!==m.paramType(e))return t.status.key="maxDiffTimeInterval",t.status.errorCode="60002",t.status.value=e,void T();t.base.maxDiffTimeInterval=e},get:function(){return t.base.maxDiffTimeInterval}}]),r}());delete Fe.startUp;var xe=we();xe&&(xe.AnalysysAgent=Fe);export default Fe;
