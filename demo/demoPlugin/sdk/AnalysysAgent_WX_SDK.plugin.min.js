"use strict";var e=wx;var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n={};function r(e){var r=void 0===e?"undefined":t(e);return"object"===r?n[Object.prototype.toString.call(e)]:r}function o(e){return"number"===r(e)}function a(e){return"string"===r(e)}function i(e){return Array.isArray(e)}function u(e){return"boolean"===r(e)}function c(e){return"object"===r(e)}function s(e){return"function"===r(e)}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */["Boolean","Number","String","Function","Array","Date","RegExp","Object","Error"].map((function(e){n["[object "+e+"]"]=e.toLowerCase()}));var f=function(){return(f=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function p(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var a=arguments[t],i=0,u=a.length;i<u;i++,o++)r[o]=a[i];return r}var l=["$lib","$lib_version","$platform","$first_visit_time","$debug","$is_login"],d=["$appid","$appname","$lib","$lib_version","$platform","$is_login","$debug"],g=["$brand","$model","$os","$os_version","$browser","$browser_version","$network","$screen_width","$screen_height","$language","$time_zone","$session_id","$is_time_calibrated"],h=["$utm_campaign_id","$utm_campaign","$utm_medium","$utm_source","$utm_content","$utm_term"],m={$startup:p(g,h,["$is_first_day","$is_first_time","$scene"]),$end:p(g,["$duration","$is_first_day"]),$pageview:p(g,h,["$is_first_day","$referrer","$scene","$startup_time","$url","$url_domain","$share_id","$share_path","$share_level"]),page_close:p(g,["$url","$referrer","$url_domain","pagestaytime"]),$alias:["$original_id"],$share:g,$user_click:p(g,["$element_content","$element_id","$element_type","$element_name","$element_function","$url","$url_path","$is_first_day"]),track:g,$getPresetProperties:p(g,["$first_visit_time"]),$profile_set_once:["$first_visit_time","$first_visit_language"]};function v(e){return"{FN}:Property value invalid of key[{KEY}], support type: "+e+"\n\tcurrent value: {VALUE}\n\tcurrent type: {VALUETYPE}"}function y(e){return"{FN}:The length of the property key (string[{KEY}]) needs to be "+e+" !"}var _={common:"",60001:"{FN}:Property key invalid, support type: String \ncurrent key:{KEY}\ncurrent keyType:{KEYTYPE}",60002:v("Number"),60003:v("Boolean"),60005:"{FN}:The length of the property[{KEY}] value (string[{VALUE}]) needs to be 1-255 !",60006:"Please set appkey first.",60007:"Please set uploadURL first.",60008:"Send message failed.",60009:y("1-125"),600010:y("1-99"),600012:"{FN}:Property key invalid, nonsupport value: "+l.join("/")+" \ncurrent KEY:{KEY}",600016:"{FN}: Property value invalid, support type: Object \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}",600020:"DebugMode only can be 0,1,2",600022:"{FN}: 属性[{KEY}]的值[{VALUE}]无效，支持类型：String/Number/Boolean/string[]，若为字符串，长度范围1-255字符",600023:"{FN}: 属性key的名称[{KEY}]无效，属性key是以字母开头的字符串，由字母、数字、下划线组成，字母不区分大小写，不支持乱码、中文、空格等，长度范围1-99字符；",600025:"{FN}: 事件名称[{VALUE}]无效，事件ID必须字母或者$开头，可包含数字字母与下划线，1-99个字符；"},$={common:"",20001:"Send message success",20002:"{FN}: set success ({VALUE})",20003:"{FN}:({VALUE}) delete success",20004:"{FN}:clear success",20005:"{FN}:reset success",20006:"set appkey success. current appkey : {VALUE}",20007:"Init Analysysdata WeChat sdk success, version : 5.0.5",20008:"set uploadURL success. current uploadURL : {VALUE}",20009:"{FN}:[{KEY}] : get failed",20010:"{FN}:[{KEY}] : get success. ({VALUE})",20011:"{FN}:({VALUE}) delete failed",20012:"Send Message to Server: {KEY} \ndata:{VALUE}",20013:"收到服务器的时间: {VALUE} \n本地时间: {KEY} \n时间相差:  {FN} \n数据将会进行时间校准",20014:"aliasID already bound"};function A(e){if(1===ae.debugMode||2===ae.debugMode){var t=($[e.code]||$.common).replace(/{FN}/,e.fn).replace(/{KEY}/g,e.key||"").replace(/{VALUE}/g,JSON.stringify(e.value));console.log(t)}}function S(e,t){var n=(_[e.code]||_.common).replace(/{FN}/g,e.fn||"").replace(/{KEY}/g,JSON.stringify(e.key||"")).replace(/{VALUE}/g,JSON.stringify(e.value)).replace(/{VALUETYPE}/g,r(e.value)).replace(/{KEYTYPE}/g,r(e.key));(1===ae.debugMode||2===ae.debugMode||t)&&console.warn(n)}function E(e,t,n){if(void 0===t&&(t=255),void 0===n&&(n=1),!a(e))return!1;var r=e.length;return r<t&&r>=n}function R(e,t){var n=!0;return E(e,99)?l.indexOf(e)>-1?(n=!1,t&&(t.code=600012)):n=/^[$a-zA-Z][a-zA-Z0-9_$]{0,}$/.test(e):n=!1,t&&t.fn&&!n&&S(t),n}function x(e,t){var n=!1;if(a(e)||o(e)||i(e)||u(e))if(n=!0,a(e))E(e,255)||(n=!1);else if(i(e)){n=e.some((function(e){return E(e,255)}))}return t&&t.fn&&t.key&&!n&&S(t),n}function T(e,t){var n={};if(e){if(!c(e))return S({code:600016,fn:t,value:e}),{};for(var r in e){var o=e[r];R(r,{code:600023,fn:t,key:r})&&x(o,{code:600022,fn:t,key:r,value:o})&&(n[r]=o)}}return n}var w,P,D=function(t,n){void 0===t&&(t="FZ_STROAGE"),void 0===n&&(n=P),e.setStorageSync(t,n)};function b(e,t){function n(e,t){return e<<t|e>>>32-t}function r(e,t){var n,r,o,a,i;return o=2147483648&e,a=2147483648&t,i=(1073741823&e)+(1073741823&t),(n=1073741824&e)&(r=1073741824&t)?2147483648^i^o^a:n|r?1073741824&i?3221225472^i^o^a:1073741824^i^o^a:i^o^a}function o(e,t,o,a,i,u,c){return e=r(e,r(r(function(e,t,n){return e&t|~e&n}(t,o,a),i),c)),r(n(e,u),t)}function a(e,t,o,a,i,u,c){return e=r(e,r(r(function(e,t,n){return e&n|t&~n}(t,o,a),i),c)),r(n(e,u),t)}function i(e,t,o,a,i,u,c){return e=r(e,r(r(function(e,t,n){return e^t^n}(t,o,a),i),c)),r(n(e,u),t)}function u(e,t,o,a,i,u,c){return e=r(e,r(r(function(e,t,n){return t^(e|~n)}(t,o,a),i),c)),r(n(e,u),t)}function c(e){var t,n="",r="";for(t=0;t<=3;t++)n+=(r="0"+(e>>>8*t&255).toString(16)).substr(r.length-2,2);return n}var s,f,p,l,d,g,h,m,v,y;for(s=function(e){for(var t,n=e.length,r=n+8,o=16*((r-r%64)/64+1),a=Array(o-1),i=0,u=0;u<n;)i=u%4*8,a[t=(u-u%4)/4]=a[t]|e.charCodeAt(u)<<i,u++;return i=u%4*8,a[t=(u-u%4)/4]=a[t]|128<<i,a[o-2]=n<<3,a[o-1]=n>>>29,a}(e),h=1732584193,m=4023233417,v=2562383102,y=271733878,f=0;f<s.length;f+=16)p=h,l=m,d=v,g=y,h=o(h,m,v,y,s[f+0],7,3614090360),y=o(y,h,m,v,s[f+1],12,3905402710),v=o(v,y,h,m,s[f+2],17,606105819),m=o(m,v,y,h,s[f+3],22,3250441966),h=o(h,m,v,y,s[f+4],7,4118548399),y=o(y,h,m,v,s[f+5],12,1200080426),v=o(v,y,h,m,s[f+6],17,2821735955),m=o(m,v,y,h,s[f+7],22,4249261313),h=o(h,m,v,y,s[f+8],7,1770035416),y=o(y,h,m,v,s[f+9],12,2336552879),v=o(v,y,h,m,s[f+10],17,4294925233),m=o(m,v,y,h,s[f+11],22,2304563134),h=o(h,m,v,y,s[f+12],7,1804603682),y=o(y,h,m,v,s[f+13],12,4254626195),v=o(v,y,h,m,s[f+14],17,2792965006),h=a(h,m=o(m,v,y,h,s[f+15],22,1236535329),v,y,s[f+1],5,4129170786),y=a(y,h,m,v,s[f+6],9,3225465664),v=a(v,y,h,m,s[f+11],14,643717713),m=a(m,v,y,h,s[f+0],20,3921069994),h=a(h,m,v,y,s[f+5],5,3593408605),y=a(y,h,m,v,s[f+10],9,38016083),v=a(v,y,h,m,s[f+15],14,3634488961),m=a(m,v,y,h,s[f+4],20,3889429448),h=a(h,m,v,y,s[f+9],5,568446438),y=a(y,h,m,v,s[f+14],9,3275163606),v=a(v,y,h,m,s[f+3],14,4107603335),m=a(m,v,y,h,s[f+8],20,1163531501),h=a(h,m,v,y,s[f+13],5,2850285829),y=a(y,h,m,v,s[f+2],9,4243563512),v=a(v,y,h,m,s[f+7],14,1735328473),h=i(h,m=a(m,v,y,h,s[f+12],20,2368359562),v,y,s[f+5],4,4294588738),y=i(y,h,m,v,s[f+8],11,2272392833),v=i(v,y,h,m,s[f+11],16,1839030562),m=i(m,v,y,h,s[f+14],23,4259657740),h=i(h,m,v,y,s[f+1],4,2763975236),y=i(y,h,m,v,s[f+4],11,1272893353),v=i(v,y,h,m,s[f+7],16,4139469664),m=i(m,v,y,h,s[f+10],23,3200236656),h=i(h,m,v,y,s[f+13],4,681279174),y=i(y,h,m,v,s[f+0],11,3936430074),v=i(v,y,h,m,s[f+3],16,3572445317),m=i(m,v,y,h,s[f+6],23,76029189),h=i(h,m,v,y,s[f+9],4,3654602809),y=i(y,h,m,v,s[f+12],11,3873151461),v=i(v,y,h,m,s[f+15],16,530742520),h=u(h,m=i(m,v,y,h,s[f+2],23,3299628645),v,y,s[f+0],6,4096336452),y=u(y,h,m,v,s[f+7],10,1126891415),v=u(v,y,h,m,s[f+14],15,2878612391),m=u(m,v,y,h,s[f+5],21,4237533241),h=u(h,m,v,y,s[f+12],6,1700485571),y=u(y,h,m,v,s[f+3],10,2399980690),v=u(v,y,h,m,s[f+10],15,4293915773),m=u(m,v,y,h,s[f+1],21,2240044497),h=u(h,m,v,y,s[f+8],6,1873313359),y=u(y,h,m,v,s[f+15],10,4264355552),v=u(v,y,h,m,s[f+6],15,2734768916),m=u(m,v,y,h,s[f+13],21,1309151649),h=u(h,m,v,y,s[f+4],6,4149444226),y=u(y,h,m,v,s[f+11],10,3174756917),v=u(v,y,h,m,s[f+2],15,718787259),m=u(m,v,y,h,s[f+9],21,3951481745),h=r(h,p),m=r(m,l),v=r(v,d),y=r(y,g);return 32===t?c(h)+c(m)+c(v)+c(y):c(m)+c(v)}function O(){P={ARKAPPID:ae.appkey,ARKDEBUG:ae.debugMode,ARKUPLOADURL:ae.uploadURL,ARKFRISTPROFILE:"",ARKFRISTPROFILESEND:!1,ARKSUPER:{},ARK_ID:K(),FRISTDAY:0,POSTDATA:[],SEESIONDATE:0,SEESIONID:""},D()}function I(){var t,n=(void 0===t&&(t="FZ_STROAGE"),e.getStorageSync(t));if(n){var r=n.ARKDEBUG;ae.appkey!==n.ARKAPPID||1===r&&r!==ae.debugMode||n.ARKUPLOADURL!==ae.uploadURL?O():P=n}else O();new Promise((function(t,n){e.getSystemInfo({success:function(e){w=e,t(e)}})}))}function U(e,t){P[e]=t,D()}function k(){return P.ARK_LOGINID||P.ARK_TRACKID||P.ARK_ID}function K(){var e=(new Date).getTime()+""+1e4*Math.random();return"WX"+b(e,32)+b(e,32).slice(0,4)}function L(){var e=+new Date;P.SEESIONDATE=e,P.SEESIONID=b("WX"+e+Math.random(),16),D()}function N(e){return e?P.ARKSUPER[e]:P.ARKSUPER}function F(e){e&&P.ARKSUPER[e]&&delete P.ARKSUPER[e],void 0===e&&(P.ARKSUPER={}),D()}function M(e){P.POSTDATA||(P.POSTDATA=[]),P.POSTDATA.length<500&&(P.POSTDATA.push(e),D())}function j(e){var t={};e.forEach((function(e){t[e.xwhen]=1}));for(var n=P.POSTDATA.length-1;n>=0;n--){var r=P.POSTDATA[n];t[r.xwhen]&&P.POSTDATA.splice(n,1)}D()}var C={networkType:""},V=!1;e.onNetworkStatusChange((function(e){C.networkType=e.networkType}));var Y=function(t,n){return new Promise((function(r,o){e.request(f(f({},t),{success:function(e){var t=e.data;n&&n(e),!t||200!==t.code&&"Status: OK"!==t?o(t):r(t)},fail:function(e){n&&n(e),o(e)}}))}))};function z(e,t){var n=e.getTimezoneOffset(),r={"M+":(e=new Date(e.getTime()+60*n*1e3+288e5)).getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),"S+":e.getMilliseconds()};for(var o in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),r)new RegExp("("+o+")").test(t)&&(t=t.replace(RegExp.$1,3==RegExp.$1.length?(""+r[o]).length<3?("00"+r[o]).substr(("00"+r[o]).length-3,("00"+r[o]).length):r[o]:("00"+r[o]).substr((""+r[o]).length)));return t}var B=0,G=!1,Z=0;function W(){return+new Date+Z}var H={isBeforeStartUp:!1,isAfterStartUp:!1,isBeforePageView:!1,isAfterPageView:!1};function q(t,n,r){if(!H[t]&&e.AnalysysAgent){var o=e.AnalysysAgent[n];s(o)&&o(r),H[t]=!0}}var J=function(t){if(e.AnalysysAgent){var n=e.AnalysysAgent.onReady;s(n)&&n(t)}},X=function(e){q("isBeforeStartUp","onBeforeStartUp",e)},Q=function(e){q("isAfterStartUp","onAfterStartUp",e)},ee=[],te=[],ne=function(){return G&&V};function re(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(ne())return e.apply(e,n);var o={fn:e,arg:n,xwhen:W()};t?te.push(o):ee.push(o)}}var oe={appkey:{verify:[E]},uploadURL:{verify:[E]},debugMode:{verify:[o]},autoStartUp:{verify:[u]},autoEnd:{verify:[u]},auto:{verify:[u]},autoProfile:{verify:[u]},encryptType:{verify:[o]},autoShare:{verify:[u]},allowTimeCheck:{verify:[u]},maxDiffTimeInterval:{verify:[o,function(e){return!(e<=0)}]},autoTrack:{verify:[u]},autoCompleteURL:{verify:[u]},autoPageViewDuration:{verify:[u]},sendDataTimeout:{verify:[o]},$appname:{verify:[a]},$appid:{verify:[a]}},ae={appkey:"",uploadURL:"",debugMode:0,auto:!0,autoStartUp:!0,autoEnd:!0,autoProfile:!0,encryptType:0,autoShare:!1,allowTimeCheck:!1,maxDiffTimeInterval:30,autoTrack:!1,autoCompleteURL:!0,autoPageViewDuration:!1,sendDataTimeout:1e4,$appid:"",$appname:""};function ie(t,n){return void 0===n&&(n=!0),new Promise((function(r,o){n&&Object.keys(t).forEach((function(e){var n=oe[e];if(n&&n.verify.length){for(var r=t[e],o=!0,a=0;a<n.verify.length;a++){if(!(0,n.verify[a])(r)){o=!1;break}}o?ae[e]=r:S({key:e,code:60002,value:r},!0)}}));I(),Promise.all([new Promise((function(t,n){e.getNetworkType({success:function(e){C=e,V=!0,t(e)},fail:function(){V=!0,t(C)}})})),new Promise((function(e){if(!ae.allowTimeCheck||B)return G=!0,e(B);Y({url:ae.uploadURL,timeout:500},(function(t){if(t&&t.header&&t.header.Date){var n=+new Date;B=+new Date(t.header.Date);var r=Math.abs((B-n)/1e3);r>ae.maxDiffTimeInterval&&(Z=B-n,A({code:20013,value:z(new Date(B),"yyyy-MM-dd hh:mm:ss +SSS"),key:z(new Date(n),"yyyy-MM-dd hh:mm:ss +SSS"),fn:r+"s"}))}G=!0,e(B)}))}))]).then((function(){ne()&&(J(ae),te&&ee.length&&(te.forEach((function(e){return e.fn.apply(e.fn,e.arg)})),te=[]),ee&&ee.length&&(ee.forEach((function(e){return e.fn.apply(e.fn,e.arg)})),ee=[])),r(ae)}))}))}function ue(e,t){var n,r=T(e,t);Object.keys(r).length&&(n=r,P.ARKSUPER=Object.assign({},P.ARKSUPER,n),D(),A({fn:t,code:20002,value:e}))}function ce(e,t){var n;R(e,{code:600023,fn:"$registerSuperProperty",key:e})&&ue(((n={})[e]=t,n),"$registerSuperProperty")}function se(e){ue(e,"$registerSuperProperties")}function fe(e){return N(e)}function pe(){return N()}function le(e){F(e),A({fn:"$unRegisterSuperProperty",code:20003,value:e})}function de(){F(),A({fn:"$clearSuperProperties",code:20004})}var ge=[],he=0;function me(t){var n=p(P.POSTDATA);if(!ge.length&&n.length){ge=n.splice(0,20);var r={url:ae.uploadURL+"/up?appid="+ae.appkey,data:ge,encryptType:ae.encryptType};if(A({key:r.url,value:ge,code:20012}),1===ae.debugMode)return j(ge),void(ge=[]);e.AnalysysAgent.encrypt&&s(e.AnalysysAgent.encrypt.uploadData)&&(r=e.AnalysysAgent.encrypt.uploadData(r)),e.AnalysysModal&&e.AnalysysModal(ge),Y({url:r.url,method:"POST",data:r.data,timeout:ae.sendDataTimeout}).then((function(e){j(ge),ge=[],me(),t&&t(),A({code:20001}),he=0})).catch((function(e){ge=[],S({code:60008}),he<3&&(me(),he++)}))}}function ve(e,t){ae.appkey?ae.uploadURL?(M(e),me(t)):S({code:60007}):S({code:60006})}var ye={scene:null,utm_campaign_id:"",utm_source:"",utm_medium:"",utm_term:"",utm_content:"",utm_campaign:"",share_id:"",share_level:"",share_path:""};function _e(){var e=getCurrentPages();return e&&e.length?e[e.length-1]:{}}function $e(e){var t=getCurrentPages();if(t.length){var n=t[t.length-1],r=n.route;if(e){var o=n.options,a=Object.keys(o);if(a.length){var i="";return a.forEach((function(e,t){t&&(i+="&"),i+=e+"="+o[e]})),r+"?"+i}}return r}return""}function Ae(e){return null==e?"":c(e)?JSON.stringify(e):e+""}var Se={};function Ee(e){Se.element_function=e.function||"",Se.element_id=e.id||"",Se.element_content=e.content||"",Se.element_type=e.type||"",Se.element_name=e.name||""}var Re={xwho:function(){return k()},xwhen:function(){return W()},xwhat:function(e){return e},$lib:function(){return"WeChat"},$lib_version:function(){return"5.0.5"},$platform:function(){return"WeChat"},$debug:function(){return ae.debugMode},$is_login:function(){return!!P.ARK_LOGINID},$session_id:function(){return e=new Date,t=e.getTime(),n=e.getTimezoneOffset(),r=new Date(t+60*n*1e3+288e5).getDate(),o=P.SEESIONDATE?new Date(P.SEESIONDATE+60*n*1e3+288e5).getDate():0,(!P.SEESIONID||!P.SEESIONDATE||t-P.SEESIONDATE>18e5||o!==r)&&L(),P.SEESIONID;var e,t,n,r,o},$screen_width:function(){return w.screenWidth},$screen_height:function(){return w.screenHeight},$os:function(){var e=w.system;return e?e.split(" ")[0]:""},$browser:function(){return""},$brand:function(){return w.brand},$browser_version:function(){return w.version},$os_version:function(){return w.system?w.system.split(" ")[1]:""},$model:function(){return w.model},$language:function(){return w.language},$network:function(){return C.networkType},$time_zone:function(){return"GMT"+(e=(new Date).getTimezoneOffset(),n=e%60,r="-",((t=e/60)<=0||n<0)&&(r="+",t=-t,n<0&&(n=-n)),1==(t+="").length&&(t="0"+t),1==(n+="").length&&(n="0"+n),r+t+":"+n);var e,t,n,r},$startup_time:function(){return""},$is_first_time:function(){return!P.ARKFRISTPROFILE},$is_first_day:function(){var e=P.ARKFRISTPROFILE;return!e||z(new Date(W()),"yyyyMMdd")===z(new Date(e),"yyyyMMdd")},$first_visit_time:function(){return P.ARKFRISTPROFILE},$first_visit_language:function(){return w.language},$original_id:function(){return P.ARK_TRACKID||P.ARK_ID},$is_time_calibrated:function(){return!(!ae.allowTimeCheck||!Z)},$scene:function(){return ye.scene.toString()},$referrer:function(){return function(){var e=getCurrentPages();if(e&&e.length){var t=e[e.length-2];if(t)return t.route}return ye.scene+""}()},$url:function(){return $e(ae.autoCompleteURL)},$url_path:function(){return $e()},$url_domain:function(){return $e()},$utm_campaign_id:function(){return ye.utm_campaign_id},$utm_source:function(){return ye.utm_source},$utm_medium:function(){return ye.utm_medium},$utm_term:function(){return ye.utm_term},$utm_content:function(){return ye.utm_content},$utm_campaign:function(){return ye.utm_campaign},$share_id:function(){return ye.share_id},$share_level:function(){return null==(e=ye.share_level)||""===e?"":e>=-1/0?e-0:"";var e},$share_path:function(){return ye.share_path},$element_content:function(){return Ae(Se.element_content)},$element_id:function(){return Ae(Se.element_id)},$element_type:function(){return Ae(Se.element_type)},$element_function:function(){return Ae(Se.element_function)},$element_name:function(){return Ae(Se.element_name)},$appid:function(){return ae.$appid},$appname:function(){return ae.$appname}};function xe(e){var t={appid:ae.appkey,xwho:Re.xwho(),xwhat:Re.xwhat(e),xwhen:Re.xwhen(),xcontext:{}},n=m[e];function r(e){var n=Re[e];if(n){var r=n();""!==r&&null!=r&&(t.xcontext[e]=r)}}return d.forEach((function(e){r(e)})),n&&n.forEach((function(e){r(e)})),t}var Te={};function we(){return Te}var Pe={startup:{state:!1,xwhen:0},pageview:{xwhen:0,state:{}},timeEvent:{}};function De(e,t){var n={},r={};E(e)&&(n.$title=e,t&&(r=T(t,"$pageview"))),n=Object.assign({},r,n);var o=xe("$pageview");Pe.pageview.xwhen=o.xwhen,o.xcontext=Object.assign({},o.xcontext,N(),we(),n),ve(o)}function be(){var e=xe("page_close");if(!e.xcontext||e.xcontext.$url){var t={pagestaytime:e.xwhen-Pe.pageview.xwhen};e.xcontext=Object.assign({},e.xcontext,N(),we(),t),Te={},ve(e)}}function Oe(e,t,n){var r=xe(e),o={};c(t)&&(o=t),E(t)&&x(n)&&(o[t]=n),r.xcontext=Object.assign({},r.xcontext,T(o,e)),ve(r)}function Ie(e,t){Oe("$profile_set_once",e,t)}function Ue(e,t){Oe("$profile_set",e,t)}function ke(e,t){Oe("$profile_increment",e,t)}function Ke(e,t){Oe("$profile_append",e,t)}function Le(e){var t,n=xe("$profile_unset");R(e)?n.xcontext=Object.assign({},n.xcontext,((t={})[e]="",t)):S({code:600010,fn:"profileUnset",key:e}),ve(n)}function Ne(){ve(xe("$profile_delete"))}function Fe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=xe("$startup");Pe.startup.xwhen=n.xwhen,P.ARKFRISTPROFILE||U("ARKFRISTPROFILE",z(new Date(n.xwhen),"yyyy-MM-dd hh:mm:ss.SSS")),n.xcontext=Object.assign({},n.xcontext,N()),2===e.length&&"onShow"===e[1]&&X(n),ve(n,(function(){Q(n)})),ae.autoProfile&&!P.ARKFRISTPROFILESEND&&(Ie(),U("ARKFRISTPROFILESEND",!0))}function Me(e){if(!E(e))return S({code:60005,value:e,fn:"alias"}),!1;if(e!==k()){U("ARK_LOGINID",e),A({code:20014});var t=xe("$alias");!0===ae.autoProfile?(M(t),Ie()):ve(t)}else A({code:20014})}function je(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(e.length>0&&e[0]&&c(e[0])&&("tap"==e[0].type||"longtap"==e[0].type||"longpress"==e[0].type)){var n=e[1];try{var r=e[0].target.dataset.eventOpts;r&&(n=r[0][1][0][0])}catch(e){console.log(e)}var o=e[0]&&e[0].currentTarget&&e[0].currentTarget.dataset?e[0].currentTarget.dataset:{};Ee(Object.assign(o,{function:n}));var a=xe("$user_click");a.xcontext=Object.assign({},a.xcontext,N(),we()),ve(a)}}function Ce(e){Ee({function:"onTabItemTap",name:e.text});var t=xe("$user_click");t.xcontext=Object.assign({},t.xcontext,N(),we()),ve(t)}function Ve(){P.ARK_ID=K(),P.ARK_TRACKID="",P.ARK_LOGINID="",P.ARKSUPER={},P.ARKFRISTPROFILE="",P.ARKFRISTPROFILESEND=!1,L(),!0===ae.autoProfile&&Ie({$reset_time:z(new Date,"yyyy-MM-dd hh:mm:ss.SSS")}),A({fn:"$reset",code:20005})}function Ye(e){Pe.timeEvent[e]=W()}function ze(){var e=xe("$getPresetProperties");return delete e.xcontext.$is_login,A({code:20010,fn:"getPresetProperties",value:e.xcontext}),e.xcontext}function Be(e,t){if(/^[a-zA-Z$][a-zA-Z0-9_]{1,99}$|^[a-zA-Z]$/.test(e)){var n=xe("track");n.xwhat=e,n.xcontext=Object.assign({},n.xcontext,N(),T(t,e)),Pe.timeEvent[e]&&(n.xcontext.$duration=W()-Pe.timeEvent[e],delete Pe[e]),ve(n)}else S({code:600025,fn:"track",value:e})}function Ge(t){var n;E(t)?(n=t,P.ARK_TRACKID=n,D(),A({code:20002,value:t,fn:"identify"}),e.AnalysysModal&&e.AnalysysModal([{xwhat:"$identify",xwho:t}])):S({code:60009,fn:"identify",value:t})}function Ze(e){var t=P.ARK_TRACKID||P.ARK_ID;return e&&e(t),t}function We(e){var t=T(e,"$pageProperty");!function(e){Te=Object.assign({},Te,e)}(t),Object.keys(t).length&&A({fn:"$pageProperty",code:20002,value:e})}function He(e,t){var n=k(),r=$e(),o=Number(ye.share_level)+1;c(e)||(e={path:r});re((function(){var e=xe("$share"),a={$share_id:n,$share_level:o,$share_path:r},i={};t&&(i=T(t,"$share")),e.xcontext=Object.assign({},e.xcontext,a,N(),i),ve(e)}))();var a="share_id="+n+"&share_level="+o+"&share_path="+encodeURIComponent(r);e.path=e.path||r;var i=e.path.indexOf("?")>-1?"&":"?";return e.path=e.path+i+a,e}var qe=["onLoad","onShow","onReady","onHide","onUnload","onPullDownRefresh","onReachBottom","onShareAppMessage","onShareTimeline","onAddToFavorites","onPageScroll","onResize","onTabItemTap","onSaveExitState"];function Je(e,t,n){var r=e[t];r?e[t]="onShareAppMessage"===t?function(e){return n(r.call(this,e))}:function(e){var o=r.apply(this,arguments);return n(e,t),o}:"onShareAppMessage"!==t&&(e[t]=function(e){n(e)})}function Xe(e){Je(e,"onShow",(function(){if(!0===ae.auto){var e=_e().__wxExparserNodeId__;Pe.pageview.state[e]||(re(De)(),Pe.pageview.state[e]=!0)}else Pe.pageview.xwhen=W()}));var t=function(){var e=_e().__wxExparserNodeId__;Pe.pageview.state[e]&&delete Pe.pageview.state[e]};if(Je(e,"onHide",(function(){ae.autoPageViewDuration&&be(),t()})),Je(e,"onUnload",(function(){ae.autoPageViewDuration&&be(),t()})),1==ae.autoShare&&Je(e,"onShareAppMessage",He),1==ae.autoTrack)for(var n in e){var r=e[n];s(r)&&qe.indexOf(n)<0?Je(e,n,je):s(r)&&"onTabItemTap"==n&&Je(e,n,Ce)}}var Qe=App,et=Page,tt=Component;function nt(e){Je(e,"onLaunch",(function(e){!function(e){var t=e.query;t&&(ye.utm_campaign_id=e.query.campaign_id,ye.utm_campaign=t.utm_campaign,ye.utm_content=t.utm_content,ye.utm_medium=t.utm_medium,ye.utm_source=t.utm_source,ye.utm_term=t.utm_term),t.share_id&&t.share_level&&t.share_path&&(ye.share_id=t.share_id,ye.share_level=t.share_level,ye.share_path=decodeURIComponent(t.share_path)),e.scene&&(ye.scene=e.scene)}(e)})),Je(e,"onShow",(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Pe.startup.state||(ae.autoStartUp&&re(Fe).apply(void 0,e),Pe.startup.state=!0)})),Je(e,"onHide",(function(){var e,t;Pe.startup.state&&(ae.autoEnd&&(e=xe("$end"),t={$duration:e.xwhen-Pe.startup.xwhen},e.xcontext=Object.assign({},e.xcontext,N(),t),ve(e)),Pe.startup.state=!1)})),Qe(e)}var rt=function(){function e(){this.config={appkey:"",uploadURL:"",debugMode:0,auto:!0,autoStartUp:!0,autoEnd:!0,autoProfile:!0,encryptType:0,autoShare:!1,allowTimeCheck:!1,maxDiffTimeInterval:30,autoTrack:!1,autoCompleteURL:!0,autoPageViewDuration:!1,sendDataTimeout:1e4,$appid:"",$appname:""},this.pageView=re(De),this.share=He,this.registerSuperProperty=ce,this.registerSuperProperties=se,this.getSuperProperty=fe,this.getSuperProperties=pe,this.unRegisterSuperProperty=le,this.clearSuperProperties=de,this.profileSetOnce=Ie,this.profileSet=Ue,this.profileAppend=Ke,this.profileIncrement=ke,this.profileDelete=Ne,this.profileUnset=Le,this.reset=Ve,this.track=re(Be),this.timeEvent=Ye,this.alias=re(Me),this.getPresetProperties=ze,this.identify=Ge,this.getDistinctId=Ze,this.pageProperty=We,I()}return e.prototype.init=function(e){var t=this;ie(e).then((function(e){t.config=e,A({code:20007})}))},e.prototype.App=function(e){nt(e)},e.prototype.Page=function(e){!function(e){Xe(e),et(e)}(e)},e}();Object.keys({appkey:"",uploadURL:"",debugMode:0,auto:!0,autoStartUp:!0,autoEnd:!0,autoProfile:!0,encryptType:0,autoShare:!1,allowTimeCheck:!1,maxDiffTimeInterval:30,autoTrack:!1,autoCompleteURL:!0,autoPageViewDuration:!1,sendDataTimeout:1e4,$appid:"",$appname:""}).forEach((function(e){Object.defineProperty(rt.prototype,e,{get:function(){return this.config[e]},set:function(t){var n,r=this;ie((n={},n[e]=t,n)).then((function(e){r.config=e}))},enumerable:!1,configurable:!0})}));var ot=new rt;e.AnalysysAgent=ot,Component=function(e){e.methods&&Xe(e.methods),tt(e)},module.exports=ot;
